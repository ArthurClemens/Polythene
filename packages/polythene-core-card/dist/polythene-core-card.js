!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e=e||self).polythene={},e["polythene-core"])}(this,function(e,t){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function r(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a,r,i={},n=Object.keys(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(r=0;r<n.length;r++)a=n[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=[],r=!0,i=!1,n=void 0;try{for(var o,d=e[Symbol.iterator]();!(r=(o=d.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(e){i=!0,n=e}finally{try{r||null==d.return||d.return()}finally{if(i)throw n}}return a}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var n={component:"pe-card",actions:"pe-card__actions",any:"pe-card__any",content:"pe-card__content",header:"pe-card__header",headerTitle:"pe-card__header-title",media:"pe-card__media",mediaDimmer:"pe-card__media__dimmer",overlay:"pe-card__overlay",overlayContent:"pe-card__overlay__content",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",subtitle:"pe-card__subtitle",text:"pe-card__text",title:"pe-card__title",actionsBorder:"pe-card__actions--border",actionsHorizontal:"pe-card__actions--horizontal",actionsJustified:"pe-card__actions--justified",actionsTight:"pe-card__actions--tight",actionsVertical:"pe-card__actions--vertical",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",mediaOriginStart:"pe-card__media--origin-start",mediaOriginCenter:"pe-card__media--origin-center",mediaOriginEnd:"pe-card__media--origin-end",mediaLarge:"pe-card__media--large",mediaMedium:"pe-card__media--medium",mediaRatioLandscape:"pe-card__media--landscape",mediaRatioSquare:"pe-card__media--square",mediaRegular:"pe-card__media--regular",mediaSmall:"pe-card__media--small",overlaySheet:"pe-card__overlay--sheet",primaryHasMedia:"pe-card__primary--media",primaryTight:"pe-card__primary--tight",textTight:"pe-card__text--tight"},o={landscape:16/9,square:1},d={small:n.mediaSmall,regular:n.mediaRegular,medium:n.mediaMedium,large:n.mediaLarge},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"regular";return d[e]},s="pe-button-row",l={horizontal:n.actionsHorizontal,vertical:n.actionsVertical,justified:n.actionsJustified},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"horizontal";return l[e]};e._Card=function(e){var i=e.h,o=e.a,d=e.CardActions,c=e.CardMedia,s=e.CardPrimary,l=e.Icon,u=e.ListTile,m=e.Shadow,p=r(e,["h","a","CardActions","CardMedia","CardPrimary","Icon","ListTile","Shadow"]),y=a({},t.filterSupportedAttributes(p),p.testId&&{"data-test-id":p.testId},{className:[n.component,"dark"===p.tone?"pe-dark-tone":null,"light"===p.tone?"pe-light-tone":null,p.className||p[o.class]].join(" ")},p.url,p.events),h=[p.before,Array.isArray(p.content)?p.content.map(function e(r){var m=Object.keys(r)[0],p=a({},r[m],{dispatcher:e,key:m});switch(m){case"actions":return i(d,p);case"header":return function(e){var t=e.props,r=e.h,i=e.a,o=e.Icon;return r(e.ListTile,a({},t,{key:t.key||"card-header",className:[n.header,t.className||t[i.class]].join(" ")},t.icon?{front:r(o,t.icon)}:null))}({props:p,h:i,a:o,Icon:l,ListTile:u});case"media":return i(c,p);case"overlay":return function(e){var t=e.dispatcher,a=e.props,r=e.h,i=e.a,o=a.element||"div",d=a.content.map(t);return r("div",{key:a.key||"card-overlay",style:a.style,className:[n.overlay,a.sheet?n.overlaySheet:null,"light"===a.tone?null:"pe-dark-tone","light"===a.tone?"pe-light-tone":null].join(" ")},[r(o,{key:"content",className:[n.overlayContent,a.className||a[i.class]].join(" ")},d),r("div",{key:"dimmer",className:n.mediaDimmer})])}({dispatcher:e,props:p,h:i,a:o});case"primary":return i(s,p);case"text":return function(e){var r=e.props,i=e.h,o=e.a;return i(r.element||"div",a({},t.filterSupportedAttributes(r),{key:r.key||"card-text",className:[n.text,r.tight?n.textTight:null,r.className||r[o.class]].join(" ")},r.events),r.content)}({props:p,h:i,a:o});case"any":return function(e){var r=e.props,i=e.h,o=e.a;return i(r.element||"div",a({},t.filterSupportedAttributes(r),{key:r.key||"card-any",className:[n.any,r.tight?n.textTight:null,r.className||r[o.class]].join(" ")}),r.content)}({props:p,h:i,a:o});default:throw'Content type "'.concat(m,'" does not exist')}}):p.content,p.after],_=void 0!==p.shadowDepth?p.shadowDepth:p.z,f=[i(m,{shadowDepth:void 0!==_?_:1,animated:!0,key:"shadow"}),i("div",{className:n.content,key:"content"},h),p.children],v=p.element||p.url?"a":"div";return i(v,y,f)},e._CardActions=function(e){var i=e.h,o=e.a,d=r(e,["h","a"]),c=a({},t.filterSupportedAttributes(d),d.testId&&{"data-test-id":d.testId},{key:"card-actions",className:[n.actions,"vertical"!==d.layout?s:null,u(d.layout),d.border||d.bordered?n.actionsBorder:null,d.tight?n.actionsTight:null,d.className||d[o.class]].join(" ")},d.events),l=d.content||d.children;return i(d.element||"div",c,l)},e._CardMedia=function(e){var d=e.h,s=e.a,l=e.useEffect,u=e.useState,m=e.getRef,p=r(e,["h","a","useEffect","useState","getRef"]),y=i(u(),2),h=y[0],_=y[1],f=p.ratio||"landscape";l(function(){if(h){var e=p.ratio||"landscape",t=p.origin||"center",a=h.querySelector("img")||h.querySelector("iframe");!function(e){var t=e.dom,a=e.img,r=e.ratio,i=e.origin;a.onload=function(){"IMG"===a.tagName&&(t.style.backgroundImage="url(".concat(a.src,")"));var e=this.naturalWidth/this.naturalHeight<o[r]?n.mediaCropX:n.mediaCropY;t.classList.add(e);var d="start"===i?n.mediaOriginStart:"end"===i?n.mediaOriginEnd:n.mediaOriginCenter;t.classList.add(d)}}({dom:h,img:a,ratio:e,origin:t})}},[h]);var v=a({},t.filterSupportedAttributes(p),m(function(e){return e&&!h&&_(e)}),p.testId&&{"data-test-id":p.testId},{key:"card-media",className:[n.media,c(p.size),"landscape"===f?n.mediaRatioLandscape:n.mediaRatioSquare,p.className||p[s.class]].join(" ")},p.events),g=p.dispatcher,b=[a({},p.content,{key:"content"}),p.overlay?g({overlay:p.overlay,key:"overlay"}):p.showDimmer&&d("div",{className:n.mediaDimmer,key:"dimmer"})];return d(p.element||"div",v,b)},e._CardPrimary=function(e){var i=e.h,o=e.a,d=r(e,["h","a"]),c=Array.isArray(d.content)?d.content.reduce(function(e,t){return"media"===Object.keys(t)[0]||e},!1):d.media||!1,s=a({},t.filterSupportedAttributes(d),d.testId&&{"data-test-id":d.testId},{key:"card-primary",className:[n.primary,d.tight?n.primaryTight:null,c?n.primaryHasMedia:null,d.className||d[o.class]].join(" ")},d.events),l=d.dispatcher,u={title:function(e){return e.attrs||e.props?e||e.props:i("div",{className:n.title,key:"title",style:e.style},[e.title,e.subtitle?i("div",{className:n.subtitle,key:"subtitle"},e.subtitle):null])},media:function(e){return i("div",{className:n.primaryMedia,key:"media",style:e.style},l({media:e}))},actions:function(e){return l({actions:e})}},m=Array.isArray(d.content)?d.content.map(function(e){var t=Object.keys(e)[0],a=e[t];return u[t]?u[t](a):e}):[d.title?u.title({title:d.title,subtitle:d.subtitle,key:"title"}):null,d.media?u.media(d.media):null,d.actions?u.actions(d.actions):null,d.content];return i(d.element||"div",s,m)},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-card.js.map
