!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t(e.polythene={},e["polythene-core"])}(this,function(e,t){"use strict";var a={component:"pe-card",actions:"pe-card__actions",any:"pe-card__any",content:"pe-card__content",header:"pe-card__header",headerTitle:"pe-card__header-title",media:"pe-card__media",mediaDimmer:"pe-card__media__dimmer",overlay:"pe-card__overlay",overlayContent:"pe-card__overlay__content",primary:"pe-card__primary",primaryMedia:"pe-card__primary-media",subtitle:"pe-card__subtitle",text:"pe-card__text",title:"pe-card__title",actionsBorder:"pe-card__actions--border",actionsHorizontal:"pe-card__actions--horizontal",actionsJustified:"pe-card__actions--justified",actionsTight:"pe-card__actions--tight",actionsVertical:"pe-card__actions--vertical",mediaCropX:"pe-card__media--crop-x",mediaCropY:"pe-card__media--crop-y",mediaOriginStart:"pe-card__media--origin-start",mediaOriginCenter:"pe-card__media--origin-center",mediaOriginEnd:"pe-card__media--origin-end",mediaLarge:"pe-card__media--large",mediaMedium:"pe-card__media--medium",mediaRatioLandscape:"pe-card__media--landscape",mediaRatioSquare:"pe-card__media--square",mediaRegular:"pe-card__media--regular",mediaSmall:"pe-card__media--small",overlaySheet:"pe-card__overlay--sheet",primaryHasMedia:"pe-card__primary--media",primaryTight:"pe-card__primary--tight",textTight:"pe-card__text--tight"};var r=Object.freeze({getElement:e=>e.attrs.element||e.attrs.url?"a":"div",onMount:({attrs:e})=>{void 0!==e.z&&t.deprecation("Card",{option:"z",newOption:"shadowDepth"})},createProps:(e,{keys:r})=>{const i=e.attrs;return Object.assign({},t.filterSupportedAttributes(i),{className:[a.component,"dark"===i.tone?"pe-dark-tone":null,"light"===i.tone?"pe-light-tone":null,i.className||i[r.class]].join(" ")},i.url,i.events)},createContent:(e,{renderer:r,keys:i,CardActions:n,CardMedia:s,CardPrimary:o,Icon:c,Shadow:d,ListTile:l})=>{const m=e=>{const d=Object.keys(e)[0],p=Object.assign({},e[d],{dispatcher:m,key:d});switch(d){case"actions":return r(n,p);case"header":return(({attrs:e,h:t,k:r,Icon:i,ListTile:n})=>t(n,Object.assign({},e,{key:e.key||"card-header",className:[a.header,e.className||e[r.class]].join(" ")},e.icon?{front:t(i,e.icon)}:null)))({attrs:p,h:r,k:i,Icon:c,ListTile:l});case"media":return r(s,p);case"overlay":return(({dispatcher:e,attrs:t,h:r,k:i})=>{const n=t.element||"div",s=t.content.map(e);return r("div",{key:t.key||"card-overlay",style:t.style,className:[a.overlay,t.sheet?a.overlaySheet:null,"light"===t.tone?null:"pe-dark-tone","light"===t.tone?"pe-light-tone":null].join(" ")},[r(n,{key:"content",className:[a.overlayContent,t.className||t[i.class]].join(" ")},s),r("div",{key:"dimmer",className:a.mediaDimmer})])})({dispatcher:m,attrs:p,h:r,k:i});case"primary":return r(o,p);case"text":return(({attrs:e,h:r,k:i})=>r(e.element||"div",Object.assign({},t.filterSupportedAttributes(e),{key:e.key||"card-text",className:[a.text,e.tight?a.textTight:null,e.className||e[i.class]].join(" ")},e.events),e.content))({attrs:p,h:r,k:i});case"any":return(({attrs:e,h:r,k:i})=>r(e.element||"div",Object.assign({},t.filterSupportedAttributes(e),{key:e.key||"card-any",className:[a.any,e.tight?a.textTight:null,e.className||e[i.class]].join(" ")}),e.content))({attrs:p,h:r,k:i});default:throw`Content type "${d}" does not exist`}},p=e.attrs,u=Array.isArray(p.content)?p.content.map(m):p.content,y=void 0!==p.shadowDepth?p.shadowDepth:p.z;return[r(d,{shadowDepth:void 0!==y?y:1,animated:!0,key:"shadow"}),r("div",{className:a.content,key:"content"},u)]}}),i="pe-button-row";const n={horizontal:a.actionsHorizontal,vertical:a.actionsVertical,justified:a.actionsJustified},s=(e="horizontal")=>n[e];var o=Object.freeze({onMount:({attrs:e})=>{void 0!==e.bordered&&t.deprecation("Card",{option:"bordered",newOption:"border"})},createProps:(e,{keys:r})=>{const n=e.attrs;return Object.assign({},t.filterSupportedAttributes(n),{key:"card-actions",className:[a.actions,"vertical"!==n.layout?i:null,s(n.layout),n.border||n.bordered?a.actionsBorder:null,n.tight?a.actionsTight:null,n.className||n[r.class]].join(" ")},n.events)},createContent:e=>e.attrs.content||e.children});const c={landscape:16/9,square:1},d={small:a.mediaSmall,regular:a.mediaRegular,medium:a.mediaMedium,large:a.mediaLarge},l=(e="regular")=>d[e],m=({dom:e,img:t,ratio:r,origin:i})=>{t.onload=function(){"IMG"===t.tagName&&(e.style.backgroundImage=`url(${t.src})`);const n=this.naturalWidth/this.naturalHeight<c[r]?a.mediaCropX:a.mediaCropY;e.classList.add(n);const s="start"===i?a.mediaOriginStart:"end"===i?a.mediaOriginEnd:a.mediaOriginCenter;e.classList.add(s)}};var p=Object.freeze({onMount:e=>{if(!e.dom)return;const t=e.attrs,a=t.ratio||"landscape",r=t.origin||"center",i=e.dom,n=i.querySelector("img")||i.querySelector("iframe");m({dom:i,img:n,ratio:a,origin:r})},createProps:(e,{keys:r})=>{const i=e.attrs,n=i.ratio||"landscape";return Object.assign({},t.filterSupportedAttributes(i),{key:"card-media",className:[a.media,l(i.size),"landscape"===n?a.mediaRatioLandscape:a.mediaRatioSquare,i.className||i[r.class]].join(" ")},i.events)},createContent:(e,{renderer:t})=>{const r=e.attrs,i=r.dispatcher;return[Object.assign({},r.content,{key:"content"}),r.overlay?i({overlay:r.overlay,key:"overlay"}):r.showDimmer&&t("div",{className:a.mediaDimmer,key:"dimmer"})]}});var u=Object.freeze({createProps:(e,{keys:r})=>{const i=e.attrs,n=Array.isArray(i.content)?i.content.reduce((e,t)=>"media"===Object.keys(t)[0]||e,!1):i.media||!1;return Object.assign({},t.filterSupportedAttributes(i),{key:"card-primary",className:[a.primary,i.tight?a.primaryTight:null,n?a.primaryHasMedia:null,i.className||i[r.class]].join(" ")},i.events)},createContent:(e,{renderer:t})=>{const r=e.attrs,i=r.dispatcher,n={title:e=>e.attrs||e.props?e||e.props:t("div",{className:a.title,key:"title",style:e.style},[e.title,e.subtitle?t("div",{className:a.subtitle,key:"subtitle"},e.subtitle):null]),media:e=>t("div",{className:a.primaryMedia,key:"media",style:e.style},i({media:e})),actions:e=>i({actions:e})};return Array.isArray(r.content)?r.content.map(e=>{const t=Object.keys(e)[0],a=e[t];return n[t]?n[t](a):e}):[r.title?n.title({title:r.title,subtitle:r.subtitle,key:"title"}):null,r.media?n.media(r.media):null,r.actions?n.actions(r.actions):null,r.content]}});e.coreCard=r,e.coreCardActions=o,e.coreCardMedia=p,e.coreCardPrimary=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-card.js.map
