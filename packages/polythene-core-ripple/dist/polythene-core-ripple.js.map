{"version":3,"file":"polythene-core-ripple.js","sources":["../../polythene-core/dist/polythene-core.mjs","../../polythene-style/dist/polythene-style.mjs","../src/animation.js","../../polythene-css-classes/ripple.js","../src/ripple.js"],"sourcesContent":["const isClient = typeof document !== \"undefined\";\nconst isServer = !isClient;\n\nconst evts = {\n  \"animation\": \"animationend\",\n  \"OAnimation\": \"oAnimationEnd\",\n  \"MozAnimation\": \"animationend\",\n  \"WebkitAnimation\": \"webkitAnimationEnd\"\n};\nconst getAnimationEndEvent = () => {\n  if (isClient) {\n    const el = document.createElement(\"fakeelement\");\n\n    for (let a in evts) {\n      if (el.style[a] !== undefined) {\n        return evts[a];\n      }\n    }\n  }\n};\n\nconst modes = {\n  hidden: \"hidden\",\n  visible: \"visible\",\n  exposing: \"exposing\",\n  hiding: \"hiding\"\n};\nconst Conditional = {\n  getInitialState: (vnode, createStream) => {\n    const attrs = vnode.attrs;\n\n    if (!attrs.didHide) {\n      return {};\n    }\n\n    const visible = attrs.permanent || attrs.show;\n    const mode = createStream(attrs.permanent ? modes.visible : visible ? modes.visible : modes.hidden);\n    return {\n      mode,\n      redrawOnUpdate: createStream.merge([mode])\n    };\n  },\n  onUpdate: ({\n    state,\n    attrs\n  }) => {\n    if (!attrs.didHide) {\n      return;\n    }\n\n    const mode = state.mode();\n\n    if (attrs.permanent) {\n      if (mode === modes.visible && attrs.show) {\n        state.mode(modes.exposing);\n      } else if (mode === modes.exposing && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    } else {\n      // \"normal\" type\n      if (mode === modes.hidden && attrs.show) {\n        state.mode(modes.visible);\n      } else if (mode === modes.visible && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    }\n  },\n  view: ({\n    state,\n    attrs\n  }, {\n    renderer: h\n  }) => {\n    const placeholder = h(\"span\", {\n      className: attrs.placeholderClassName\n    }); // No didHide callback passed: use normal visibility evaluation\n\n    if (!attrs.didHide) {\n      return attrs.permanent || attrs.inactive || attrs.show ? h(attrs.instance, attrs) : placeholder;\n    } // else: use didHide to reset the state after hiding\n\n\n    const mode = state.mode();\n    const visible = mode !== modes.hidden;\n    return visible ? h(attrs.instance, Object.assign({}, attrs, {\n      didHide: args => (attrs.didHide(args), state.mode(attrs.permanent ? modes.visible : modes.hidden))\n    }, mode === modes.hiding && {\n      show: true,\n      hide: true\n    })) : placeholder;\n  }\n};\nConditional.displayName = \"Conditional\";\n\nconst r = (acc, p) => (acc[p] = 1, acc);\n/* \nSeparately handled props:\n- class\n- element\n*/\n\n\nconst defaultAttrs = [// Universal\n\"key\", \"style\", \"href\", \"id\", // React\n\"tabIndex\", // Mithril\n\"tabindex\", \"oninit\", \"oncreate\", \"onupdate\", \"onbeforeremove\", \"onremove\", \"onbeforeupdate\"];\nconst filterSupportedAttributes = (attrs, {\n  add: addAttrs = [],\n  remove: removeAttrs = []\n} = {}) => {\n  const removeLookup = removeAttrs.reduce(r, {});\n  const supported = defaultAttrs.concat(addAttrs).filter(item => !removeLookup[item]).reduce(r, {});\n  return Object.keys(attrs).reduce((acc, key) => (supported[key] ? acc[key] = attrs[key] : null, acc), {});\n};\nconst unpackAttrs = attrs => typeof attrs === \"function\" ? attrs() : attrs;\n\nconst sizeClasses = classes => ({\n  small: classes.small,\n  regular: classes.regular,\n  medium: classes.medium,\n  large: classes.large,\n  fab: classes.fab\n});\n\nconst classForSize = (classes, size = \"regular\") => sizeClasses(classes)[size];\n\nconst isTouch = isServer ? false : \"ontouchstart\" in document.documentElement;\nconst pointerStartEvent = isTouch ? [\"touchstart\", \"click\"] : [\"click\"];\nconst pointerEndEvent = isTouch ? [\"click\", \"mouseup\"] : [\"mouseup\"];\nconst pointerStartMoveEvent = isTouch ? [\"touchstart\", \"mousedown\"] : [\"mousedown\"];\nconst pointerMoveEvent = isTouch ? [\"touchmove\", \"mousemove\"] : [\"mousemove\"];\nconst pointerEndMoveEvent = isTouch ? [\"touchend\", \"mouseup\"] : [\"mouseup\"];\n\nif (isClient) {\n  document.querySelector(\"html\").classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n}\n\nconst listeners = {}; // https://gist.github.com/Eartz/fe651f2fadcc11444549\n\nconst throttle = (func, s = 0.05, context = isClient ? window : {}) => {\n  let wait = false;\n  return (...args) => {\n    const later = () => func.apply(context, args);\n\n    if (!wait) {\n      later();\n      wait = true;\n      setTimeout(() => wait = false, s);\n    }\n  };\n};\nconst subscribe = (eventName, listener, delay) => {\n  listeners[eventName] = listeners[eventName] || [];\n  listeners[eventName].push(delay ? throttle(listener, delay) : listener);\n};\nconst unsubscribe = (eventName, listener) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  const index = listeners[eventName].indexOf(listener);\n\n  if (index > -1) {\n    listeners[eventName].splice(index, 1);\n  }\n};\nconst emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(listener => listener(event));\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\", e => emit(\"resize\", e));\n  window.addEventListener(\"scroll\", e => emit(\"scroll\", e));\n  window.addEventListener(\"keydown\", e => emit(\"keydown\", e));\n  window.addEventListener(pointerEndEvent, e => emit(pointerEndEvent, e));\n}\n\n/*\nHelper module to manage multiple items of the same component type.\n*/\nconst Multi = ({\n  options: mOptions,\n  renderer\n}) => {\n  const items = []; // This is shared between all instances of a type (Dialog, Notification, ...)\n\n  let current;\n\n  const getInitialState = (vnode, createStream) => {\n    current = createStream(null);\n    return {\n      current,\n      redrawOnUpdate: createStream.merge([current])\n    };\n  };\n  /*\n  @param e: { id, eventName }\n  */\n\n\n  const onChange = e => {\n    if (!current) {\n      console.error(\"Cannot set state. Did you set a root element like Dialog to show instances?\"); // eslint-disable-line no-console\n    }\n\n    current(e.id);\n    emit(mOptions.name, e);\n  };\n\n  const itemIndex = id => {\n    const item = findItem(id);\n    return items.indexOf(item);\n  };\n\n  const removeItem = id => {\n    const index = itemIndex(id);\n\n    if (index !== -1) {\n      items.splice(index, 1);\n      onChange({\n        id,\n        name: \"removeItem\"\n      });\n    }\n  };\n\n  const replaceItem = (id, newItem) => {\n    const index = itemIndex(id);\n\n    if (index !== -1) {\n      items[index] = newItem;\n    }\n  };\n\n  const findItem = id => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].instanceId === id) {\n        return items[i];\n      }\n    }\n  };\n\n  const next = () => {\n    if (items.length) {\n      items[0].show = true;\n    }\n\n    onChange({\n      id: items.length ? items[0].instanceId : null,\n      name: \"next\"\n    });\n  };\n\n  const remove = (instanceId = mOptions.defaultId) => {\n    if (mOptions.queue) {\n      items.shift();\n      next();\n    } else {\n      removeItem(instanceId);\n    }\n  };\n\n  const removeAll = () => {\n    items.length = 0;\n    onChange({\n      id: null,\n      name: \"removeAll\"\n    });\n  };\n\n  const setPauseState = (pause, instanceId) => {\n    const item = findItem(instanceId);\n\n    if (item) {\n      item.pause = pause;\n      item.unpause = !pause;\n      onChange({\n        id: instanceId,\n        name: pause ? \"pause\" : \"unpause\"\n      });\n    }\n  };\n\n  const createItem = (itemAttrs, instanceId, spawn) => {\n    let resolveShow;\n    let resolveHide;\n    const attrs = unpackAttrs(itemAttrs);\n\n    const didShow = () => {\n      if (attrs.didShow) {\n        attrs.didShow(instanceId);\n      }\n\n      onChange({\n        id: instanceId,\n        name: \"didShow\"\n      });\n      return resolveShow(instanceId);\n    };\n\n    const showPromise = new Promise(resolve => resolveShow = resolve);\n\n    const didHide = () => {\n      if (attrs.didHide) {\n        attrs.didHide(instanceId);\n      }\n\n      onChange({\n        id: instanceId,\n        name: \"didHide\"\n      });\n      remove(instanceId);\n      return resolveHide(instanceId);\n    };\n\n    const hidePromise = new Promise(resolve => resolveHide = resolve);\n    return Object.assign({}, mOptions, {\n      instanceId,\n      spawn,\n      attrs: itemAttrs,\n      show: mOptions.queue ? false : true,\n      showPromise,\n      hidePromise,\n      didShow,\n      didHide\n    });\n  };\n\n  const count = () => items.length;\n\n  const pause = (instanceId = mOptions.defaultId) => setPauseState(true, instanceId);\n\n  const unpause = (instanceId = mOptions.defaultId) => setPauseState(false, instanceId);\n\n  const show = (attrs = {}, spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const spawn = spawnOpts.spawn || mOptions.defaultId;\n    const item = createItem(attrs, instanceId, spawn);\n    onChange({\n      id: instanceId,\n      name: \"show\"\n    });\n\n    if (mOptions.queue) {\n      items.push(item);\n\n      if (items.length === 1) {\n        next();\n      }\n    } else {\n      const storedItem = findItem(instanceId);\n\n      if (!storedItem) {\n        items.push(item);\n      } else {\n        replaceItem(instanceId, item);\n      }\n    }\n\n    return item.showPromise;\n  };\n\n  const hide = (spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const item = mOptions.queue && items.length ? items[0] : findItem(instanceId);\n\n    if (item) {\n      item.hide = true;\n    }\n\n    onChange({\n      id: instanceId,\n      name: \"hide\"\n    });\n    return item ? item.hidePromise : Promise.resolve(instanceId);\n  };\n\n  const clear = removeAll;\n\n  const view = ({\n    attrs\n  }) => {\n    const spawn = attrs.spawn || mOptions.defaultId;\n    const candidates = items.filter(item => item.show && item.spawn === spawn);\n\n    if (mOptions.htmlShowClass && isClient && document.documentElement) {\n      document.documentElement.classList[candidates.length ? \"add\" : \"remove\"](mOptions.htmlShowClass);\n    }\n\n    return !candidates.length ? renderer(mOptions.placeholder) // placeholder because we cannot return null\n    : renderer(mOptions.holderSelector, {\n      className: attrs.position === \"container\" ? \"pe-multiple--container\" : \"pe-multiple--screen\"\n    }, candidates.map(itemData => {\n      return renderer(mOptions.instance, Object.assign({}, {\n        fromMultipleClassName: mOptions.className,\n        fromMultipleClear: clear,\n        fromMultipleDidHide: itemData.didHide,\n        fromMultipleDidShow: itemData.didShow,\n        hide: itemData.hide,\n        holderSelector: mOptions.holderSelector,\n        instanceId: itemData.instanceId,\n        key: itemData.key,\n        pause: itemData.pause,\n        show: itemData.show,\n        spawnId: spawn,\n        transitions: mOptions.transitions,\n        unpause: itemData.unpause\n      }, unpackAttrs(itemData.attrs)));\n    }));\n  };\n\n  return {\n    clear,\n    count,\n    getInitialState,\n    hide,\n    pause,\n    remove,\n    show,\n    unpause,\n    view\n  };\n};\nMulti.displayName = \"Multi\";\n\nconst getStyle = ({\n  element,\n  selector,\n  pseudoSelector,\n  prop\n}) => {\n  const el = selector ? element.querySelector(selector) : element;\n\n  if (!el) {\n    return;\n  }\n\n  return el.currentStyle ? el.currentStyle[prop] : window.getComputedStyle ? document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop) : null;\n};\nconst stylePropCompare = ({\n  element,\n  selector,\n  pseudoSelector,\n  prop,\n  equals,\n  contains\n}) => {\n  const el = selector ? element.querySelector(selector) : element;\n\n  if (!el) {\n    return false;\n  }\n\n  if (equals !== undefined) {\n    return equals === document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop);\n  }\n\n  if (contains !== undefined) {\n    return document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop).indexOf(contains) !== -1;\n  }\n};\nconst isRTL = ({\n  element = document,\n  selector\n}) => stylePropCompare({\n  element,\n  selector,\n  prop: \"direction\",\n  equals: \"rtl\"\n});\nconst styleDurationToMs = durationStr => {\n  const parsed = parseFloat(durationStr) * (durationStr.indexOf(\"ms\") === -1 ? 1000 : 1);\n  return isNaN(parsed) ? 0 : parsed;\n};\n\n/*\nGeneric show/hide transition module\n*/\n\nconst DEFAULT_DURATION = .240;\nconst DEFAULT_DELAY = 0; // const TRANSITION =    \"both\";\n// See: transition\n\nconst show = opts => transition(opts, \"show\");\nconst hide = opts => transition(opts, \"hide\");\n/*\nopts:\n- el\n- duration\n- delay\n- showClass\n- transitionClass\n- before\n- show\n- hide\n- after\n- timingFunction\n\n- state (show, hide)\n*/\n\nconst transition = (opts, state) => {\n  const el = opts.el;\n\n  if (!el) {\n    return Promise.resolve();\n  } else {\n    return new Promise(resolve => {\n      const style = el.style;\n      const computedStyle = isClient ? window.getComputedStyle(el) : {};\n      const duration = opts.hasDuration ? opts.duration * 1000.0 : styleDurationToMs(computedStyle.transitionDuration);\n      const delay = opts.hasDelay ? opts.delay * 1000.0 : styleDurationToMs(computedStyle.transitionDelay);\n      const timingFunction = opts.timingFunction || computedStyle.transitionTimingFunction;\n\n      if (opts.transitionClass) {\n        const transitionClassElement = opts.transitionClassElement || el;\n        transitionClassElement.classList.add(opts.transitionClass);\n      }\n\n      const before = () => {\n        style.transitionDuration = \"0ms\";\n        style.transitionDelay = \"0ms\";\n        opts.before();\n      };\n\n      const maybeBefore = opts.before && state === \"show\" ? before : opts.before && state === \"hide\" ? before : null;\n      const after = opts.after ? () => opts.after() : null;\n\n      const applyTransition = () => {\n        style.transitionDuration = duration + \"ms\";\n        style.transitionDelay = delay + \"ms\";\n\n        if (timingFunction) {\n          style.transitionTimingFunction = timingFunction;\n        }\n\n        if (opts.showClass) {\n          const showClassElement = opts.showClassElement || el;\n          showClassElement.classList[state === \"show\" ? \"add\" : \"remove\"](opts.showClass);\n        }\n\n        if (opts.transition) {\n          opts.transition();\n        }\n      };\n\n      const doTransition = () => {\n        applyTransition();\n        setTimeout(() => {\n          if (after) {\n            after();\n          }\n\n          if (opts.transitionClass) {\n            const transitionClassElement = opts.transitionClassElement || el;\n            transitionClassElement.classList.remove(opts.transitionClass);\n            el.offsetHeight; // force reflow\n          }\n\n          resolve();\n        }, duration + delay);\n      };\n\n      const maybeDelayTransition = () => {\n        if (duration === 0) {\n          doTransition();\n        } else {\n          setTimeout(doTransition, 0);\n        }\n      };\n\n      if (maybeBefore) {\n        maybeBefore();\n        el.offsetHeight; // force reflow\n\n        setTimeout(() => {\n          maybeDelayTransition();\n        }, 0);\n      } else {\n        maybeDelayTransition();\n      }\n    });\n  }\n};\n\nconst transitionComponent = ({\n  isShow,\n  state,\n  attrs,\n  domElements,\n  beforeTransition,\n  afterTransition,\n  showClass,\n  transitionClass\n}) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n\n  state.transitioning(true);\n  state.visible(isShow ? true : false);\n\n  if (beforeTransition) {\n    beforeTransition();\n  }\n\n  const duration = attrs[isShow ? \"showDuration\" : \"hideDuration\"];\n  const delay = attrs[isShow ? \"showDelay\" : \"hideDelay\"];\n  const timingFunction = attrs[isShow ? \"showTimingFunction\" : \"hideTimingFunction\"];\n  const transitions = attrs.transitions;\n  const fn = isShow ? show : hide;\n  const opts1 = Object.assign({}, attrs, domElements, {\n    showClass,\n    transitionClass,\n    duration,\n    delay,\n    timingFunction\n  });\n  const opts2 = Object.assign({}, opts1, transitions && transitions[isShow ? \"show\" : \"hide\"](opts1));\n  const opts3 = Object.assign({}, opts2, {\n    duration: opts2.duration !== undefined ? opts2.duration : DEFAULT_DURATION,\n    hasDuration: opts2.duration !== undefined,\n    delay: opts2.delay !== undefined ? opts2.delay : DEFAULT_DELAY,\n    hasDelay: opts2.delay !== undefined\n  });\n  return fn(opts3).then(() => {\n    const id = state.instanceId;\n\n    if (attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"]) {\n      attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"](id); // when used with Multiple; this will call attrs.didShow / attrs.didHide\n    } else if (attrs[isShow ? \"didShow\" : \"didHide\"]) {\n      attrs[isShow ? \"didShow\" : \"didHide\"](id); // when used directly\n    }\n\n    if (afterTransition) {\n      afterTransition();\n    }\n\n    state.transitioning(false);\n  });\n};\n\nconst deprecation = (component, {\n  option,\n  newOption,\n  newComponent\n}) => (option && console.warn(`${component}: option '${option}' is deprecated and will be removed in later versions. Use '${newOption}' instead.`), // eslint-disable-line no-console\nnewComponent && !newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use '${newComponent}' instead.`), // eslint-disable-line no-console\nnewComponent && newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use '${newComponent}' with option '${newOption}' instead.`) // eslint-disable-line no-console\n);\n\nconst iconDropdownUp = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-up-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 14l5-5 5 5z\\\"/></svg>\";\nconst iconDropdownDown = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-down-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 10l5 5 5-5z\\\"/></svg>\";\n\nexport { getAnimationEndEvent, Conditional, filterSupportedAttributes, unpackAttrs, classForSize, isClient, isServer, isTouch, pointerStartEvent, pointerEndEvent, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, Multi, show, hide, transitionComponent, throttle, subscribe, unsubscribe, emit, getStyle, stylePropCompare, isRTL, styleDurationToMs, deprecation, iconDropdownUp, iconDropdownDown };\n","// Global style variables\nconst grid_unit = 4;\nconst grid_unit_component = 8;\nconst increment = 7 * grid_unit_component; // 7 * 8 = 56\n\nconst increment_large = 8 * grid_unit_component; // 8 * 8 = 64\n\nconst animation_curve_slow_in_fast_out = \"cubic-bezier(.4, 0, .2, 1)\";\nconst animation_curve_slow_in_linear_out = \"cubic-bezier(0, 0, .2, 1)\";\nconst animation_curve_linear_in_fast_out = \"cubic-bezier(.4, 0, 1, 1)\";\nconst vars = {\n  // grid\n  grid_unit,\n  grid_unit_component,\n  increment,\n  increment_large,\n  grid_unit_menu: 56,\n  grid_unit_icon_button: 6 * grid_unit_component,\n  // 48\n  // common sizes\n  unit_block_border_radius: 4,\n  unit_item_border_radius: 4,\n  unit_indent: 72,\n  unit_side_padding: 16,\n  // buttons\n  unit_touch_height: 48,\n  unit_icon_size_small: 2 * grid_unit_component,\n  // 16\n  unit_icon_size: 3 * grid_unit_component,\n  // 24\n  unit_icon_size_medium: 4 * grid_unit_component,\n  // 32\n  unit_icon_size_large: 5 * grid_unit_component,\n  // 40\n  // screen dimensions\n  unit_screen_size_extra_large: 1280,\n  unit_screen_size_large: 960,\n  unit_screen_size_medium: 480,\n  unit_screen_size_small: 320,\n  // transitions\n  animation_duration: \".18s\",\n  animation_curve_slow_in_fast_out,\n  animation_curve_slow_in_linear_out,\n  animation_curve_linear_in_fast_out,\n  animation_curve_default: \"ease-out\",\n  // font\n  font_weight_light: 300,\n  font_weight_normal: 400,\n  font_weight_medium: 500,\n  font_weight_bold: 700,\n  font_size_title: 20,\n  line_height: 1.5,\n  // base colors\n  color_primary: \"33, 150, 243\",\n  // blue 500\n  color_primary_active: \"30, 136, 229\",\n  // blue 600\n  color_primary_dark: \"25, 118, 210\",\n  // blue 700\n  color_primary_faded: \"100, 181, 249\",\n  // blue 300\n  color_primary_foreground: \"255, 255, 255\",\n  color_light_background: \"255, 255, 255\",\n  color_light_foreground: \"0, 0, 0\",\n  color_dark_background: \"34, 34, 34\",\n  color_dark_foreground: \"255, 255, 255\",\n  // blends\n  blend_light_text_primary: .87,\n  blend_light_text_regular: .73,\n  blend_light_text_secondary: .54,\n  blend_light_text_tertiary: .40,\n  blend_light_text_disabled: .26,\n  blend_light_border_medium: .24,\n  blend_light_border_light: .11,\n  blend_light_background_active: .14,\n  blend_light_background_hover: .06,\n  blend_light_background_hover_medium: .12,\n  // for the lighter tinted icon buttons\n  blend_light_background_disabled: .09,\n  blend_light_overlay_background: .3,\n  blend_dark_text_primary: 1,\n  blend_dark_text_regular: .87,\n  blend_dark_text_secondary: .70,\n  blend_dark_text_tertiary: .40,\n  blend_dark_text_disabled: .26,\n  blend_dark_border_medium: .22,\n  blend_dark_border_light: .10,\n  blend_dark_background_active: .14,\n  blend_dark_background_hover: .08,\n  blend_dark_background_hoverMedium: .12,\n  // for the lighter tinted icon buttons\n  blend_dark_background_disabled: .12,\n  blend_dark_overlay_background: .3,\n\n  /*\n  Breakpoints\n  Specs: https://material.io/guidelines/layout/responsive-ui.html#responsive-ui-breakpoints\n  Breakbpoint naming: inspiration from\n  https://medium.freecodecamp.org/the-100-correct-way-to-do-css-breakpoints-88d6a5ba1862\n  */\n  breakpoint_for_phone_only: 599,\n  // set max-width  cols: 4,  gutter: 16\n  breakpoint_for_tablet_portrait_up: 600,\n  // set min-width  cols: 8,  gutter: 24\n  breakpoint_for_tablet_landscape_up: 840,\n  // etc.           cols: 12, gutter: 24\n  breakpoint_for_desktop_up: 1280,\n  breakpoint_for_big_desktop_up: 1600,\n  breakpoint_for_tv_up: 1920,\n  // z-index\n  z_toolbar: 100,\n  z_menu: 1000,\n  z_app_bar: 2000,\n  z_drawer: 3000,\n  z_notification: 4000,\n  z_dialog: 5000\n};\n\nexport { vars };\n","import { isTouch, getAnimationEndEvent, isServer } from \"polythene-core\";\nimport { vars } from \"polythene-theme\";\n\nconst ANIMATION_END_EVENT =    getAnimationEndEvent();\nconst DEFAULT_START_OPACITY =  0.2;\nconst DEFAULT_END_OPACITY =    0.0;\nconst DEFAULT_START_SCALE =    0.1;\nconst DEFAULT_END_SCALE =      2.0;\nconst OPACITY_DECAY_VELOCITY = 0.35;\n\nconst addStyleToHead = (id, stylesheet) => {\n  if (isServer) return;\n  const documentRef = window.document;\n  const styleEl = documentRef.createElement(\"style\");\n  styleEl.setAttribute(\"id\", id);\n  styleEl.appendChild(documentRef.createTextNode(stylesheet));\n  documentRef.head.appendChild(styleEl);\n};\n\nconst removeStyleFromHead = id => {\n  if (isServer) return;\n  const el = document.getElementById(id);\n  if (el && el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n};\n\nexport default ({ e, id, el, attrs, classes }) => {\n  return new Promise(resolve => {\n    const container = document.createElement(\"div\");\n    container.setAttribute(\"class\", classes.mask);\n    el.appendChild(container);\n    const waves = document.createElement(\"div\");\n    waves.setAttribute(\"class\", classes.waves);\n    container.appendChild(waves);\n    const rect = el.getBoundingClientRect();\n    const x = (isTouch && e.touches) ? e.touches[0].pageX : e.clientX;\n    const y = (isTouch && e.touches) ? e.touches[0].pageY : e.clientY;  \n    const w = el.offsetWidth;\n    const h = el.offsetHeight;\n    const waveRadius = Math.sqrt(w * w + h * h);\n    const mx = (attrs.center) ? (rect.left + rect.width / 2) : x;\n    const my = (attrs.center) ? (rect.top + rect.height / 2) : y;\n    const rx = mx - rect.left - waveRadius / 2;\n    const ry = my - rect.top - waveRadius / 2;\n    const startOpacity = attrs.startOpacity !== undefined\n      ? attrs.startOpacity\n      : DEFAULT_START_OPACITY;\n    const opacityDecayVelocity = attrs.opacityDecayVelocity !== undefined\n      ? attrs.opacityDecayVelocity\n      : OPACITY_DECAY_VELOCITY;\n    const endOpacity = attrs.endOpacity || DEFAULT_END_OPACITY;\n    const startScale = attrs.startScale || DEFAULT_START_SCALE;\n    const endScale = attrs.endScale || DEFAULT_END_SCALE;\n    const duration = attrs.duration\n      ? attrs.duration\n      : 1 / opacityDecayVelocity * 0.2;\n    const color = window.getComputedStyle(el).color;\n    \n    const style = waves.style;\n    style.width = style.height = waveRadius + \"px\";\n    style.top = ry + \"px\";\n    style.left = rx + \"px\";\n    style[\"animation-duration\"] =\n      style[\"-webkit-animation-duration\"] =\n      style[\"-moz-animation-duration\"] =\n      style[\"-o-animation-duration\"] = duration + \"s\";\n    style.backgroundColor = color;\n    style.opacity = startOpacity;\n    style.animationName = id;\n    style.animationTimingFunction = attrs.animationTimingFunction || vars.animation_curve_default;\n\n    const rippleStyleSheet = `@keyframes ${id} {\n      0% {\n        transform:scale(${startScale});\n        opacity: ${startOpacity}\n      }\n      100% {\n        transform:scale(${endScale});\n        opacity: ${endOpacity};\n      }\n    }`;\n    addStyleToHead(id, rippleStyleSheet);\n\n    const animationDone = evt => {\n      removeStyleFromHead(id);\n      waves.removeEventListener(ANIMATION_END_EVENT, animationDone, false);\n      if (attrs.persistent) {\n        style.opacity = endOpacity;\n        style.transform = \"scale(\" + endScale + \")\";\n      } else {\n        waves.classList.remove(classes.wavesAnimating);\n        container.removeChild(waves);\n        el.removeChild(container);\n      }\n      resolve(evt);\n    };\n\n    waves.addEventListener(ANIMATION_END_EVENT, animationDone, false);\n    waves.classList.add(classes.wavesAnimating);\n  });\n};\n","\nexport default {\n  component:      \"pe-ripple\",\n\n  // elements\n  mask:           \"pe-ripple__mask\",\n  waves:          \"pe-ripple__waves\",\n\n  // states\n  unconstrained:  \"pe-ripple--unconstrained\",\n  wavesAnimating: \"pe-ripple__waves--animating\",\n};\n","import { pointerEndEvent, filterSupportedAttributes, isServer } from \"polythene-core\";\nimport animation from \"./animation\";\nimport classes from \"polythene-css-classes/ripple\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nexport const getInitialState = () => {\n  return {\n    animations: {},\n    animating: false,\n    cleanUp: undefined\n  };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.unconstrained ? classes.unconstrained : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nconst updateAnimationState = state =>\n  state.animating = Object.keys(state.animations).length > 0;\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  if (isServer) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  const tap = e => {\n    if (attrs.disabled || (!attrs.multi && state.animating)) {\n      return;\n    }\n    if (attrs.start) {\n      attrs.start(e);\n    }\n    const id = `ripple_animation_${new Date().getTime()}`;\n    state.animations[id] = animation({ e, id, el: vnode.dom, attrs, classes })\n      .then(evt => {\n        if (attrs.end) {\n          attrs.end(evt);\n        }\n        delete state.animations[id];\n        updateAnimationState(state);\n      });\n    updateAnimationState(state);\n  };\n  const triggerEl = attrs.target\n    ? attrs.target\n    : vnode.dom && vnode.dom.parentElement;\n\n  if (triggerEl) {\n    pointerEndEvent.forEach(evt =>\n      triggerEl.addEventListener(evt, tap, false));\n  }\n  state.cleanUp = () => {\n    if (triggerEl) {\n      pointerEndEvent.forEach(evt =>\n        triggerEl.removeEventListener(evt, tap, false));\n    }\n  };\n};\n\nexport const onUnMount = ({ state }) =>\n  state.cleanUp && state.cleanUp();\n"],"names":["isClient","document","isServer","evts","r","acc","p","defaultAttrs","isTouch","documentElement","pointerEndEvent","querySelector","classList","add","listeners","emit","eventName","event","forEach","listener","window","addEventListener","e","vars","ANIMATION_END_EVENT","el","createElement","a","undefined","style","getAnimationEndEvent","id","attrs","classes","Promise","resolve","container","setAttribute","mask","appendChild","waves","rect","getBoundingClientRect","x","touches","pageX","clientX","y","pageY","clientY","w","offsetWidth","h","offsetHeight","waveRadius","Math","sqrt","mx","center","left","width","my","top","height","rx","ry","startOpacity","opacityDecayVelocity","endOpacity","startScale","endScale","duration","color","getComputedStyle","backgroundColor","opacity","animationName","animationTimingFunction","stylesheet","documentRef","styleEl","createTextNode","head","addStyleToHead","animationDone","evt","getElementById","parentNode","removeChild","removeStyleFromHead","removeEventListener","persistent","transform","remove","wavesAnimating","component","unconstrained","updateAnimationState","state","animating","Object","keys","animations","length","vnode","element","cleanUp","k","assign","addAttrs","removeAttrs","removeLookup","reduce","supported","concat","filter","item","key","filterSupportedAttributes","className","tone","class","join","dom","tap","disabled","multi","start","Date","getTime","animation","then","end","triggerEl","target","parentElement"],"mappings":"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"}