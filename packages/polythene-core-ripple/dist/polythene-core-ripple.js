!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.polythene={})}(this,function(e){"use strict";const t="undefined"!=typeof document,n=!t,i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},o=(e,t)=>(e[t]=1,e),a=["key","style","href","id","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],s=!n&&"ontouchstart"in document.documentElement,r=s?["click","mouseup"]:["mouseup"];t&&document.querySelector("html").classList.add(s?"pe-touch":"pe-no-touch");const d={},c=(e,t)=>{d[e]&&d[e].forEach(e=>e(t))};t&&(window.addEventListener("resize",e=>c("resize",e)),window.addEventListener("scroll",e=>c("scroll",e)),window.addEventListener("keydown",e=>c("keydown",e)),window.addEventListener(r,e=>c(r,e)));const l="ease-out",m=(()=>{if(t){const e=document.createElement("fakeelement");for(let t in i)if(void 0!==e.style[t])return i[t]}})();var p=({e:e,id:t,el:i,attrs:o,classes:a})=>new Promise(r=>{const d=document.createElement("div");d.setAttribute("class",a.mask),i.appendChild(d);const c=document.createElement("div");c.setAttribute("class",a.waves),d.appendChild(c);const p=i.getBoundingClientRect(),u=s&&e.touches?e.touches[0].pageX:e.clientX,f=s&&e.touches?e.touches[0].pageY:e.clientY,h=i.offsetWidth,v=i.offsetHeight,y=Math.sqrt(h*h+v*v),g=o.center?p.left+p.width/2:u,w=o.center?p.top+p.height/2:f,E=g-p.left-y/2,b=w-p.top-y/2,k=void 0!==o.startOpacity?o.startOpacity:.2,A=void 0!==o.opacityDecayVelocity?o.opacityDecayVelocity:.35,L=o.endOpacity||0,C=o.startScale||.1,_=o.endScale||2,x=o.duration?o.duration:1/A*.2,O=window.getComputedStyle(i).color,j=c.style;j.width=j.height=y+"px",j.top=b+"px",j.left=E+"px",j["animation-duration"]=j["-webkit-animation-duration"]=j["-moz-animation-duration"]=j["-o-animation-duration"]=x+"s",j.backgroundColor=O,j.opacity=k,j.animationName=t,j.animationTimingFunction=o.animationTimingFunction||l,((e,t)=>{if(n)return;const i=window.document,o=i.createElement("style");o.setAttribute("id",e),o.appendChild(i.createTextNode(t)),i.head.appendChild(o)})(t,`@keyframes ${t} {\n      0% {\n        transform:scale(${C});\n        opacity: ${k}\n      }\n      100% {\n        transform:scale(${_});\n        opacity: ${L};\n      }\n    }`);const N=e=>{(e=>{if(n)return;const t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)})(t),c.removeEventListener(m,N,!1),o.persistent?(j.opacity=L,j.transform="scale("+_+")"):(c.classList.remove(a.wavesAnimating),d.removeChild(c),i.removeChild(d)),r(e)};c.addEventListener(m,N,!1),c.classList.add(a.wavesAnimating)}),u={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",unconstrained:"pe-ripple--unconstrained",wavesAnimating:"pe-ripple__waves--animating"};const f=e=>e.animating=Object.keys(e.animations).length>0;var h=Object.freeze({getElement:e=>e.attrs.element||"div",getInitialState:()=>({animations:{},animating:!1,cleanUp:void 0}),createProps:(e,{keys:t})=>{const n=e.attrs;return Object.assign({},((e,{add:t=[],remove:n=[]}={})=>{const i=n.reduce(o,{}),s=a.concat(t).filter(e=>!i[e]).reduce(o,{});return Object.keys(e).reduce((t,n)=>(s[n]&&(t[n]=e[n]),t),{})})(n),{className:[u.component,n.unconstrained?u.unconstrained:null,"dark"===n.tone?"pe-dark-tone":null,"light"===n.tone?"pe-light-tone":null,n.className||n[t.class]].join(" ")})},onMount:e=>{if(!e.dom)return;if(n)return;const t=e.state,i=e.attrs,o=n=>{if(i.disabled||!i.multi&&t.animating)return;i.start&&i.start(n);const o=`ripple_animation_${(new Date).getTime()}`;t.animations[o]=p({e:n,id:o,el:e.dom,attrs:i,classes:u}).then(e=>{i.end&&i.end(e),delete t.animations[o],f(t)}),f(t)},a=i.target?i.target:e.dom&&e.dom.parentElement;a&&r.forEach(e=>a.addEventListener(e,o,!1)),t.cleanUp=(()=>{a&&r.forEach(e=>a.removeEventListener(e,o,!1))})},onUnMount:({state:e})=>e.cleanUp&&e.cleanUp()});e.coreRipple=h,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
