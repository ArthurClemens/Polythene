!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core"),require("polythene-theme")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-theme"],t):t((e=e||self).polythene={},e["polythene-core"],e["polythene-theme"])}(this,function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=t.getAnimationEndEvent(),o=function(e){var i=e.e,o=e.id,r=e.el,c=e.attrs,s=e.classes;return new Promise(function(e){var l=document.createElement("div");l.setAttribute("class",s.mask),r.appendChild(l);var d=document.createElement("div");d.setAttribute("class",s.waves),l.appendChild(d);var u=r.getBoundingClientRect(),p=t.isTouch&&i.touches?i.touches[0].pageX:i.clientX,m=t.isTouch&&i.touches?i.touches[0].pageY:i.clientY,f=r.offsetWidth,v=r.offsetHeight,h=Math.sqrt(f*f+v*v),y=c.center?u.left+u.width/2:p,g=c.center?u.top+u.height/2:m,b=y-u.left-h/2,w=g-u.top-h/2,E=void 0!==c.startOpacity?c.startOpacity:.2,O=void 0!==c.opacityDecayVelocity?c.opacityDecayVelocity:.35,_=c.endOpacity||0,k=c.startScale||.1,j=c.endScale||2,C=c.duration?c.duration:1/O*.2,S=window.getComputedStyle(r).color,A=d.style;A.width=A.height=h+"px",A.top=w+"px",A.left=b+"px",A["animation-duration"]=A["-webkit-animation-duration"]=A["-moz-animation-duration"]=A["-o-animation-duration"]=C+"s",A.backgroundColor=S,A.opacity=E,A.animationName=o,A.animationTimingFunction=c.animationTimingFunction||n.vars.animation_curve_default;var x="@keyframes ".concat(o," {\n      0% {\n        transform:scale(").concat(k,");\n        opacity: ").concat(E,"\n      }\n      100% {\n        transform:scale(").concat(j,");\n        opacity: ").concat(_,";\n      }\n    }");!function(e,n){if(!t.isServer){var i=window.document,a=i.createElement("style");a.setAttribute("id",e),a.appendChild(i.createTextNode(n)),i.head.appendChild(a)}}(o,x);d.addEventListener(a,function n(i){!function(e){if(!t.isServer){var n=document.getElementById(e);n&&n.parentNode&&n.parentNode.removeChild(n)}}(o),d.removeEventListener(a,n,!1),c.persistent?(A.opacity=_,A.transform="scale("+j+")"):(d.classList.remove(s.wavesAnimating),l.removeChild(d),r.removeChild(l)),e(i)},!1),d.classList.add(s.wavesAnimating)})},r={component:"pe-ripple",mask:"pe-ripple__mask",waves:"pe-ripple__waves",unconstrained:"pe-ripple--unconstrained",wavesAnimating:"pe-ripple__waves--animating"},c=function(e){return e.animating=Object.keys(e.animations).length>0},s=Object.freeze({getElement:function(e){return e.attrs.element||"div"},getInitialState:function(){return{animations:{},animating:!1,cleanUp:void 0}},createProps:function(e,n){var a=n.keys,o=e.attrs;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){i(e,t,n[t])})}return e}({},t.filterSupportedAttributes(o),o.testId&&{"data-test-id":o.testId},{className:[r.component,o.unconstrained?r.unconstrained:null,"dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[a.class]].join(" ")})},onMount:function(e){if(e.dom&&!t.isServer){var n=e.state,i=e.attrs,a=function(t){if(!(i.disabled||!i.multi&&n.animating)){i.start&&i.start(t);var a="ripple_animation_".concat((new Date).getTime());n.animations[a]=o({e:t,id:a,el:e.dom,attrs:i,classes:r}).then(function(e){i.end&&i.end(e),delete n.animations[a],c(n)}),c(n)}},s=i.target?i.target:e.dom&&e.dom.parentElement;s&&t.pointerEndEvent.forEach(function(e){return s.addEventListener(e,a,!1)}),n.cleanUp=function(){s&&t.pointerEndEvent.forEach(function(e){return s.removeEventListener(e,a,!1)})}}},onUnMount:function(e){var t=e.state;return t.cleanUp&&t.cleanUp()}});e.coreRipple=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-ripple.js.map
