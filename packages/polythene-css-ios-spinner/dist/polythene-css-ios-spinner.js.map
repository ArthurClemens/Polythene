{"version":3,"file":"polythene-css-ios-spinner.js","sources":["../src/vars.js","../../polythene-css-classes/ios-spinner.js","../src/layout.js","../src/color.js","../src/index.js"],"sourcesContent":["import { vars } from \"polythene-theme\";\n\nconst rgba = (colorStr, opacity = 1) =>\n  `rgba(${colorStr}, ${opacity})`;\n  \nexport default {\n  general_styles:              true,\n\n  rotation_animation_duration: \"1s\",\n\n  color_light:                 rgba(vars.color_light_foreground),\n  color_dark:                  rgba(vars.color_dark_foreground)\n};\n","\nexport default {\n  component: \"pe-ios-spinner\",\n\n  // elements\n  blades:    \"pe-ios-spinner__blades\",\n  blade:     \"pe-ios-spinner__blade\",\n};\n","import { layout as baseSpinnerLayout } from \"polythene-css-base-spinner\";\nimport { styleDurationToMs } from \"polythene-core\";\n\nconst sel = (selector, o) => ({\n  [selector]: o\n});\n\nconst bladeWidth  = 9; // percent\nconst bladeHeight = 28; // percent\n\nconst kfFade = () => ({\n  \" 0%\": {\n    opacity: .640\n  },\n  \" 100%\": {\n    opacity: .035\n  }\n});\n\nconst positionBlades = vars => \n  [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11].map(i => {\n    // reverse to improve performance on iOS\n    const delay = -1 / 12 * i * styleDurationToMs(vars.rotation_animation_duration);\n    const rotation = 360 - (360 / 12 * i);\n    return {\n      [\" .pe-ios-spinner__blade:nth-of-type(\" + (i + 1) + \")\"]: {\n        transform: \"rotate(\" + rotation + \"deg) translate3d(0,-140%,0)\",\n        animation: \"iosSpinnerFade \" + vars.rotation_animation_duration + \" \" + delay + \"ms linear infinite\"\n      }\n    };\n  });\n\nconst varFns = {\n  general_styles: selector => [\n    sel(selector, {\n      \" .pe-ios-spinner__blades\": {\n        transform: \"translate3d(0,0,0)\",\n        position: \"relative\",\n        width: \"100%\",\n        height: \"100%\"\n      },\n\n      \" .pe-ios-spinner__blade\": {\n        position: \"absolute\",\n        width: bladeWidth + \"%\",\n        height: bladeHeight + \"%\",\n        left: ((100 - bladeWidth) / 2) + \"%\",\n        top: ((100 - bladeHeight) / 2) + \"%\",\n        opacity: 0,\n        borderRadius: \"50px\"\n      },\n\n      \"@keyframes iosSpinnerFade\": kfFade()\n    })\n  ],\n  rotation_animation_duration: (selector, vars) => [\n    sel(selector, {\n      \" .pe-ios-spinner__blades\": [\n        positionBlades(vars),\n      ],\n    })\n  ],\n};\n\nexport default (selector, componentVars, customVars) => {\n  const allVars = {...componentVars, ...customVars};\n  const currentVars = customVars\n    ? customVars\n    : allVars;\n  return baseSpinnerLayout(selector, componentVars, customVars)\n    .concat(Object.keys(currentVars)\n      .map(v => (\n        varFns[v] !== undefined \n          ? varFns[v](selector, allVars)\n          : null\n      ))\n      .filter(s => s)\n    );\n};\n","import { color as baseSpinnerColor } from \"polythene-css-base-spinner\";\n\nconst sel = (selector, o) => ({\n  [selector]: o\n});\n\nconst generalFns = ({\n  general_styles: selector => [\n    sel(selector, {\n      \" .pe-ios-spinner__blade\": {\n        background: \"currentcolor\"\n      }\n    })\n  ],\n});\n\nconst tintFns = tint => ({\n  [\"color_\" + tint]: (selector, vars) => [\n    sel(selector, {\n      color: vars[\"color_\" + tint],\n    })\n  ]\n});\n\nconst lightTintFns = Object.assign({}, generalFns, tintFns(\"light\"));\nconst darkTintFns = Object.assign({}, generalFns, tintFns(\"dark\"));\n\nconst createStyle = (selector, componentVars, customVars, tint) => {\n  const allVars = {...componentVars, ...customVars};\n  const currentVars = customVars\n    ? customVars\n    : allVars;\n  return Object.keys(currentVars).map(v => {\n    const varFns = tint === \"light\"\n      ? lightTintFns\n      : darkTintFns;\n    return varFns[v] !== undefined \n      ? varFns[v](selector, allVars)\n      : null;\n  }).filter(s => s);\n};\n\nconst style = (scopes, selector, componentVars, customVars, tint) => {\n  const selectors = scopes.map(s => s + selector).join(\",\");\n  return createStyle(selectors, componentVars, customVars, tint);\n};\n\nexport default (selector, componentVars, customVars) => \n  baseSpinnerColor(selector, componentVars, customVars)\n    .concat([\n      style([\".pe-dark-tone\", \".pe-dark-tone \"], selector, componentVars, customVars, \"dark\"), // has/inside dark tone\n      style([\"\", \".pe-light-tone\", \".pe-light-tone \"], selector, componentVars, customVars, \"light\"), // normal, has/inside light tone\n    ]);\n","import { styler } from \"polythene-core-css\";\nimport vars from \"./vars\";\nimport classes from \"polythene-css-classes/ios-spinner\";\nimport layout from \"./layout\";\nimport color from \"./color\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nconst addStyle = (customSelector, customVars) => \n  styler.generateCustomStyles([customSelector, selector], vars, customVars, fns);\n\nconst getStyle = (customSelector, customVars) => \n  customSelector\n    ? styler.createCustomStyleSheets([customSelector, selector], vars, customVars, fns)\n    : styler.createStyleSheets([selector], vars, fns);\n    \nstyler.generateStyles([selector], vars, fns);\n\nexport { addStyle, getStyle, vars };\n"],"names":["rgba","colorStr","opacity","general_styles","rotation_animation_duration","color_light","vars","color_light_foreground","color_dark","color_dark_foreground","component","blades","blade","sel","selector","o","bladeWidth","bladeHeight","kfFade","positionBlades","map","delay","i","styleDurationToMs","rotation","transform","animation","varFns","position","width","height","left","top","borderRadius","componentVars","customVars","allVars","currentVars","baseSpinnerLayout","concat","Object","keys","v","undefined","filter","s","generalFns","background","tintFns","tint","color","lightTintFns","_extends","darkTintFns","createStyle","style","scopes","selectors","join","baseSpinnerColor","fns","layout","classes","addStyle","customSelector","styler","generateCustomStyles","getStyle","createCustomStyleSheets","createStyleSheets","generateStyles"],"mappings":"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"}