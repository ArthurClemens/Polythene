!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],t):t(e.polythene={},e.m)}(this,function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const n={autocomplete:"autocomplete",autofocus:"autofocus",class:"class",className:"class",enctype:"enctype",formaction:"formaction",frameborder:"frameborder",maxlength:"maxlength",minlength:"minlength",onblur:"onblur",onchange:"onchange",onclick:"onclick",onfocus:"onfocus",oninput:"oninput",onkeydown:"onkeydown",onkeyup:"onkeyup",onmousedown:"onmousedown",onmouseout:"onmouseout",onmouseover:"onmouseover",onmouseup:"onmouseup",onscroll:"onscroll",onsubmit:"onsubmit",ontouchend:"ontouchend",ontouchmove:"ontouchmove",ontouchstart:"ontouchstart",readonly:"readonly",tabindex:"tabindex"},o=t;o.displayName="mithril";var r,a=(function(e){!function(){var t=0,n={};function o(){function e(){return arguments.length>0&&arguments[0]!==n&&r(e,arguments[0]),e._state.value}return function(e){e.constructor=o,e._state={id:t++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},e.map=e["fantasy-land/map"]=u,e["fantasy-land/ap"]=c,e["fantasy-land/of"]=o,e.valueOf=l,e.toJSON=p,e.toString=l,Object.defineProperties(e,{end:{get:function(){if(!e._state.endStream){var t=o();t.map(function(n){return!0===n&&(i(e),t._state.unregister=function(){i(t)}),n}),e._state.endStream=t}return e._state.endStream}}})}(e),arguments.length>0&&arguments[0]!==n&&r(e,arguments[0]),e}function r(e,t){for(var n in a(e,t),e._state.deps)s(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),function(e){for(var t in e._state.changed=!1,e._state.deps)e._state.deps[t]._state.changed=!1}(e)}function a(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function s(e,t){var o=e._state.parents;if(o.length>0&&o.every(v)&&(t||o.some(h))){var r=e._state.derive();if(r===n)return!1;a(e,r)}}function d(e,t){if(!t.every(m))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return function(e,t,n){var o=e._state;return o.derive=n,o.parents=t.filter(f),function e(t,n){for(var o=0;o<n.length;o++)n[o]._state.deps[t._state.id]=t,e(t,n[o]._state.parents)}(e,o.parents),s(e,!0),e}(o(),t,function(){return e.apply(this,t.concat([t.filter(h)]))})}function i(e){for(var t=0;t<e._state.parents.length;t++){delete e._state.parents[t]._state.deps[e._state.id]}for(var n in e._state.deps){var o=e._state.deps[n],r=o._state.parents.indexOf(e);r>-1&&o._state.parents.splice(r,1)}e._state.state=2,e._state.deps={}}function u(e){return d(function(t){return e(t())},[this])}function c(e){return d(function(e,t){return e()(t())},[e,this])}function l(){return this._state.value}function p(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function m(e){return e._state}function v(e){return 1===e._state.state}function h(e){return e._state.changed}function f(e){return 2!==e._state.state}o["fantasy-land/of"]=o,o.merge=function(e){return d(function(){return e.map(function(e){return e()})},e)},o.combine=d,o.scan=function(e,t,n){var o=d(function(n){return t=e(t,n._state.value)},[n]);return 0===o._state.state&&o(t),o},o.scanMerge=function(e,t){var n=e.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return d(function(){var o=arguments[arguments.length-1];return n.forEach(function(n,r){o.indexOf(n)>-1&&(t=e[r][1](t,n._state.value))}),t},n)},o.HALT=n,e.exports=o}()}(r={exports:{}},r.exports),r.exports);const s=({createContent:e=(()=>{}),createProps:t=(()=>{}),component:r=null,getElement:s=(()=>"div"),getInitialState:d=(()=>({})),onMount:i=(()=>{}),onUnMount:u=(()=>{}),onUpdate:c=(()=>{}),view:l=null})=>{const p=a=>o(r||s(a),t(a,{renderer:o,requiresKeys:!1,keys:n}),[a.attrs.before,e(a,{renderer:o,requiresKeys:!1,keys:n}),a.attrs.after]);return{view:l?e=>l(e,{render:p,renderer:o}):e=>p(e),oninit:e=>{const t=Object.assign({},e),r=d(t,a,{keys:n});Object.assign(e.state,r),e._mounted=!1,e.state.redrawOnUpdate&&e.state.redrawOnUpdate.map(()=>e._mounted&&setTimeout(o.redraw(!0)))},oncreate:e=>{e._mounted=!0,i(e,{keys:n})},onremove:u,onupdate:c}},d="undefined"!=typeof document,i=!d,u=(e,t)=>(e[t]=1,e),c=["key","style","href","id","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],l=!i&&"ontouchstart"in document.documentElement,p=l?["click","mouseup"]:["mouseup"],m=l?["touchstart","mousedown"]:["mousedown"],v=l?["touchend","mouseup"]:["mouseup"];d&&document.querySelector("html").classList.add(l?"pe-touch":"pe-no-touch");const h={},f=(e,t)=>{h[e]&&h[e].forEach(e=>e(t))};d&&(window.addEventListener("resize",e=>f("resize",e)),window.addEventListener("scroll",e=>f("scroll",e)),window.addEventListener("keydown",e=>f("keydown",e)),window.addEventListener(p,e=>f(p,e)));const w=(e,{option:t,newOption:n,newComponent:o})=>(t&&console.warn(`${e}: option '${t}' is deprecated and will be removed in later versions. Use '${n}' instead.`),o&&!n&&console.warn(`${e}: this component is deprecated and will be removed in later versions. Use '${o}' instead.`),o&&n&&console.warn(`${e}: this component is deprecated and will be removed in later versions. Use '${o}' with option '${n}' instead.`));var b={component:"pe-text-button",super:"pe-button",row:"pe-button-row",content:"pe-button__content",label:"pe-button__label",textLabel:"pe-button__text-label",wash:"pe-button__wash",dropdown:"pe-button__dropdown",border:"pe-button--border",contained:"pe-button--contained",disabled:"pe-button--disabled",dropdownClosed:"pe-button--dropdown-closed",dropdownOpen:"pe-button--dropdown-open",extraWide:"pe-button--extra-wide",hasDropdown:"pe-button--dropdown",highLabel:"pe-button--high-label",inactive:"pe-button--inactive",raised:"pe-button--raised",selected:"pe-button--selected",separatorAtStart:"pe-button--separator-start"};var _=Object.freeze({getElement:e=>e.attrs.element||"a",getInitialState:(e,t)=>{const n=t(null),o=t(!1),r=t(!1);return{dom:n,focus:o,inactive:r,mouseover:t(!1),redrawOnUpdate:t.merge([n,o,r])}},onMount:e=>{if(!e.dom)return;const t=e.state,n=e.attrs;if(void 0!==n.borders&&w("Button",{option:"borders",newOption:"border"}),t.dom(e.dom),d){const o=()=>t.focus(!t.mouseover()),r=()=>t.focus(!1),a=()=>t.mouseover(!0),s=()=>t.mouseover(!1),d=()=>(t.inactive(!0),setTimeout(()=>t.inactive(!1),1e3*n.inactivate));e.dom.addEventListener("focus",o,!1),e.dom.addEventListener("blur",r,!1),e.dom.addEventListener("mouseover",a,!1),e.dom.addEventListener("mouseout",s,!1),e.dom.addEventListener("click",d,!1),t.removeEventListeners=(()=>(e.dom.removeEventListener("focus",o,!1),e.dom.removeEventListener("blur",r,!1),e.dom.removeEventListener("mouseover",r,!1),e.dom.removeEventListener("mouseout",s,!1),e.dom.removeEventListener("click",d,!1)))}},onUnMount:e=>e.state.removeEventListeners&&e.state.removeEventListeners(),createProps:(e,{keys:t})=>{const n=e.state,o=e.attrs,r=o.disabled,a=o.inactive||n.inactive(),s=o.events&&o.events[t.onclick],d=o.events&&o.events[t.onkeyup]||s;return Object.assign({},((e,{add:t=[],remove:n=[]}={})=>{const o=n.reduce(u,{}),r=c.concat(t).filter(e=>!o[e]).reduce(u,{});return Object.keys(e).reduce((t,n)=>(r[n]&&(t[n]=e[n]),t),{})})(o,{add:[t.formaction,"type"],remove:["style"]}),{className:[b.super,o.parentClassName||b.component,o.contained?b.contained:null,o.raised?b.contained:null,o.raised?b.raised:null,o.selected?b.selected:null,o.highLabel?b.highLabel:null,o.extraWide?b.extraWide:null,r?b.disabled:null,a?b.inactive:null,o.separatorAtStart?b.separatorAtStart:null,o.border||o.borders?b.border:null,o.dropdown?b.hasDropdown:null,o.dropdown?o.dropdown.open?b.dropdownOpen:b.dropdownClosed:null,"dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[t.class]].join(" ")},o.events,a?null:{[t.tabindex]:r||a?-1:o[t.tabindex]||0,[t.onclick]:s,[t.onkeyup]:e=>{13===e.keyCode&&n.focus()&&(n.focus(!1),d&&d(e))}},o.url,r?{disabled:!0}:null)},createContent:(e,{renderer:t,keys:n,Ripple:o,Icon:r,Shadow:a})=>{const s=e.state,d=e.attrs,i=void 0!==d.ink&&!1===d.ink,u=d.disabled,c=d.children||e.children,l=d.content?d.content:void 0!==d.label?"object"==typeof d.label?d.label:t("div",{className:b.label},t("div",{className:b.textLabel,style:d.textStyle},d.label)):c||null,p=u||void 0!==d.wash&&!d.wash;return t("div",{[n.class]:b.content,style:d.style},[t(a,{key:"shadow",shadowDepth:void 0!==d.shadowDepth?d.shadowDepth:0,animated:!0}),u||i||!o||"react"===t.displayName&&!s.dom()?null:t(o,Object.assign({},{key:"ripple",target:s.dom()},d.ripple)),p?null:t("div",{key:"wash",className:b.wash}),l,d.dropdown?t(r,{className:b.dropdown,key:"dropdown",svg:{content:t.trust('<svg xmlns="http://www.w3.org/2000/svg" id="dd-down-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>')}}):null])}});let y,g=()=>{},E=[];const k=(e,t)=>{"down"===e&&E.push(Object.assign({},t)),!1!==t.attrs.animateOnTap&&((e,t)=>{const n=t.state.shadowDepthBase,o=t.attrs.increase||1,r=t.state.shadowDepth(),a="down"===e&&n<5?Math.min(n+o,5):"up"===e?Math.max(r-o,n):r;a!==r&&t.state.shadowDepth(a)})(e,t)};var O=Object.freeze({getInitialState:(e,t)=>{const n=e.attrs,o=void 0!==n.shadowDepth?n.shadowDepth:void 0!==n.z?n.z:1,r=t(o);return{shadowDepthBase:o,shadowDepth:r,tapEventsInited:t(!1),redrawOnUpdate:t.merge([r])}},onMount:e=>{if(!e.dom)return;const t=e.state;void 0!==e.attrs.z&&w("RaisedButton",{option:"z",newOption:"shadowDepth"}),t.tapEventsInited()||((e=>{i||(y=(()=>k("down",e)),g=(()=>{E.map(e=>k("up",e)),E=[]}),m.forEach(t=>e.dom.addEventListener(t,y)),v.forEach(e=>document.addEventListener(e,g)))})(e),t.tapEventsInited(!0))},onUnMount:e=>{e.state.tapEventsInited()&&(e=>{m.forEach(t=>e.dom.removeEventListener(t,y)),v.forEach(e=>document.removeEventListener(e,g))})(e)},createProps:e=>{const t=e.attrs,n=e.state,o=t.children||e.children||[];return Object.assign({},{raised:!0,animateOnTap:!1,wash:void 0!==t.wash&&t.wash,children:o},t,{shadowDepth:t.disabled?0:n.shadowDepth()})},createContent:e=>e.children});const x=s(Object.assign({},_));x.displayName="TextButton";const L=s(Object.assign({},O));L.displayName="RaisedButton";const S=(({createContent:e=(()=>{}),createProps:t=(()=>{}),getElement:r=(()=>"div"),component:a=null,view:s=null,onMount:d=(()=>{}),onUnMount:i=(()=>{})})=>{const u=s=>o(a||r(s),t(s,{renderer:o,requiresKeys:!1,keys:n}),[s.attrs.before,e(s,{renderer:o,requiresKeys:!1,keys:n}),s.attrs.after]);return{view:s?e=>s(e,{render:u,renderer:o}):e=>u(e),oncreate:e=>d(e,{keys:n}),onremove:i}})({view:e=>o(e.attrs.raised?L:x,e.attrs,e.children)});S.displayName="Button",e.Button=S,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-mithril-button.js.map
