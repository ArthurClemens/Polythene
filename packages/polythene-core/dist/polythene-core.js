!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).polythene={})}(this,function(e){"use strict";var n="undefined"!=typeof document,t=!n,i={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};function o(){return(o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}).apply(this,arguments)}var r="hidden",a="visible",s="exposing",d="hiding",u={getInitialState:function(e,n){var t=e.attrs;if(!t.didHide)return{};var i=t.permanent||t.show,o=n(t.permanent?a:i?a:r);return{mode:o,redrawOnUpdate:n.merge([o])}},onUpdate:function(e){var n=e.state,t=e.attrs;if(t.didHide){var i=n.mode();t.permanent?i===a&&t.show?n.mode(s):i!==s||t.show||n.mode(d):i===r&&t.show?n.mode(a):i!==a||t.show||n.mode(d)}},view:function(e,n){var t=e.state,i=e.attrs,s=n.renderer,u=s("span",{className:i.placeholderClassName});if(!i.didHide)return i.permanent||i.inactive||i.show?s(i.instance,i):u;var l=t.mode();return l!==r?s(i.instance,o({},i,{didHide:function(e){return i.didHide(e),t.mode(i.permanent?a:r)}},l===d&&{show:!0,hide:!0})):u},displayName:"Conditional"},l=function(e,n){return e[n]=1,e},c=["key","style","href","id","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],m=function(e){return"function"==typeof e?e():e},f=!t&&"ontouchstart"in document.documentElement,h=f?["touchstart","click"]:["click"],p=f?["click","mouseup"]:["mouseup"],v=f?["touchstart","mousedown"]:["mousedown"],w=f?["touchmove","mousemove"]:["mousemove"],g=f?["touchend","mouseup"]:["mouseup"];n&&document.querySelector("html").classList.add(f?"pe-touch":"pe-no-touch");var y={},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n?window:{},o=!1;return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];o||(e.apply(i,r),o=!0,setTimeout(function(){return o=!1},t))}},C=function(e,n){y[e]&&y[e].forEach(function(e){return e(n)})};n&&(window.addEventListener("resize",function(e){return C("resize",e)}),window.addEventListener("scroll",function(e){return C("scroll",e)}),window.addEventListener("keydown",function(e){return C("keydown",e)}),window.addEventListener(p,function(e){return C(p,e)}));var b=function(e){var t,i=e.options,r=e.renderer,a=[],s=function(e){t||console.error("Cannot set state. Did you set a root element like Dialog to show instances?"),t(e.id),C(i.name,e)},d=function(e){var n=u(e);return a.indexOf(n)},u=function(e){for(var n=0;n<a.length;n++)if(a[n].instanceId===e)return a[n]},l=function(){a.length&&(a[0].show=!0),s({id:a.length?a[0].instanceId:null,name:"next"})},c=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultId;i.queue?(a.shift(),l()):-1!==(n=d(e=t))&&(a.splice(n,1),s({id:e,name:"removeItem"}))},f=function(e,n){var t=u(n);t&&(t.pause=e,t.unpause=!e,s({id:n,name:e?"pause":"unpause"}))},h=function(){a.length=0,s({id:null,name:"removeAll"})};return{clear:h,count:function(){return a.length},getInitialState:function(e,n){return{current:t=n(null),redrawOnUpdate:n.merge([t])}},hide:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id||i.defaultId,n=i.queue&&a.length?a[0]:u(e);return n&&(n.hide=!0),s({id:e,name:"hide"}),n?n.hidePromise:Promise.resolve(e)},pause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultId;return f(!0,e)},remove:c,show:function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=r.id||i.defaultId,h=function(e,n,t){var r,a,d=m(e),u=new Promise(function(e){return r=e}),l=new Promise(function(e){return a=e});return o({},i,{instanceId:n,spawn:t,attrs:e,show:!i.queue,showPromise:u,hidePromise:l,didShow:function(){return d.didShow&&d.didShow(n),s({id:n,name:"didShow"}),r(n)},didHide:function(){return d.didHide&&d.didHide(n),s({id:n,name:"didHide"}),c(n),a(n)}})}(t,f,r.spawn||i.defaultId);s({id:f,name:"show"}),i.queue?(a.push(h),1===a.length&&l()):u(f)?(e=h,-1!==(n=d(f))&&(a[n]=e)):a.push(h);return h.showPromise},unpause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultId;return f(!1,e)},view:function(e){var t=e.attrs,s=t.spawn||i.defaultId,d=a.filter(function(e){return e.show&&e.spawn===s});return i.htmlShowClass&&n&&document.documentElement&&document.documentElement.classList[d.length?"add":"remove"](i.htmlShowClass),d.length?r(i.holderSelector,{className:"container"===t.position?"pe-multiple--container":"pe-multiple--screen"},d.map(function(e){return r(i.instance,o({},{fromMultipleClassName:i.className,fromMultipleClear:h,fromMultipleDidHide:e.didHide,fromMultipleDidShow:e.didShow,hide:e.hide,holderSelector:i.holderSelector,instanceId:e.instanceId,key:e.key,pause:e.pause,show:e.show,spawnId:s,transitions:i.transitions,unpause:e.unpause},m(e.attrs)))})):r(i.placeholder)}}};b.displayName="Multi";var D=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=e.equals,a=e.contains,s=t?n.querySelector(t):n;return!!s&&(void 0!==r?r===document.defaultView.getComputedStyle(s,i).getPropertyValue(o):void 0!==a?-1!==document.defaultView.getComputedStyle(s,i).getPropertyValue(o).indexOf(a):void 0)},E=function(e){var n=parseFloat(e)*(-1===e.indexOf("ms")?1e3:1);return isNaN(n)?0:n},I=function(e){return H(e,"show")},M=function(e){return H(e,"hide")},H=function(e,t){var i=e.el;return i?new Promise(function(o){var r=i.style,a=n?window.getComputedStyle(i):{},s=e.hasDuration?1e3*e.duration:E(a.transitionDuration),d=e.hasDelay?1e3*e.delay:E(a.transitionDelay),u=e.timingFunction||a.transitionTimingFunction;e.transitionClass&&(e.transitionClassElement||i).classList.add(e.transitionClass);var l=function(){r.transitionDuration="0ms",r.transitionDelay="0ms",e.before()},c=e.before&&"show"===t?l:e.before&&"hide"===t?l:null,m=e.after?function(){return e.after()}:null,f=function(){!function(){r.transitionDuration=s+"ms",r.transitionDelay=d+"ms",u&&(r.transitionTimingFunction=u),e.showClass&&(e.showClassElement||i).classList["show"===t?"add":"remove"](e.showClass);e.transition&&e.transition()}(),setTimeout(function(){(m&&m(),e.transitionClass)&&((e.transitionClassElement||i).classList.remove(e.transitionClass),i.offsetHeight);o()},s+d)},h=function(){0===s?f():setTimeout(f,0)};c?(c(),i.offsetHeight,setTimeout(function(){h()},0)):h()}):Promise.resolve()};e.getAnimationEndEvent=function(){if(n){var e=document.createElement("fakeelement");for(var t in i)if(void 0!==e.style[t])return i[t]}},e.Conditional=u,e.filterSupportedAttributes=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.add,i=void 0===t?[]:t,o=n.remove,r=(void 0===o?[]:o).reduce(l,{}),a=c.concat(i).filter(function(e){return!r[e]}).reduce(l,{});return Object.keys(e).reduce(function(n,t){return a[t]&&(n[t]=e[t]),n},{})},e.unpackAttrs=m,e.classForSize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return function(e){return{small:e.small,regular:e.regular,medium:e.medium,large:e.large,fab:e.fab}}(e)[n]},e.isClient=n,e.isServer=t,e.isTouch=f,e.pointerStartEvent=h,e.pointerEndEvent=p,e.pointerStartMoveEvent=v,e.pointerMoveEvent=w,e.pointerEndMoveEvent=g,e.Multi=b,e.show=I,e.hide=M,e.transitionComponent=function(e){var n=e.isShow,t=e.state,i=e.attrs,r=e.domElements,a=e.beforeTransition,s=e.afterTransition,d=e.showClass,u=e.transitionClass;if(t.transitioning())return Promise.resolve();t.transitioning(!0),t.visible(!!n),a&&a();var l=i[n?"showDuration":"hideDuration"],c=i[n?"showDelay":"hideDelay"],m=i[n?"showTimingFunction":"hideTimingFunction"],f=i.transitions,h=n?I:M,p=o({},i,r,{showClass:d,transitionClass:u,duration:l,delay:c,timingFunction:m}),v=o({},p,f&&f[n?"show":"hide"](p));return h(o({},v,{duration:void 0!==v.duration?v.duration:.24,hasDuration:void 0!==v.duration,delay:void 0!==v.delay?v.delay:0,hasDelay:void 0!==v.delay})).then(function(){var e=t.instanceId;i[n?"fromMultipleDidShow":"fromMultipleDidHide"]?i[n?"fromMultipleDidShow":"fromMultipleDidHide"](e):i[n?"didShow":"didHide"]&&i[n?"didShow":"didHide"](e),s&&s(),t.transitioning(!1)})},e.throttle=S,e.subscribe=function(e,n,t){y[e]=y[e]||[],y[e].push(t?S(n,t):n)},e.unsubscribe=function(e,n){if(y[e]){var t=y[e].indexOf(n);t>-1&&y[e].splice(t,1)}},e.emit=C,e.getStyle=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=t?n.querySelector(t):n;if(r)return r.currentStyle?r.currentStyle[o]:window.getComputedStyle?document.defaultView.getComputedStyle(r,i).getPropertyValue(o):null},e.stylePropCompare=D,e.isRTL=function(e){var n=e.element,t=void 0===n?document:n,i=e.selector;return D({element:t,selector:i,prop:"direction",equals:"rtl"})},e.styleDurationToMs=E,e.deprecation=function(e,n){var t=n.option,i=n.newOption,o=n.newComponent,r=n.since,a=r?"Changed in version ".concat(r,"."):"";return t&&console.warn("".concat(e,": option '").concat(t,"' is deprecated and will be removed in later versions. Use '").concat(i,"' instead. ").concat(a)),o&&!i&&console.warn("".concat(a).concat(e,": this component is deprecated and will be removed in later versions. Use '").concat(o,"' instead. ").concat(a)),o&&i&&console.warn("".concat(a).concat(e,": this component is deprecated and will be removed in later versions. Use '").concat(o,"' with option '").concat(i,"' instead. ").concat(a))},e.iconDropdownUp='<svg xmlns="http://www.w3.org/2000/svg" id="dd-up-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>',e.iconDropdownDown='<svg xmlns="http://www.w3.org/2000/svg" id="dd-down-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core.js.map
