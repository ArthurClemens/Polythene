!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).polythene={})}(this,(function(e){"use strict";function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function i(e){for(var i=1;i<arguments.length;i++){var o=null!=arguments[i]?arguments[i]:{};i%2?t(o,!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(o).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(o,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,o=function(e,n){if(null==e)return{};var t,i,o={},r=Object.keys(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)t=r[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],i=!0,o=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var a="hidden",s="visible",u="exposing",d="hiding",c=function(e,n){return e[n]=1,e},l=["key","style","href","id","data-index","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],f=function(e){return"function"==typeof e?e():e},h=function(e){return{small:e.small,regular:e.regular,medium:e.medium,large:e.large,fab:e.fab}},m="undefined"!=typeof document,p=!m,v={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},w=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=e.equals,a=e.contains,s=t?n.querySelector(t):n;if(!s)return!1;var u=document.defaultView;if(u){if(void 0!==r)return r===u.getComputedStyle(s,i).getPropertyValue(o);if(void 0!==a)return-1!==u.getComputedStyle(s,i).getPropertyValue(o).indexOf(a)}return!1},y=function(e){var n=parseFloat(e)*(-1===e.indexOf("ms")?1e3:1);return isNaN(n)?0:n},g=!p&&"ontouchstart"in document.documentElement,b=g?["touchstart","click"]:["click"],S=g?["click","mouseup"]:["mouseup"],D=g?["touchstart","mousedown"]:["mousedown"],E=g?["touchmove","mousemove"]:["mousemove"],O=g?["touchend","mouseup"]:["mouseup"];if(m){var T=document.querySelector("html");T&&T.classList.add(g?"pe-touch":"pe-no-touch")}var P={},C=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m?window:{},i=!1;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];var s=function(){return e.apply(t,r)};i||(s(),i=!0,setTimeout((function(){return i=!1}),n))}},x=function(e,n,t){P[e]=P[e]||[],P[e].push(t?C(n,t):n)},I=function(e,n){if(P[e]){var t=P[e].indexOf(n);t>-1&&P[e].splice(t,1)}},j=function(e,n){P[e]&&P[e].forEach((function(e){return e(n)}))};m&&(window.addEventListener("resize",(function(e){return j("resize",e)})),window.addEventListener("scroll",(function(e){return j("scroll",e)})),window.addEventListener("keydown",(function(e){return j("keydown",e)})),S.forEach((function(e){return window.addEventListener(e,(function(n){return j(e,n)}))})));var k=function(e){var n=e.options,t=[],a=function(e){j(n.name,e)},s=function(e){var n=c(e);return t.indexOf(n)},u=function(e){var n=s(e);-1!==n&&(t.splice(n,1),a({id:e,name:"removeItem"}))},d=function(e,n){var i=s(e);-1!==i&&(t[i]=n)},c=function(e){for(var n=0;n<t.length;n++)if(t[n].instanceId===e)return t[n]},l=function(){t.length&&(t[0].show=!0),a({id:t.length?t[0].instanceId:null,name:"next"})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;n.queue?(t.shift(),l()):u(e)},p=function(e,n){var t=c(n);t&&(t.pause=e,t.unpause=!e,a({id:n,name:e?"pause":"unpause"}))},v=function(e,t,o){var r,s,u=f(e),d=new Promise((function(e){return r=e})),c=new Promise((function(e){return s=e}));return i({},n,{instanceId:t,spawn:o,props:e,show:!n.queue,showPromise:d,hidePromise:c,didShow:function(){return u.didShow&&u.didShow(t),a({id:t,name:"didShow"}),r(t)},didHide:function(){return u.didHide&&u.didHide(t),a({id:t,name:"didHide"}),h(t),s(t)}})},w=function(){t.length=0,a({id:null,name:"removeAll"})};return{clear:w,count:function(){return t.length},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.id||n.defaultId,o=n.queue&&t.length?t[0]:c(i);return o&&(o.hide=!0),a({id:i,name:"hide"}),o?o.hidePromise:Promise.resolve(i)},pause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;return p(!0,e)},remove:h,show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.id||n.defaultId,r=i.spawn||n.defaultId,s=v(e,o,r);if(a({id:o,name:"show"}),n.queue)t.push(s),1===t.length&&l();else{var u=c(o);u?d(o,s):t.push(s)}return s.showPromise},unpause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.defaultId;return p(!1,e)},render:function(e){var a=e.h,s=e.useState,u=e.useEffect,d=o(e,["h","useState","useEffect"]),c=r(s(),2)[1];u((function(){return x(n.name,c),function(){I(n.name,c)}}),[]);var l=d.spawn||n.defaultId,h=t.filter((function(e){return e.show&&e.spawn===l}));return n.htmlShowClass&&m&&document.documentElement&&document.documentElement.classList[h.length?"add":"remove"](n.htmlShowClass),h.length?a(n.holderSelector,{className:"container"===d.position?"pe-multiple--container":"pe-multiple--screen"},h.map((function(e){return a(n.instance,i({},f(d),{fromMultipleClear:w,spawnId:l,fromMultipleClassName:n.className,holderSelector:n.holderSelector,transitions:n.transitions,fromMultipleDidHide:e.didHide,fromMultipleDidShow:e.didShow,hide:e.hide,instanceId:e.instanceId,key:void 0!==e.key?e.key:e.keyId,pause:e.pause,show:e.show,unpause:e.unpause},f(e.props)))}))):a(n.placeholder)}}};k.displayName="Multi";var M="show",H="hide",F="show-done",A="hide-done",L=function(e){return V(e,"show")},q=function(e){return V(e,"hide")},V=function(e,n){var t=e.el;return t?new Promise((function(i){var o=t.style,r=m?window.getComputedStyle(t):{},a=e.hasDuration&&void 0!==e.duration?1e3*e.duration:y(r.transitionDuration),s=e.hasDelay&&void 0!==e.delay?1e3*e.delay:y(r.transitionDelay),u=e.timingFunction||r.transitionTimingFunction;e.transitionClass&&t.classList.add(e.transitionClass);var d=function(){o.transitionDuration="0ms",o.transitionDelay="0ms",e.before&&"function"==typeof e.before&&e.before()},c=e.before&&"show"===n?d:e.before&&"hide"===n?d:null,l=function(){e.after&&"function"==typeof e.after&&e.after()},f=function(){!function(){(o.transitionDuration=a+"ms",o.transitionDelay=s+"ms",u&&(o.transitionTimingFunction=u),e.showClass)&&(e.showClassElement||t).classList["show"===n?"add":"remove"](e.showClass);e.transition&&e.transition()}(),setTimeout((function(){l&&l(),e.transitionClass&&(t.classList.remove(e.transitionClass),t.offsetHeight),i()}),a+s)},h=function(){0===a?f():setTimeout(f,0)};c?(c(),t.offsetHeight,setTimeout((function(){h()}),0)):h()})):Promise.resolve()};e.Multi=k,e._Conditional=function(e){var n=e.h,t=e.useState,c=e.useEffect,l=o(e,["h","useState","useEffect"]),f=r(t(l.permanent?s:l.permanent||l.show?s:a),2),h=f[0],m=f[1];c((function(){var e=h;l.permanent?h===s&&l.show?e=u:h!==u||l.show||(e=d):h===a&&l.show?e=s:h!==s||l.show||(e=d),e!==h&&m(e)}),[l]);var p=n("span",{className:l.placeholderClassName});return l.didHide?h!==a?n(l.instance,i({},l,{didHide:function(e){return l.didHide(e),m(l.permanent?s:a)}},h===d?{show:!0,hide:!0}:void 0)):p:l.permanent||l.inactive||l.show?n(l.instance,l):p},e.classForSize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return h(e)[n]},e.createDialogicStyles=function(e){var n=e.showDelay,t=e.showDuration,r=e.showTimingFunction,a=e.hideDelay,s=e.hideDuration,u=e.hideTimingFunction,d=e.styles,c=o(e,["showDelay","showDuration","showTimingFunction","hideDelay","hideDuration","hideTimingFunction","styles"]);return{styles:void 0===d?void 0!==n||void 0!==t||r||void 0!==a||void 0!==s||u?{showStart:i({},n?{transitionDelay:"".concat(1e3*n,"ms")}:void 0,{},t?{transitionDuration:"".concat(1e3*t,"ms")}:void 0,{},r?{transitionTimingFunction:"".concat(r)}:void 0),hideStart:i({},a?{transitionDelay:"".concat(1e3*a,"ms")}:void 0,{},s?{transitionDuration:"".concat(1e3*s,"ms")}:void 0,{},u?{transitionTimingFunction:"".concat(u)}:void 0)}:void 0:d,otherProps:c}},e.deprecation=function(e,n){var t=n.option,i=n.newOption,o=n.newComponent,r=n.since,a=r?"Since version ".concat(r,"."):"";return t&&console.warn("".concat(e,": option '").concat(t,"' is deprecated and will be removed in later versions. Use '").concat(i,"' instead. ").concat(a)),o&&!i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' instead. ").concat(a)),o&&i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' with option '").concat(i,"' instead. ").concat(a))},e.emit=j,e.filterSupportedAttributes=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.add,i=n.remove,o=i?i.reduce(c,{}):{},r=t?l.concat(t):l,a=r.filter((function(e){return!o[e]})).reduce(c,{});return Object.keys(e).reduce((function(n,t){return a[t]&&(n[t]=e[t]),n}),{})},e.getAnimationEndEvent=function(){if(m){var e=document.createElement("fakeelement");for(var n in v){if(void 0!==e.style[n])return v[n]}}},e.getStyle=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=t?n.querySelector(t):n;if(r){if(r.currentStyle)return r.currentStyle;if(window.getComputedStyle){var a=document.defaultView;if(a){var s=a.getComputedStyle(r,i);if(s)return s.getPropertyValue(o)}}}},e.hide=q,e.iconDropdownDown='<svg xmlns="http://www.w3.org/2000/svg" id="dd-down-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',e.iconDropdownUp='<svg xmlns="http://www.w3.org/2000/svg" id="dd-up-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>',e.initialTransitionState={isVisible:!1,isTransitioning:!1},e.isClient=m,e.isRTL=function(e){var n=e.element,t=void 0===n?document:n,i=e.selector;return w({element:t,selector:i,prop:"direction",equals:"rtl"})},e.isServer=p,e.isTouch=g,e.pointerEndDownEvent=O,e.pointerEndEvent=S,e.pointerMoveEvent=E,e.pointerStartDownEvent=D,e.pointerStartEvent=b,e.show=L,e.styleDurationToMs=y,e.stylePropCompare=w,e.subscribe=x,e.throttle=C,e.transitionComponent=function(e){var n=e.dispatchTransitionState,t=e.isTransitioning,o=e.instanceId,r=e.isShow,a=e.props,s=e.domElements,u=e.beforeTransition,d=e.afterTransition,c=e.showClass,l=e.transitionClass;e.referrer;if(t)return Promise.resolve();n(r?M:H),u&&u();var f=r?a.showDuration:a.hideDuration,h=r?a.showDelay:a.hideDelay,m=r?a.showTimingFunction:a.hideTimingFunction,p=a.transitions,v=r?L:q,w=i({},a,{},s,{showClass:c,transitionClass:l,duration:f,delay:h,timingFunction:m}),y=i({},w,{},p?(r?p.show:p.hide)(w):void 0);return v(i({},y,{},{duration:void 0!==y.duration?y.duration:.24,hasDuration:void 0!==y.duration,delay:void 0!==y.delay?y.delay:0,hasDelay:void 0!==y.delay})).then((function(){var e=o;d&&d(),(r?a.fromMultipleDidShow:a.fromMultipleDidHide)?(r?a.fromMultipleDidShow:a.fromMultipleDidHide)(e):(r?a.didShow:a.didHide)&&(r?a.didShow:a.didHide)(e),n(r?F:A)}))},e.transitionStateReducer=function(e,n){switch(n){case M:return i({},e,{isTransitioning:!0,isVisible:!0});case H:return i({},e,{isTransitioning:!0});case F:return i({},e,{isTransitioning:!1,isVisible:!0});case A:return i({},e,{isTransitioning:!1,isVisible:!1});default:throw new Error("Unhandled action type: ".concat(n))}},e.unpackAttrs=f,e.unsubscribe=I,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=polythene-core.js.map
