!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).polythene={})}(this,function(e){"use strict";function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){n(e,t,i[t])})}return e}var i="hidden",o="visible",r="exposing",a="hiding",s={getInitialState:function(e,n){var t=e.attrs;if(!t.didHide)return{};var r=t.permanent||t.show,a=n(t.permanent?o:r?o:i);return{mode:a,redrawOnUpdate:n.merge([a])}},onUpdate:function(e){var n=e.state,t=e.attrs;if(t.didHide){var s=n.mode();t.permanent?s===o&&t.show?n.mode(r):s!==r||t.show||n.mode(a):s===i&&t.show?n.mode(o):s!==o||t.show||n.mode(a)}},view:function(e,n){var r=e.state,s=e.attrs,d=n.renderer,u=d("span",{className:s.placeholderClassName});if(!s.didHide)return s.permanent||s.inactive||s.show?d(s.instance,s):u;var l=r.mode();return l!==i?d(s.instance,t({},s,{didHide:function(e){return s.didHide(e),r.mode(s.permanent?o:i)}},l===a?{show:!0,hide:!0}:void 0)):u},displayName:"Conditional"},d=function(e,n){return e[n]=1,e},u=["key","style","href","id","data-index","tabIndex","tabindex","oninit","oncreate","onupdate","onbeforeremove","onremove","onbeforeupdate"],l=function(e){return"function"==typeof e?e():e},c="undefined"!=typeof document,f=!c,m={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},h=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=e.equals,a=e.contains,s=t?n.querySelector(t):n;if(!s)return!1;var d=document.defaultView;if(d){if(void 0!==r)return r===d.getComputedStyle(s,i).getPropertyValue(o);if(void 0!==a)return-1!==d.getComputedStyle(s,i).getPropertyValue(o).indexOf(a)}return!1},p=function(e){var n=parseFloat(e)*(-1===e.indexOf("ms")?1e3:1);return isNaN(n)?0:n},v=!f&&"ontouchstart"in document.documentElement,w=v?["touchstart","click"]:["click"],g=v?["click","mouseup"]:["mouseup"],y=v?["touchstart","mousedown"]:["mousedown"],S=v?["touchmove","mousemove"]:["mousemove"],b=v?["touchend","mouseup"]:["mouseup"];if(c){var C=document.querySelector("html");C&&C.classList.add(v?"pe-touch":"pe-no-touch")}var D={},E=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.05,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c?window:{},i=!1;return function(){for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];i||(e.apply(t,r),i=!0,setTimeout(function(){return i=!1},n))}},I=function(e,n){D[e]&&D[e].forEach(function(e){return e(n)})};c&&(window.addEventListener("resize",function(e){return I("resize",e)}),window.addEventListener("scroll",function(e){return I("scroll",e)}),window.addEventListener("keydown",function(e){return I("keydown",e)}),g.forEach(function(e){return window.addEventListener(e,function(n){return I(e,n)})}));var P=function(e){var n,i=e.options,o=e.renderer,r=[],a=function(e){n||console.error("Cannot set state. Did you set a root element like Dialog to show instances?"),n(e.id),I(i.name,e)},s=function(e){var n=d(e);return r.indexOf(n)},d=function(e){for(var n=0;n<r.length;n++)if(r[n].instanceId===e)return r[n]},u=function(){r.length&&(r[0].show=!0),a({id:r.length?r[0].instanceId:null,name:"next"})},f=function(){var e,n,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultId;i.queue?(r.shift(),u()):-1!==(n=s(e=t))&&(r.splice(n,1),a({id:e,name:"removeItem"}))},m=function(e,n){var t=d(n);t&&(t.pause=e,t.unpause=!e,a({id:n,name:e?"pause":"unpause"}))},h=function(){r.length=0,a({id:null,name:"removeAll"})};return{clear:h,count:function(){return r.length},getInitialState:function(e,t){return{current:n=t(null),redrawOnUpdate:t.merge([n])}},hide:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id||i.defaultId,n=i.queue&&r.length?r[0]:d(e);return n&&(n.hide=!0),a({id:e,name:"hide"}),n?n.hidePromise:Promise.resolve(e)},pause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultId;return m(!0,e)},remove:f,show:function(){var e,n,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=c.id||i.defaultId,h=function(e,n,o){var r,s,d=l(e),u=new Promise(function(e){return r=e}),c=new Promise(function(e){return s=e});return t({},i,{instanceId:n,spawn:o,attrs:e,show:!i.queue,showPromise:u,hidePromise:c,didShow:function(){return d.didShow&&d.didShow(n),a({id:n,name:"didShow"}),r(n)},didHide:function(){return d.didHide&&d.didHide(n),a({id:n,name:"didHide"}),f(n),s(n)}})}(o,m,c.spawn||i.defaultId);a({id:m,name:"show"}),i.queue?(r.push(h),1===r.length&&u()):d(m)?(e=h,-1!==(n=s(m))&&(r[n]=e)):r.push(h);return h.showPromise},unpause:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.defaultId;return m(!1,e)},view:function(e){var n=e.attrs,a=n.spawn||i.defaultId,s=r.filter(function(e){return e.show&&e.spawn===a});return i.htmlShowClass&&c&&document.documentElement&&document.documentElement.classList[s.length?"add":"remove"](i.htmlShowClass),s.length?o(i.holderSelector,{className:"container"===n.position?"pe-multiple--container":"pe-multiple--screen"},s.map(function(e){return o(i.instance,t({},l(n),{fromMultipleClear:h,spawnId:a,fromMultipleClassName:i.className,holderSelector:i.holderSelector,transitions:i.transitions,fromMultipleDidHide:e.didHide,fromMultipleDidShow:e.didShow,hide:e.hide,instanceId:e.instanceId,key:e.key,pause:e.pause,show:e.show,unpause:e.unpause},l(e.attrs)))})):o(i.placeholder)}}};P.displayName="Multi";var M=function(e){return H(e,"show")},O=function(e){return H(e,"hide")},H=function(e,n){var t=e.el;return t?new Promise(function(i){var o=t.style,r=c?window.getComputedStyle(t):{},a=e.hasDuration&&void 0!==e.duration?1e3*e.duration:p(r.transitionDuration),s=e.hasDelay&&void 0!==e.delay?1e3*e.delay:p(r.transitionDelay),d=e.timingFunction||r.transitionTimingFunction;e.transitionClass&&(e.transitionClassElement||t).classList.add(e.transitionClass);var u=function(){o.transitionDuration="0ms",o.transitionDelay="0ms",e.before&&"function"==typeof e.before&&e.before()},l=e.before&&"show"===n?u:e.before&&"hide"===n?u:null,f=function(){e.after&&"function"==typeof e.after&&e.after()},m=function(){!function(){o.transitionDuration=a+"ms",o.transitionDelay=s+"ms",d&&(o.transitionTimingFunction=d),e.showClass&&(e.showClassElement||t).classList["show"===n?"add":"remove"](e.showClass);e.transition&&e.transition()}(),setTimeout(function(){(f&&f(),e.transitionClass)&&((e.transitionClassElement||t).classList.remove(e.transitionClass),t.offsetHeight);i()},a+s)},h=function(){0===a?m():setTimeout(m,0)};l?(l(),t.offsetHeight,setTimeout(function(){h()},0)):h()}):Promise.resolve()};e.coreConditional=s,e.deprecation=function(e,n){var t=n.option,i=n.newOption,o=n.newComponent,r=n.since,a=r?"Since version ".concat(r,"."):"";return t&&console.warn("".concat(e,": option '").concat(t,"' is deprecated and will be removed in later versions. Use '").concat(i,"' instead. ").concat(a)),o&&!i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' instead. ").concat(a)),o&&i&&console.warn("".concat(e,": this component is deprecated and will be removed in later versions. Use component '").concat(o,"' with option '").concat(i,"' instead. ").concat(a))},e.filterSupportedAttributes=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.add,i=n.remove,o=i?i.reduce(d,{}):{},r=(t?u.concat(t):u).filter(function(e){return!o[e]}).reduce(d,{});return Object.keys(e).reduce(function(n,t){return r[t]&&(n[t]=e[t]),n},{})},e.unpackAttrs=l,e.classForSize=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"regular";return function(e){return{small:e.small,regular:e.regular,medium:e.medium,large:e.large,fab:e.fab}}(e)[n]},e.getAnimationEndEvent=function(){if(c){var e=document.createElement("fakeelement");for(var n in m)if(void 0!==e.style[n])return m[n]}},e.getStyle=function(e){var n=e.element,t=e.selector,i=e.pseudoSelector,o=e.prop,r=t?n.querySelector(t):n;if(r){if(r.currentStyle)return r.currentStyle;if(window.getComputedStyle){var a=document.defaultView;if(a){var s=a.getComputedStyle(r,i);if(s)return s.getPropertyValue(o)}}}},e.stylePropCompare=h,e.isRTL=function(e){var n=e.element,t=void 0===n?document:n,i=e.selector;return h({element:t,selector:i,prop:"direction",equals:"rtl"})},e.styleDurationToMs=p,e.iconDropdownUp='<svg xmlns="http://www.w3.org/2000/svg" id="dd-up-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 14l5-5 5 5z"/></svg>',e.iconDropdownDown='<svg xmlns="http://www.w3.org/2000/svg" id="dd-down-svg" width="24" height="24" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z"/></svg>',e.isClient=c,e.isServer=f,e.isTouch=v,e.pointerStartEvent=w,e.pointerEndEvent=g,e.pointerStartMoveEvent=y,e.pointerMoveEvent=S,e.pointerEndMoveEvent=b,e.Multi=P,e.show=M,e.hide=O,e.transitionComponent=function(e){var n=e.isTransitioning,i=e.setIsTransitioning,o=e.setIsVisible,r=e.instanceId,a=e.isShow,s=e.attrs,d=e.domElements,u=e.beforeTransition,l=e.afterTransition,c=e.showClass,f=e.transitionClass;if(n)return Promise.resolve();i(!0),o(!!a),u&&u();var m=s[a?"showDuration":"hideDuration"],h=s[a?"showDelay":"hideDelay"],p=s[a?"showTimingFunction":"hideTimingFunction"],v=s.transitions,w=a?M:O,g=t({},s,d,{showClass:c,transitionClass:f,duration:m,delay:h,timingFunction:p}),y=t({},g,v?v[a?"show":"hide"](g):void 0);return w(t({},y,{duration:void 0!==y.duration?y.duration:.24,hasDuration:void 0!==y.duration,delay:void 0!==y.delay?y.delay:0,hasDelay:void 0!==y.delay})).then(function(){var e=r;s[a?"fromMultipleDidShow":"fromMultipleDidHide"]?s[a?"fromMultipleDidShow":"fromMultipleDidHide"](e):s[a?"didShow":"didHide"]&&s[a?"didShow":"didHide"](e),l&&l(),i(!1)})},e.throttle=E,e.subscribe=function(e,n,t){D[e]=D[e]||[],D[e].push(t?E(n,t):n)},e.unsubscribe=function(e,n){if(D[e]){var t=D[e].indexOf(n);t>-1&&D[e].splice(t,1)}},e.emit=I,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core.js.map
