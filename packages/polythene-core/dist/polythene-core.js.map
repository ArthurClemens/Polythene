{"version":3,"file":"polythene-core.js","sources":["../src/iso.js","../src/animation-event.js","../src/Conditional.js","../src/attrs.js","../src/pointer.js","../src/events.js","../src/multi.js","../src/style.js","../src/transition.js","../src/developer.js","../src/icons.js"],"sourcesContent":["export const isClient = typeof document !== \"undefined\";\nexport const isServer = !isClient;\n","import { isClient } from \"./iso\";\n\nconst evts = {\n  \"animation\": \"animationend\",\n  \"OAnimation\": \"oAnimationEnd\",\n  \"MozAnimation\": \"animationend\",\n  \"WebkitAnimation\": \"webkitAnimationEnd\"\n};\n\nexport const getAnimationEndEvent = () => {\n  if (isClient) {\n    const el = document.createElement(\"fakeelement\");\n    for (let a in evts) {\n      if (el.style[a] !== undefined) {\n        return evts[a];\n      }\n    }\n  }\n};\n","\nconst modes = {\n  hidden:   \"hidden\",\n  visible:  \"visible\",\n  exposing: \"exposing\",\n  hiding:   \"hiding\",\n};\n\nexport const Conditional = {\n  getInitialState: (vnode, createStream) => {\n    const attrs = vnode.attrs;\n    if (!attrs.didHide) {\n      return {};\n    }\n    const visible = attrs.permanent || attrs.show;\n    const mode = createStream(attrs.permanent\n      ? modes.visible\n      : visible\n        ? modes.visible\n        : modes.hidden);\n    return {\n      mode,\n      redrawOnUpdate: createStream.merge([mode])\n    };\n  },\n  onUpdate: ({ state, attrs }) => {\n    if (!attrs.didHide) {\n      return;\n    }\n    const mode = state.mode();\n    if (attrs.permanent) {\n      if (mode === modes.visible && attrs.show) {\n        state.mode(modes.exposing);\n      } else if (mode === modes.exposing && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    } else {\n      // \"normal\" type\n      if (mode === modes.hidden && attrs.show) {\n        state.mode(modes.visible);\n      } else if (mode === modes.visible && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    }\n  },\n  view: ({ state, attrs }, { renderer: h }) => {\n    const placeholder = h(\"span\", { className: attrs.placeholderClassName });\n\n    // No didHide callback passed: use normal visibility evaluation\n    if (!attrs.didHide) {\n      return attrs.permanent || attrs.inactive || attrs.show\n        ? h(attrs.instance, attrs)\n        : placeholder;\n    }\n\n    // else: use didHide to reset the state after hiding\n    const mode = state.mode();\n    const visible = mode !== modes.hidden;\n    return visible\n      ? h(attrs.instance, Object.assign(\n        {},\n        attrs,\n        {\n          didHide: args => (\n            attrs.didHide(args),\n            state.mode(attrs.permanent\n              ? modes.visible\n              : modes.hidden\n            )\n          )\n        },\n        mode === modes.hiding && {\n          show: true,\n          hide: true\n        }\n      ))\n      : placeholder; \n  }\n};\n\nConditional.displayName = \"Conditional\";\n","\nconst r = (acc, p) => (acc[p] = 1, acc);\n\n/* \nSeparately handled props:\n- class\n- element\n*/\n\nconst defaultAttrs = [\n  // Universal\n  \"key\",\n  \"style\",\n  \"href\",\n  \"id\",\n  \n  // React\n  \"tabIndex\",\n\n  // Mithril\n  \"tabindex\",\n  \"oninit\",\n  \"oncreate\",\n  \"onupdate\",\n  \"onbeforeremove\",\n  \"onremove\",\n  \"onbeforeupdate\",\n];\n\nexport const filterSupportedAttributes = (attrs, { add: addAttrs = [], remove: removeAttrs = []} = {} ) => {\n  const removeLookup = removeAttrs.reduce(r, {});\n  const supported = defaultAttrs.concat(addAttrs).filter(item => !removeLookup[item]).reduce(r, {});\n  return Object.keys(attrs).reduce((acc, key) => (\n    supported[key]\n      ? acc[key] = attrs[key]\n      : null,\n    acc\n  ), {});\n};\n\nexport const unpackAttrs = attrs =>\n  typeof attrs === \"function\"\n    ? attrs()\n    : attrs;\n\nconst sizeClasses = classes => ({\n  small:   classes.small,\n  regular: classes.regular,\n  medium:  classes.medium,\n  large:   classes.large,\n  fab:     classes.fab,\n});\n\nexport const classForSize = (classes, size = \"regular\") =>\n  sizeClasses(classes)[size];\n\n","import { isClient, isServer } from \"./iso\";\n\nexport const isTouch = isServer\n  ? false\n  : \"ontouchstart\" in document.documentElement;\n\nexport const pointerStartEvent = isTouch\n  ? [\"touchstart\", \"click\"]\n  : [\"click\"];\n\nexport const pointerEndEvent = isTouch\n  ? [\"click\", \"mouseup\"]\n  : [\"mouseup\"];\n\nexport const pointerStartMoveEvent = isTouch\n  ? [\"touchstart\", \"mousedown\"]\n  : [\"mousedown\"];\n\nexport const pointerMoveEvent = isTouch\n  ? [\"touchmove\", \"mousemove\"]\n  : [\"mousemove\"];\n\nexport const pointerEndMoveEvent = isTouch\n  ? [\"touchend\", \"mouseup\"]\n  : [\"mouseup\"];\n\nif (isClient) {\n  document.querySelector(\"html\").classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n}\n","import { pointerEndEvent } from \"./pointer\";\nimport { isClient } from \"./iso\";\n\nconst listeners = {};\n\n// https://gist.github.com/Eartz/fe651f2fadcc11444549\nexport const throttle = (func, s = 0.05, context = isClient ? window : {}) => {\n  let wait = false;\n  return (...args) => {\n    const later = () => func.apply(context, args);\n    if (!wait) {\n      later();\n      wait = true;\n      setTimeout(() => wait = false, s);\n    }\n  };\n};\n\nexport const subscribe = (eventName, listener, delay) => {\n  listeners[eventName] = listeners[eventName] || [];\n  listeners[eventName].push(delay ? throttle(listener, delay) : listener);\n};\n\nexport const unsubscribe = (eventName, listener) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  const index = listeners[eventName].indexOf(listener);\n  if (index > -1) {\n    listeners[eventName].splice(index, 1);\n  }\n};\n\nexport const emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n  listeners[eventName].forEach(listener => listener(event));\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\",      e => emit(\"resize\", e));\n  window.addEventListener(\"scroll\",      e => emit(\"scroll\", e));\n  window.addEventListener(\"keydown\",     e => emit(\"keydown\", e));\n  window.addEventListener(pointerEndEvent, e => emit(pointerEndEvent, e));\n}\n","/*\nHelper module to manage multiple items of the same component type.\n*/\n\nimport { isClient } from \"./iso\";\nimport { unpackAttrs } from \"./attrs\";\nimport { emit } from \"./events\";\n\nexport const Multi = ({ options: mOptions, renderer }) => {\n\n  const items = []; // This is shared between all instances of a type (Dialog, Notification, ...)\n  let current;\n  \n  const getInitialState = (vnode, createStream) => {\n    current = createStream(null);\n    return {\n      current,\n      redrawOnUpdate: createStream.merge([current])\n    };\n  };\n\n  /*\n  @param e: { id, eventName }\n  */\n  const onChange = e => {\n    if (!current) {\n      console.error(\"Cannot set state. Did you set a root element like Dialog to show instances?\"); // eslint-disable-line no-console\n    }\n    current(e.id);\n    emit(mOptions.name, e);\n  };\n\n  const itemIndex = id => {\n    const item = findItem(id);\n    return items.indexOf(item);\n  };\n\n  const removeItem = id => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items.splice(index, 1);\n      onChange({ id, name: \"removeItem\" });\n    }\n  };\n\n  const replaceItem = (id, newItem) => {\n    const index = itemIndex(id);\n    if (index !== -1) {\n      items[index] = newItem;\n    }\n  };\n\n  const findItem = id => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].instanceId === id) {\n        return items[i];\n      }\n    }\n  };\n\n  const next = () => {\n    if (items.length) {\n      items[0].show = true;\n    }\n    onChange({ id: items.length ? items[0].instanceId : null, name: \"next\" });\n  };\n\n  const remove = (instanceId = mOptions.defaultId) => {\n    if (mOptions.queue) {\n      items.shift();\n      next();\n    } else {\n      removeItem(instanceId);\n    }\n  };\n\n  const removeAll = () => {\n    items.length = 0;\n    onChange({ id: null, name: \"removeAll\" });\n  };\n\n  const setPauseState = (pause, instanceId) => {\n    const item = findItem(instanceId);\n    if (item) {\n      item.pause = pause;\n      item.unpause = !pause;\n      onChange({ id: instanceId, name: pause ? \"pause\" : \"unpause\" });\n    }\n  };\n\n  const createItem = (itemAttrs, instanceId, spawn) => {\n    let resolveShow;\n    let resolveHide;\n    const attrs = unpackAttrs(itemAttrs);\n\n    const didShow = () => {\n      if (attrs.didShow) {\n        attrs.didShow(instanceId);\n      }\n      onChange({ id: instanceId, name: \"didShow\" });\n      return resolveShow(instanceId);\n    };\n    const showPromise = new Promise(resolve => \n      resolveShow = resolve\n    );\n\n    const didHide = () => {\n      if (attrs.didHide) {\n        attrs.didHide(instanceId);\n      }\n      onChange({ id: instanceId, name: \"didHide\" });\n      remove(instanceId);\n      return resolveHide(instanceId);\n    };\n\n    const hidePromise = new Promise(resolve => resolveHide = resolve);\n\n    return Object.assign(\n      {},\n      mOptions,\n      {\n        instanceId,\n        spawn,\n        attrs: itemAttrs,\n        show: mOptions.queue ? false : true,\n        showPromise,\n        hidePromise,\n        didShow,\n        didHide\n      }\n    );\n  };\n\n  const count = () => items.length;\n  const pause = (instanceId = mOptions.defaultId) => setPauseState(true, instanceId);\n  const unpause = (instanceId = mOptions.defaultId) => setPauseState(false, instanceId);\n\n  const show = (attrs = {}, spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const spawn = spawnOpts.spawn || mOptions.defaultId;\n    const item = createItem(attrs, instanceId, spawn);\n    onChange({ id: instanceId, name: \"show\" });\n    if (mOptions.queue) {\n      items.push(item);\n      if (items.length === 1) {\n        next();\n      }\n    } else {\n      const storedItem = findItem(instanceId);\n      if (!storedItem) {\n        items.push(item);\n      } else {\n        replaceItem(instanceId, item);\n      }\n    }\n    return item.showPromise;\n  };\n\n  const hide = (spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const item = mOptions.queue && items.length\n      ? items[0]\n      : findItem(instanceId);\n    if (item) {\n      item.hide = true;\n    }\n    onChange({ id: instanceId, name: \"hide\" });\n    return item\n      ? item.hidePromise\n      : Promise.resolve(instanceId);\n  };\n\n  const clear = removeAll;\n\n  const view = ({ attrs }) => {\n    const spawn = attrs.spawn || mOptions.defaultId;\n    const candidates = items.filter(item => \n      item.show && item.spawn === spawn\n    );\n    if (mOptions.htmlShowClass && isClient && document.documentElement) {\n      document.documentElement.classList[candidates.length ? \"add\" : \"remove\"](mOptions.htmlShowClass);\n    }\n    return !candidates.length\n      ? renderer(mOptions.placeholder) // placeholder because we cannot return null\n      : renderer(mOptions.holderSelector,\n        {\n          className: attrs.position === \"container\"\n            ? \"pe-multiple--container\"\n            : \"pe-multiple--screen\"\n        },\n        candidates.map(itemData => {\n          return renderer(mOptions.instance, Object.assign(\n            {},\n            {\n              fromMultipleClassName: mOptions.className,\n              fromMultipleClear: clear,\n              fromMultipleDidHide: itemData.didHide,\n              fromMultipleDidShow: itemData.didShow,\n              hide: itemData.hide,\n              holderSelector: mOptions.holderSelector,\n              instanceId: itemData.instanceId,\n              key: itemData.key,\n              pause: itemData.pause,\n              show: itemData.show,\n              spawnId: spawn,\n              transitions: mOptions.transitions,\n              unpause: itemData.unpause,\n            },\n            unpackAttrs(itemData.attrs)\n          ));\n        })\n      );\n  };\n\n  return {\n    clear,\n    count,\n    getInitialState,  \n    hide,\n    pause,\n    remove,\n    show,\n    unpause,\n    view,\n  };\n};\n\nMulti.displayName = \"Multi\";\n","\nexport const getStyle = ({ element, selector, pseudoSelector, prop }) => {\n  const el = selector\n    ? element.querySelector(selector)\n    : element;\n  if (!el) {\n    return;\n  }\n  return el.currentStyle\n    ? el.currentStyle[prop]\n    : window.getComputedStyle\n      ? document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop)\n      : null;\n};\n\nexport const stylePropCompare = ({ element, selector, pseudoSelector, prop, equals, contains }) => {\n  const el = selector\n    ? element.querySelector(selector)\n    : element;\n  if (!el) {\n    return false;\n  }\n  if (equals !== undefined) {\n    return equals === document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop);\n  }\n  if (contains !== undefined) {\n    return document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop).indexOf(contains) !== -1;\n  }\n};\n\nexport const isRTL = ({ element = document, selector }) => \n  stylePropCompare({ element, selector, prop: \"direction\", equals: \"rtl\" });\n\nexport const styleDurationToMs = durationStr => {\n  const parsed = parseFloat(durationStr) * (durationStr.indexOf(\"ms\") === -1 ? 1000 : 1);\n  return isNaN(parsed)\n    ? 0\n    : parsed;\n};","/*\nGeneric show/hide transition module\n*/\n\nimport { isClient } from \"./iso\";\nimport { styleDurationToMs } from \"./style\";\n\n// defaults\nconst DEFAULT_DURATION = .240;\nconst DEFAULT_DELAY =    0;\n// const TRANSITION =    \"both\";\n\n// See: transition\nexport const show = opts =>\n  transition(opts, \"show\");\n\nexport const hide = opts =>\n  transition(opts, \"hide\");\n\n/*\nopts:\n- el\n- duration\n- delay\n- showClass\n- transitionClass\n- before\n- show\n- hide\n- after\n- timingFunction\n\n- state (show, hide)\n*/\nconst transition = (opts, state) => {\n  const el = opts.el;\n  if (!el) {\n    return Promise.resolve();\n  } else {\n    return new Promise(resolve => {\n      const style = el.style;\n      const computedStyle = isClient\n        ? window.getComputedStyle(el)\n        : {};\n      const duration = opts.hasDuration\n        ? opts.duration * 1000.0\n        : styleDurationToMs(computedStyle.transitionDuration);\n      const delay = opts.hasDelay\n        ? opts.delay * 1000.0\n        : styleDurationToMs(computedStyle.transitionDelay);\n      const timingFunction = opts.timingFunction || computedStyle.transitionTimingFunction;\n\n      if (opts.transitionClass) {\n        const transitionClassElement = opts.transitionClassElement || el;\n        transitionClassElement.classList.add(opts.transitionClass);\n      }\n\n      const before = () => {\n        style.transitionDuration = \"0ms\";\n        style.transitionDelay = \"0ms\";\n        opts.before();\n      };\n\n      const maybeBefore = (opts.before && state === \"show\")\n        ? before\n        : (opts.before && state === \"hide\")\n          ? before\n          : null;\n\n      const after = opts.after\n        ? () => opts.after()\n        : null;\n\n      const applyTransition = () => {\n        style.transitionDuration = duration + \"ms\";\n        style.transitionDelay = delay + \"ms\";\n\n        if (timingFunction) {\n          style.transitionTimingFunction = timingFunction;\n        }\n        if (opts.showClass) {\n          const showClassElement = opts.showClassElement || el;\n          showClassElement.classList[(state === \"show\") ? \"add\" : \"remove\"](opts.showClass);\n        }\n        if (opts.transition) {\n          opts.transition();\n        }\n      };\n\n      const doTransition = () => {\n        applyTransition();\n        setTimeout(() => {\n          if (after) {\n            after();\n          }\n          if (opts.transitionClass) {\n            const transitionClassElement = opts.transitionClassElement || el;\n            transitionClassElement.classList.remove(opts.transitionClass);\n            el.offsetHeight; // force reflow\n          }\n          resolve();\n        }, duration + delay);\n      };\n\n      const maybeDelayTransition = () => {\n        if (duration === 0) {\n          doTransition();\n        } else {\n          setTimeout(doTransition, 0);\n        }\n      };\n\n      if (maybeBefore) {\n        maybeBefore();\n        el.offsetHeight; // force reflow\n        setTimeout(() => {\n          maybeDelayTransition();\n        }, 0);\n      } else {\n        maybeDelayTransition();\n      }\n    });\n  }\n};\n\nexport const transitionComponent = ({ isShow, state, attrs, domElements, beforeTransition, afterTransition, showClass, transitionClass }) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n  state.transitioning(true);\n  state.visible(isShow ? true : false);\n  if (beforeTransition) {\n    beforeTransition();\n  }\n  const duration = attrs[isShow ? \"showDuration\" : \"hideDuration\"];\n  const delay = attrs[isShow ? \"showDelay\" : \"hideDelay\"];\n  const timingFunction = attrs[isShow ? \"showTimingFunction\" : \"hideTimingFunction\"];\n  const transitions = attrs.transitions;\n  const fn = isShow ? show : hide;\n  const opts1 = Object.assign({},\n    attrs,\n    domElements,\n    {\n      showClass,\n      transitionClass,\n      duration,\n      delay,\n      timingFunction\n    }\n  );\n  const opts2 = Object.assign({},\n    opts1,\n    transitions && transitions[isShow ? \"show\" : \"hide\"](opts1)\n  );\n  const opts3 = Object.assign({},\n    opts2,\n    {\n      duration: opts2.duration !== undefined\n        ? opts2.duration\n        : DEFAULT_DURATION,\n      hasDuration: opts2.duration !== undefined,\n      delay: opts2.delay !== undefined\n        ? opts2.delay\n        : DEFAULT_DELAY,\n      hasDelay: opts2.delay !== undefined,\n    }\n  );\n  return fn(opts3).then(() => {\n    const id = state.instanceId;\n    if (attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"]) {\n      attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"](id); // when used with Multiple; this will call attrs.didShow / attrs.didHide\n    } else if (attrs[isShow ? \"didShow\" : \"didHide\"]) {\n      attrs[isShow ? \"didShow\" : \"didHide\"](id); // when used directly\n    }\n    if (afterTransition) {\n      afterTransition();\n    }\n    state.transitioning(false);\n  });\n};\n","\nexport const deprecation = (component, { option, newOption, newComponent }) => (\n  option && console.warn(`${component}: option '${option}' is deprecated and will be removed in later versions. Use '${newOption}' instead.`), // eslint-disable-line no-console\n  newComponent && !newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use '${newComponent}' instead.`), // eslint-disable-line no-console\n  newComponent && newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use '${newComponent}' with option '${newOption}' instead.`) // eslint-disable-line no-console\n);\n","\nexport const iconDropdownUp = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-up-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 14l5-5 5 5z\\\"/></svg>\";\nexport const iconDropdownDown = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-down-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 10l5 5 5-5z\\\"/></svg>\";\n"],"names":["isClient","document","isServer","evts","getAnimationEndEvent","el","createElement","a","style","undefined","modes","hidden","visible","exposing","hiding","Conditional","getInitialState","vnode","createStream","attrs","didHide","permanent","show","mode","redrawOnUpdate","merge","onUpdate","state","view","renderer","h","placeholder","className","placeholderClassName","inactive","instance","Object","assign","args","hide","displayName","r","acc","p","defaultAttrs","filterSupportedAttributes","add","addAttrs","remove","removeAttrs","removeLookup","reduce","supported","concat","filter","item","keys","key","unpackAttrs","sizeClasses","classes","small","regular","medium","large","fab","classForSize","size","isTouch","documentElement","pointerStartEvent","pointerEndEvent","pointerStartMoveEvent","pointerMoveEvent","pointerEndMoveEvent","querySelector","classList","listeners","throttle","func","s","context","window","wait","later","apply","setTimeout","subscribe","eventName","listener","delay","push","unsubscribe","index","indexOf","splice","emit","event","forEach","addEventListener","e","Multi","options","mOptions","items","current","onChange","console","error","id","name","itemIndex","findItem","removeItem","replaceItem","newItem","i","length","instanceId","next","defaultId","queue","shift","removeAll","setPauseState","pause","unpause","createItem","itemAttrs","spawn","resolveShow","resolveHide","didShow","showPromise","Promise","resolve","hidePromise","count","spawnOpts","storedItem","clear","candidates","htmlShowClass","holderSelector","position","map","itemData","fromMultipleClassName","fromMultipleClear","fromMultipleDidHide","fromMultipleDidShow","spawnId","transitions","getStyle","element","selector","pseudoSelector","prop","currentStyle","getComputedStyle","defaultView","getPropertyValue","stylePropCompare","equals","contains","isRTL","styleDurationToMs","durationStr","parsed","parseFloat","isNaN","DEFAULT_DURATION","DEFAULT_DELAY","opts","transition","computedStyle","duration","hasDuration","transitionDuration","hasDelay","transitionDelay","timingFunction","transitionTimingFunction","transitionClass","transitionClassElement","before","maybeBefore","after","applyTransition","showClass","showClassElement","doTransition","offsetHeight","maybeDelayTransition","transitionComponent","isShow","domElements","beforeTransition","afterTransition","transitioning","fn","opts1","opts2","opts3","then","deprecation","component","option","newOption","newComponent","warn","iconDropdownUp","iconDropdownDown"],"mappings":"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"}