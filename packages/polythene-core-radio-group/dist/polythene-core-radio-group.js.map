{"version":3,"file":"polythene-core-radio-group.js","sources":["../../polythene-css-classes/radio-group.js","../src/radio-group.js"],"sourcesContent":["\nexport default {\n  component: \"pe-radio-group\",\n};\n","import { filterSupportedAttributes, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/radio-group\";\n\nconst getButtons = vnode => {\n  const attrs = vnode.attrs;\n  return attrs.content\n    ? attrs.content\n    : attrs.buttons\n      ? attrs.buttons\n      : attrs.children || vnode.children || [];\n};\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  if (attrs.defaultSelectedValue !== undefined) {\n    deprecation(\"RadioGroup\", { option: \"defaultSelectedValue\", newOption: \"defaultCheckedValue\", since: \"1.4.2\" });\n  }\n  const buttons = getButtons(vnode);\n  const checkedIdx = buttons.reduce((acc, buttonOpts, index) => {\n    if (buttonOpts.value === undefined) {\n      console.error(\"Option 'value' not set for radio button\"); // eslint-disable-line no-console\n    }\n    return acc !== null\n      ? acc\n      : (\n        buttonOpts.defaultChecked !== undefined\n        || (attrs.defaultCheckedValue !== undefined && buttonOpts.value === attrs.defaultCheckedValue)\n        || (attrs.defaultSelectedValue !== undefined && buttonOpts.value === attrs.defaultSelectedValue) // deprecated\n      )\n        ? index\n        : acc;\n  }, null);\n  const checkedIndex = createStream(checkedIdx);\n  return {\n    checkedIndex: checkedIndex,\n    redrawOnUpdate: createStream.merge([checkedIndex])\n  };\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, RadioButton }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const checkedIndex = state.checkedIndex();\n  const buttons = getButtons(vnode);\n  const groupCheckedValue= attrs.checkedValue;\n\n  return buttons.length\n    ? buttons.map((buttonOpts, index) => {\n      if (!buttonOpts) {\n        return null;\n      }\n      const isChecked = buttonOpts.checked !== undefined\n        ? buttonOpts.checked\n        : groupCheckedValue !== undefined\n          ? buttonOpts.value === groupCheckedValue\n          : checkedIndex === index;\n      return h(RadioButton, Object.assign(\n        {},\n        {\n          /* group attributes that may be overwritten by individual buttons */\n          name: attrs.name,\n          key: buttonOpts.value\n        },\n        attrs.all,\n        /* individual button options */\n        buttonOpts,\n        {\n          /* this component's options */\n          onChange: ({ value }) => (\n            state.checkedIndex(index),\n            attrs.onChange && attrs.onChange({ value })\n          ),\n          checked: isChecked\n        }\n      ));\n    })\n    : null;\n};\n"],"names":["component","getButtons","vnode","attrs","content","buttons","children","element","createStream","undefined","defaultSelectedValue","deprecation","option","newOption","since","checkedIndex","reduce","acc","buttonOpts","index","value","console","error","defaultChecked","defaultCheckedValue","redrawOnUpdate","merge","k","keys","_extends","filterSupportedAttributes","className","classes","tone","class","join","h","renderer","RadioButton","state","groupCheckedValue","checkedValue","length","map","isChecked","checked","name","key","all","onChange"],"mappings":"4dACe,CACbA,UAAW,kBCCPC,EAAa,SAAAC,OACXC,EAAQD,EAAMC,aACbA,EAAMC,QACTD,EAAMC,QACND,EAAME,QACJF,EAAME,QACNF,EAAMG,UAAYJ,EAAMI,UAAY,gCAGlB,SAAAJ,UACxBA,EAAMC,MAAMI,SAAW,uBAEM,SAACL,EAAOM,OAC/BL,EAAQD,EAAMC,WACeM,IAA/BN,EAAMO,sBACRC,cAAY,aAAc,CAAEC,OAAQ,uBAAwBC,UAAW,sBAAuBC,MAAO,cAiBjGC,EAAeP,EAfLP,EAAWC,GACAc,OAAO,SAACC,EAAKC,EAAYC,eACzBV,IAArBS,EAAWE,OACbC,QAAQC,MAAM,2CAED,OAARL,EACHA,OAE8BR,IAA9BS,EAAWK,qBACuBd,IAA9BN,EAAMqB,qBAAqCN,EAAWE,QAAUjB,EAAMqB,0BACvCf,IAA/BN,EAAMO,sBAAsCQ,EAAWE,QAAUjB,EAAMO,qBAEzES,EACAF,GACL,aAEI,CACLF,aAAcA,EACdU,eAAgBjB,EAAakB,MAAM,CAACX,kBAIb,SAACb,SAAeyB,IAANC,KAC7BzB,EAAQD,EAAMC,aACb0B,EACL,GACAC,4BAA0B3B,GAC1B,CACE4B,UAAW,CACTC,EAAQhC,UACO,SAAfG,EAAM8B,KAAkB,eAAiB,KAC1B,UAAf9B,EAAM8B,KAAmB,gBAAkB,KAC3C9B,EAAM4B,WAAa5B,EAAMwB,EAAEO,QAC3BC,KAAK,sBAKgB,SAACjC,SAAmBkC,IAAVC,SAAaC,IAAAA,YAC5CnC,EAAQD,EAAMC,MACdoC,EAAQrC,EAAMqC,MACdxB,EAAewB,EAAMxB,eACrBV,EAAUJ,EAAWC,GACrBsC,EAAmBrC,EAAMsC,oBAExBpC,EAAQqC,OACXrC,EAAQsC,IAAI,SAACzB,EAAYC,OACpBD,SACI,SAEH0B,OAAmCnC,IAAvBS,EAAW2B,QACzB3B,EAAW2B,aACWpC,IAAtB+B,EACEtB,EAAWE,QAAUoB,EACrBzB,IAAiBI,SAChBiB,EAAEE,EAAaT,EACpB,GACA,CAEEiB,KAAM3C,EAAM2C,KACZC,IAAK7B,EAAWE,OAElBjB,EAAM6C,IAEN9B,EACA,CAEE+B,SAAU,gBAAG7B,IAAAA,aACXmB,EAAMxB,aAAaI,GACnBhB,EAAM8C,UAAY9C,EAAM8C,SAAS,CAAE7B,MAAAA,KAErCyB,QAASD,OAIb"}