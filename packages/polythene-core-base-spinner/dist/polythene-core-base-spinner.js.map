{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/spinner.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.dom(),\n  },\n  showClass: classes.visible\n});\n\nconst showSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  const dom = createStream(null);\n  return {\n    dom,\n    visible,\n    transitioning,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (attrs.z !== undefined) {\n    deprecation(\"Spinner\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n\n  state.dom(vnode.dom);\n\n  if (!attrs.permanent) {\n    showSpinner(state, attrs);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass,\n        classForSize(classes, attrs.size),\n        attrs.singleColor ? classes.singleColor: null,\n        attrs.raised ? classes.raised : null,\n        attrs.animated ? classes.animated : null,\n        attrs.permanent ? classes.permanent : null,\n        attrs.permanent ? classes.visible : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, Shadow }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (state.hide) {\n    setTimeout(() => { hideSpinner(state, attrs); }, 0);\n  }\n  const shadowDepth = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z; // deprecated\n\n  return [\n    attrs.raised && attrs.content\n      ? h(Shadow, { key: \"shadow\", shadowDepth })\n      : null,\n    attrs.content\n  ];\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","transitionOptions","state","attrs","isShow","domElements","el","dom","showClass","classes","showSpinner","transitionComponent","hideSpinner","getInitialState","vnode","createStream","transitioning","redrawOnUpdate","merge","onMount","z","undefined","deprecation","option","newOption","createProps","keys","k","Object","assign","filterSupportedAttributes","className","instanceClass","classForSize","size","class","join","events","createContent","renderer","h","Shadow","hide","setTimeout","shadowDepth","content","key"],"mappings":"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"}