{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/spinner.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.dom(),\n  },\n  showClass: classes.visible\n});\n\nconst showSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  const dom = createStream(null);\n  return {\n    dom,\n    visible,\n    transitioning,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (attrs.z !== undefined) {\n    deprecation(\"Spinner\", \"z\", \"shadowDepth\");\n  }\n\n  state.dom(vnode.dom);\n\n  if (!attrs.permanent) {\n    showSpinner(state, attrs);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass,\n        classForSize(classes, attrs.size),\n        attrs.singleColor ? classes.singleColor: null,\n        attrs.raised ? classes.raised : null,\n        attrs.animated ? classes.animated : null,\n        attrs.permanent ? classes.permanent : null,\n        attrs.permanent ? classes.visible : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, Shadow }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (state.hide) {\n    setTimeout(() => { hideSpinner(state, attrs); }, 0);\n  }\n  const shadowDepth = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z; // deprecated\n\n  return [\n    attrs.raised && attrs.content\n      ? h(Shadow, { key: \"shadow\", shadowDepth })\n      : null,\n    attrs.content\n  ];\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","transitionOptions","state","attrs","isShow","domElements","el","dom","showClass","classes","showSpinner","transitionComponent","hideSpinner","getInitialState","vnode","createStream","transitioning","redrawOnUpdate","merge","onMount","z","undefined","deprecation","createProps","k","keys","filterSupportedAttributes","className","instanceClass","classForSize","size","class","join","events","createContent","h","renderer","Shadow","hide","setTimeout","shadowDepth","content","key"],"mappings":"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"}