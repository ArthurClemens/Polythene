{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst showSpinner = opts =>\n  transitionComponent({\n    ...opts,\n    isShow: true\n  });\n\n// const hideSpinner = opts =>\n//   transitionComponent({\n//     ...opts,\n//     isShow: false\n//   });\n\nexport const _BaseSpinner = ({ h, a, useState, useEffect, getRef, Shadow, ...props }) => {\n  const [isTransitioning, setIsTransitioning] = useState(false);\n  const [isVisible, setIsVisible] = useState(!!props.permanent);\n  const [domElement, setDomElement] = useState();\n\n  const transitionOptions = {\n    isTransitioning,\n    setIsTransitioning,\n    setIsVisible,\n    attrs: props,\n    domElements: {\n      el: domElement,\n    },\n    showClass: classes.visible\n  };\n\n  useEffect(\n    () => {\n      if (!domElement) {\n        return;\n      }\n      if (!props.permanent) {\n        showSpinner(transitionOptions);\n      }\n    },\n    [domElement]\n  );\n\n  const componentProps = Object.assign(\n    {}, \n    filterSupportedAttributes(props),\n    getRef(dom => dom && !domElement && (\n      setDomElement(dom),\n      props.ref && props.ref(dom)\n    )),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.component,\n        props.instanceClass,\n        classForSize(classes, props.size),\n        props.singleColor ? classes.singleColor: null,\n        props.raised ? classes.raised : null,\n        props.animated ? classes.animated : null,\n        props.permanent ? classes.permanent : null,\n        isVisible ? classes.visible : null,\n        props.className || props[a.class],\n      ].join(\" \"),\n    },\n    props.events\n  );\n\n  // if (state.hide) {\n  //   setTimeout(() => { hideSpinner(state, attrs); }, 0);\n  // }\n\n  const content = [\n    props.before,\n    props.content,\n    props.after,\n  ].filter(Boolean);\n\n  return h(\"div\",\n    componentProps, [\n      props.raised && content.length > 0\n        ? h(Shadow, { key: \"shadow\", shadowDepth: props.shadowDepth })\n        : null,\n      content\n    ]\n  );\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","showSpinner","opts","transitionComponent","isShow","h","a","useState","useEffect","getRef","Shadow","props","isTransitioning","setIsTransitioning","isVisible","setIsVisible","domElement","setDomElement","transitionOptions","attrs","domElements","el","showClass","classes","componentProps","_extends","filterSupportedAttributes","dom","ref","testId","className","instanceClass","classForSize","size","class","join","events","content","before","after","filter","Boolean","length","key","shadowDepth"],"mappings":"01CACe,CACbA,UAAa,aAGbC,UAAa,wBACbC,YAAa,0BAGbC,SAAa,uBACbC,IAAa,kBACbC,MAAa,oBACbC,OAAa,qBACbC,UAAa,wBACbC,OAAa,qBACbC,QAAa,sBACbC,YAAa,2BACbC,MAAa,oBACbC,QAAa,uBCfTC,EAAc,SAAAC,UAClBC,4VACKD,GACHE,QAAQ,qBASgB,gBAAGC,IAAAA,EAAGC,IAAAA,EAAGC,IAAAA,SAAUC,IAAAA,UAAWC,IAAAA,OAAQC,IAAAA,OAAWC,8DAC7BJ,GAAS,MAAhDK,OAAiBC,WACUN,IAAWI,EAAMhB,cAA5CmB,OAAWC,WACkBR,OAA7BS,OAAYC,OAEbC,EAAoB,CACxBN,gBAAAA,EACAC,mBAAAA,EACAE,aAAAA,EACAI,MAAOR,EACPS,YAAa,CACXC,GAAIL,GAENM,UAAWC,EAAQvB,SAGrBQ,EACE,WACOQ,IAGAL,EAAMhB,WACTM,EAAYiB,KAGhB,CAACF,QAGGQ,EAAiBC,EACrB,GACAC,4BAA0Bf,GAC1BF,EAAO,SAAAkB,UAAOA,IAAQX,IACpBC,EAAcU,GACdhB,EAAMiB,KAAOjB,EAAMiB,IAAID,MAEzBhB,EAAMkB,QAAU,gBAAkBlB,EAAMkB,QACxC,CACEC,UAAW,CACTP,EAAQnC,UACRuB,EAAMoB,cACNC,eAAaT,EAASZ,EAAMsB,MAC5BtB,EAAMb,YAAcyB,EAAQzB,YAAa,KACzCa,EAAMf,OAAS2B,EAAQ3B,OAAS,KAChCe,EAAMpB,SAAWgC,EAAQhC,SAAW,KACpCoB,EAAMhB,UAAY4B,EAAQ5B,UAAY,KACtCmB,EAAYS,EAAQvB,QAAU,KAC9BW,EAAMmB,WAAanB,EAAML,EAAE4B,QAC3BC,KAAK,MAETxB,EAAMyB,QAOFC,EAAU,CACd1B,EAAM2B,OACN3B,EAAM0B,QACN1B,EAAM4B,OACNC,OAAOC,gBAEFpC,EAAE,MACPmB,EAAgB,CACdb,EAAMf,QAAUyC,EAAQK,OAAS,EAC7BrC,EAAEK,EAAQ,CAAEiC,IAAK,SAAUC,YAAajC,EAAMiC,cAC9C,KACJP"}