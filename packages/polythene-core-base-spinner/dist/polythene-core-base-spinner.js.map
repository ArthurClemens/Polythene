{"version":3,"file":"polythene-core-base-spinner.js","sources":["../../polythene-css-classes/base-spinner.js","../src/spinner.js"],"sourcesContent":["\nexport default {\n  component:   \"pe-spinner\",\n\n  // elements\n  animation:   \"pe-spinner__animation\",\n  placeholder: \"pe-spinner__placeholder\",\n\n  // states\n  animated:    \"pe-spinner--animated\",\n  fab:         \"pe-spinner--fab\",\n  large:       \"pe-spinner--large\",\n  medium:      \"pe-spinner--medium\",\n  permanent:   \"pe-spinner--permanent\",\n  raised:      \"pe-spinner--raised\",\n  regular:     \"pe-spinner--regular\",\n  singleColor: \"pe-spinner--single-color\",\n  small:       \"pe-spinner--small\",\n  visible:     \"pe-spinner--visible\",\n};\n","import { filterSupportedAttributes, transitionComponent, classForSize, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/base-spinner\";\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.dom(),\n  },\n  showClass: classes.visible\n});\n\nconst showSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideSpinner = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  const dom = createStream(null);\n  return {\n    dom,\n    visible,\n    transitioning,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (attrs.z !== undefined) {\n    deprecation(\"Spinner\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n\n  state.dom(vnode.dom);\n\n  if (!attrs.permanent) {\n    showSpinner(state, attrs);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.instanceClass,\n        classForSize(classes, attrs.size),\n        attrs.singleColor ? classes.singleColor: null,\n        attrs.raised ? classes.raised : null,\n        attrs.animated ? classes.animated : null,\n        attrs.permanent ? classes.permanent : null,\n        attrs.permanent ? classes.visible : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n    },\n    attrs.events\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, Shadow }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (state.hide) {\n    setTimeout(() => { hideSpinner(state, attrs); }, 0);\n  }\n  const shadowDepth = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z; // deprecated\n\n  return [\n    attrs.raised && attrs.content\n      ? h(Shadow, { key: \"shadow\", shadowDepth })\n      : null,\n    attrs.content\n  ];\n};\n"],"names":["component","animation","placeholder","animated","fab","large","medium","permanent","raised","regular","singleColor","small","visible","transitionOptions","state","attrs","isShow","domElements","el","dom","showClass","classes","vnode","createStream","transitioning","redrawOnUpdate","merge","undefined","z","deprecation","option","newOption","transitionComponent","showSpinner","keys","k","Object","assign","filterSupportedAttributes","className","instanceClass","classForSize","size","class","join","events","renderer","h","Shadow","hide","setTimeout","hideSpinner","shadowDepth","content","key"],"mappings":"mQACe,CACbA,UAAa,aAGbC,UAAa,wBACbC,YAAa,0BAGbC,SAAa,uBACbC,IAAa,kBACbC,MAAa,oBACbC,OAAa,qBACbC,UAAa,wBACbC,OAAa,qBACbC,QAAa,sBACbC,YAAa,2BACbC,MAAa,oBACbC,QAAa,6BCfTC,EAAoB,CAACC,EAAOC,EAAOC,MACvCF,MAAAA,EACAC,MAAAA,EACAC,OAAAA,EACAC,YAAa,CACXC,GAAIJ,EAAMK,OAEZC,UAAWC,EAAQT,+CASU,CAACU,EAAOC,WAC/BC,EAAgBD,GAAa,GAC7BX,EAAUW,GAAa,SAEtB,CACLJ,IAFUI,EAAa,MAGvBX,QAAAA,EACAY,cAAAA,EACAC,eAAgBF,EAAaG,MAAM,CAACF,cAIjBF,QAChBA,EAAMH,iBAGLL,EAAQQ,EAAMR,MACdC,EAAQO,EAAMP,WAEJY,IAAZZ,EAAMa,GACRC,cAAY,UAAW,CAAEC,OAAQ,IAAKC,UAAW,gBAGnDjB,EAAMK,IAAIG,EAAMH,KAEXJ,EAAMR,WA/BO,EAACO,EAAOC,IAC1BiB,sBAAoBnB,EAAkBC,EAAOC,GAAO,IA+BlDkB,CAAYnB,EAAOC,gBAII,CAACO,GAASY,KAAMC,YACnCpB,EAAQO,EAAMP,aACbqB,OAAOC,OACZ,GACAC,4BAA0BvB,GAC1B,CACEwB,UAAW,CACTlB,EAAQrB,UACRe,EAAMyB,cACNC,eAAapB,EAASN,EAAM2B,MAC5B3B,EAAML,YAAcW,EAAQX,YAAa,KACzCK,EAAMP,OAASa,EAAQb,OAAS,KAChCO,EAAMZ,SAAWkB,EAAQlB,SAAW,KACpCY,EAAMR,UAAYc,EAAQd,UAAY,KACtCQ,EAAMR,UAAYc,EAAQT,QAAU,KACpCG,EAAMwB,WAAaxB,EAAMoB,EAAEQ,QAC3BC,KAAK,MAET7B,EAAM8B,uBAImB,CAACvB,GAASwB,SAAUC,EAAGC,OAAAA,YAC5ClC,EAAQQ,EAAMR,MACdC,EAAQO,EAAMP,MAEhBD,EAAMmC,MACRC,WAAW,KA5DK,EAACpC,EAAOC,IAC1BiB,sBAAoBnB,EAAkBC,EAAOC,GAAO,IA2D/BoC,CAAYrC,EAAOC,IAAW,SAE7CqC,OAAoCzB,IAAtBZ,EAAMqC,YACtBrC,EAAMqC,YACNrC,EAAMa,QAEH,CACLb,EAAMP,QAAUO,EAAMsC,QAClBN,EAAEC,EAAQ,CAAEM,IAAK,SAAUF,YAAAA,IAC3B,KACJrC,EAAMsC"}