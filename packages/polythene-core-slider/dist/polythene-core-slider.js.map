{"version":3,"file":"polythene-core-slider.js","sources":["../../polythene-css-classes/slider.js","../src/slider.js"],"sourcesContent":["\nexport default {\n  component:      \"pe-slider\",\n\n  // elements\n  control:        \"pe-slider__control\",\n  label:          \"pe-slider__label\",\n  pin:            \"pe-slider__pin\",\n  thumb:          \"pe-slider__thumb\",\n  tick:           \"pe-slider__tick\",\n  ticks:          \"pe-slider__ticks\",\n  track:          \"pe-slider__track\",\n  trackBar:       \"pe-slider__track-bar\",\n  trackBarValue:  \"pe-slider__track-bar-value\",\n  trackPart:      \"pe-slider__track-part\",\n  trackPartRest:  \"pe-slider__track-rest\",\n  trackPartValue: \"pe-slider__track-value\",\n\n  // states\n  hasFocus:       \"pe-slider--focus\",\n  hasPin:         \"pe-slider--pin\",\n  hasTicks:       \"pe-slider--ticks\",\n  hasTrack:       \"pe-slider--track\",\n  isActive:       \"pe-slider--active\",\n  isAtMin:        \"pe-slider--min\",\n  isDisabled:     \"pe-slider--disabled\",\n  tickValue:      \"pe-slider__tick--value\",\n};\n","import { isTouch, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, isClient, filterSupportedAttributes, getStyle } from \"polythene-core\";\nimport classes from \"polythene-css-classes/slider\";\n\nconst MAX_TICKS = 100;\nlet focusElement;\n\nconst deFocus = state => {\n  if (focusElement) {\n    focusElement.blur();\n  }\n  focusElement = undefined;\n  state.hasFocus(false);\n};\n\nconst focus = (state, el) => {\n  deFocus(state);\n  focusElement = el;\n  state.hasFocus(true);\n};\n\nconst positionFromEvent = (e, isVertical) => (\n  // isVertical not yet implemented\n  isTouch && e.touches\n    ? isVertical ? e.touches[0].pageY : e.touches[0].pageX\n    : isVertical ? e.pageY : e.pageX);\n\nconst updatePinPosition = state => {\n  if (state.controlEl && state.pinEl) {\n    const left = state.fraction() * state.rangeWidth;\n    state.pinEl.style.left = left + \"px\";\n  }\n};\n\nconst updateValue = (state, value) => {\n  state.setValue(value, true);\n  updatePinPosition(state);\n};\n\nconst generateTickMarks = (h, stepCount, stepSize, value) => {\n  const items = [];\n  const stepWithValue = value / stepSize;\n  let s = 0;\n  while (s < stepCount + 1) {\n    items.push(h(\"div\", {\n      className: s <= stepWithValue\n        ? [classes.tick, classes.tickValue].join(\" \")\n        : classes.tick,\n      key: `tick-${s}`\n    }));\n    s++;\n  }\n  return items;\n};\n\nconst readRangeData = state => {\n  if (state.controlEl && isClient) {\n    // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n    state.controlWidth = parseFloat(getStyle({ element: state.controlEl, prop: \"width\" }));\n    state.rangeWidth = state.trackEl.getBoundingClientRect().width - state.controlWidth;\n    const styles = window.getComputedStyle(state.trackEl);\n    state.rangeOffset = parseFloat(styles.marginLeft);\n  }\n};\n\nconst calculateClickOffset = (state, controlOffset = 0) => {\n  state.clickOffset = state.trackEl.getBoundingClientRect().left - (state.rangeOffset - state.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (state, e) => {\n  const controlPos = state.controlEl.getBoundingClientRect().left;\n  const eventPos = positionFromEvent(e);\n  const controlOffset = eventPos - controlPos - state.controlWidth / 2;\n  calculateClickOffset(state, controlOffset);\n};\n\nconst initTrackEvent = (state) =>\n  calculateClickOffset(state, 0);\n\nconst handlePosEvent = (state, e) => {\n  const pos = positionFromEvent(e) - state.clickOffset;\n  const value = state.min + ((pos - state.rangeOffset) / state.rangeWidth) * (state.max - state.min);\n  updateValue(state, value);\n};\n\nconst startDrag = (state, attrs, e) => {\n  if (state.isDragging()) return;\n  e.preventDefault();\n  state.isDragging(true);\n  state.isActive(true);\n  deFocus(state);\n\n  const drag = e => {\n    if (!state.isDragging()) return;\n    handlePosEvent(state, e);\n  };\n\n  const endDrag = () => {\n    if (!state.isDragging()) return;\n    deFocus(state);\n    if (isClient) {\n      pointerMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, drag));\n      pointerEndMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, endDrag));\n    }\n    state.isDragging(false);\n    state.isActive(false);\n  };\n\n  if (isClient) {\n    pointerMoveEvent.forEach(evt =>\n      window.addEventListener(evt, drag));\n    pointerEndMoveEvent.forEach(evt =>\n      window.addEventListener(evt, endDrag));\n  }\n  readRangeData(state);\n\n  if (attrs.pin) {\n    updatePinPosition(state);\n  }\n};\n\nconst startTrack = (state, attrs, e) => {\n  e.preventDefault();\n  if (state.isDragging()) {\n    return;\n  }\n  readRangeData(state);\n  initTrackEvent(state);\n  handlePosEvent(state, e);\n  startDrag(state, attrs, e);\n};\n\nconst createSlider = (vnode, { h, k, hasTicks, interactiveTrack }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const fraction = state.fraction();\n  const range = state.max - state.min;\n  const stepCount = Math.min(MAX_TICKS, parseInt(range / state.stepSize, 10));\n\n  const onStartTrack = e => (\n    startTrack(state, attrs, e)\n  );\n\n  const onInitDrag = e => {\n    readRangeData(state);\n    initControlEvent(state, e);\n    startDrag(state, attrs, e);\n  };\n\n  const flexValueCss =  fraction + \" 1 0%\";\n  const flexRestValue = 1 - fraction;\n  const flexRestCss =   flexRestValue + \" 1 0%\";\n\n  return h(\"div\",\n    Object.assign(\n      {},\n      { className: classes.track },\n      interactiveTrack && !attrs.disabled && pointerStartMoveEvent.reduce((acc, evt) => (\n        acc[k[`on${evt}`]] = onStartTrack,\n        acc\n      ), {})\n    ),\n    [\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartValue,\n          key: \"trackPartValue\",\n          style: {\n            flex: flexValueCss,\n            msFlex: flexValueCss,\n            WebkitFlex: flexValueCss\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      h(\"div\", Object.assign(\n        {},\n        {\n          className: classes.control,\n          key: \"control\"\n        },\n        attrs.disabled\n          ? { disabled: true }\n          : {\n            [k.tabindex]: attrs[k.tabindex] || 0,\n            [k.onfocus]: () => focus(state, state.controlEl),\n            [k.onblur]: () => deFocus(state),\n            [k.onkeydown]: e => {\n              if (e.key !== \"Tab\") {\n                e.preventDefault();\n              }\n              if (e.key === \"Escape\" || e.key === \"Esc\") {\n                state.controlEl.blur(e);\n              } else if (e.key === \"ArrowLeft\" || e.key === \"ArrowDown\" || e.key === \"Left\" || e.key === \"Down\") {\n                state.decrement(state, e.shiftKey);\n              } else if (e.key === \"ArrowRight\" || e.key === \"ArrowUp\" || e.key === \"Right\" || e.key === \"Up\") {\n                state.increment(state, e.shiftKey);\n              } else if (e.key === \"Home\") {\n                updateValue(state, state.min);\n              } else if (e.key === \"End\") {\n                updateValue(state, state.max);\n              } else if (e.key === \"PageDown\") {\n                state.decrement(state, true);\n              } else if (e.key === \"PageUp\") {\n                state.increment(state, true);\n              }\n              readRangeData(state);\n              updatePinPosition(state);\n            }\n          },\n        !attrs.disabled &&\n          pointerStartMoveEvent.reduce((acc, evt) => (\n            acc[k[`on${evt}`]] = onInitDrag,\n            acc\n          ), {}),\n        attrs.events\n          ? attrs.events\n          : null,\n        hasTicks\n          ? { step: stepCount }\n          : null\n      ),\n      attrs.icon\n        ? h(\"div\",\n          {\n            className: classes.thumb,\n            key: \"icon\"\n          },\n          attrs.icon\n        )\n        : null\n      ),\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartRest,\n          key: \"trackPartRest\",\n          style: {\n            flex: flexRestCss,\n            msFlex: flexRestCss,\n            WebkitFlex: flexRestCss,\n            maxWidth: (flexRestValue * 100) + \"%\" // for IE Edge\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      hasTicks && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.ticks,\n            key: \"ticks\"\n          },\n          generateTickMarks(h, stepCount, state.stepSize, state.value())\n        )\n        : null,\n      hasTicks && attrs.pin && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.pin,\n            key: \"pin\",\n            value: state.value()\n          }\n        )\n        : null\n    ]\n  );\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n\n  const min = attrs.min !== undefined ? attrs.min : 0;\n  const max = attrs.max !== undefined ? attrs.max : 100;\n  const range = max - min;\n  const stepSize = attrs.stepSize !== undefined\n    ? attrs.stepSize\n    : 1;\n  const defaultValue = attrs.defaultValue !== undefined\n    ? attrs.defaultValue\n    : attrs.value !== undefined\n      ? attrs.value\n      : 0;\n  const previousValue = createStream(undefined);\n  const isActive = createStream(false);\n  const hasFocus = createStream(false);\n  const isDragging = createStream(false);\n  const fraction = createStream(min);\n  const value = createStream(0);\n  const normalizeFactor = 1 / stepSize;\n\n  const setValue = (v, shouldNotify = false) => {\n    if (v < min) v = min;\n    if (v > max) v = max;\n    value(stepSize\n      ? Math.round(v * normalizeFactor) / normalizeFactor\n      : v\n    );\n    fraction((value() - min) / range);\n    if (shouldNotify && attrs.onChange) {\n      attrs.onChange({\n        value: value()\n      });\n    }\n    previousValue(v);\n  };\n\n  const increment = (state, useLargeStep) =>\n    updateValue(state, value() + (useLargeStep ? 10 : 1) * (stepSize || 1));\n\n  const decrement = (state, useLargeStep) =>\n    updateValue(state, value() - (useLargeStep ? 10 : 1) * (stepSize || 1));\n  \n  setValue(defaultValue);\n  \n  return {\n    min,\n    max,\n    stepSize,\n    fraction,\n    // DOM elements\n    trackEl: null,\n    controlEl: null,\n    pinEl: null,\n    // functions\n    setValue,\n    increment,\n    decrement, \n    // streams\n    isDragging,\n    isActive,\n    value,\n    previousValue,\n    hasFocus,\n    // coordinates\n    controlWidth: 0,\n    rangeWidth: 0,\n    rangeOffset: 0,\n    clickOffset: 0,\n    redrawOnUpdate: createStream.merge([isActive, value])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.trackEl = dom.querySelector(`.${classes.track}`);\n  state.controlEl = dom.querySelector(`.${classes.control}`);\n  state.pinEl = dom.querySelector(`.${classes.pin}`);\n\n  readRangeData(state);\n\n  if (attrs.pin) {\n    setTimeout(() => {\n      updateValue(state, state.value());\n    }, 0);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.value !== undefined) {\n    if (state.previousValue() !== attrs.value) {\n      state.previousValue(attrs.value);\n      setTimeout(() => state.setValue(state.previousValue()), 0); // perform in next tick to play nice with React\n    }\n  }\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.disabled ? classes.isDisabled : null,\n        attrs.pin ? classes.hasPin : null,\n        interactiveTrack ? classes.hasTrack : null,\n        state.isActive() ? classes.isActive : null,\n        state.hasFocus() ? classes.hasFocus : null,\n        state.fraction() === 0 ? classes.isAtMin : null,\n        hasTicks ? classes.hasTicks : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return createSlider(vnode, { h, k, hasTicks, interactiveTrack });\n};\n\n\n"],"names":["component","control","label","pin","thumb","tick","ticks","track","trackBar","trackBarValue","trackPart","trackPartRest","trackPartValue","hasFocus","hasPin","hasTicks","hasTrack","isActive","isAtMin","isDisabled","tickValue","focusElement","deFocus","state","blur","undefined","positionFromEvent","e","isVertical","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","h","stepCount","stepSize","items","stepWithValue","s","push","className","classes","join","key","readRangeData","isClient","controlWidth","parseFloat","getStyle","element","prop","trackEl","getBoundingClientRect","width","styles","window","getComputedStyle","rangeOffset","marginLeft","calculateClickOffset","controlOffset","clickOffset","handlePosEvent","pos","min","max","startDrag","attrs","isDragging","preventDefault","drag","endDrag","pointerMoveEvent","forEach","evt","removeEventListener","pointerEndMoveEvent","addEventListener","startTrack","initTrackEvent","createSlider","vnode","k","interactiveTrack","range","Math","parseInt","onStartTrack","onInitDrag","controlPos","initControlEvent","flexValueCss","flexRestValue","flexRestCss","Object","assign","disabled","pointerStartMoveEvent","reduce","acc","flex","msFlex","WebkitFlex","tabindex","onfocus","el","focus","onblur","onkeydown","decrement","shiftKey","increment","events","step","icon","maxWidth","createStream","defaultValue","previousValue","normalizeFactor","v","shouldNotify","round","onChange","useLargeStep","redrawOnUpdate","merge","dom","querySelector","setTimeout","keys","filterSupportedAttributes","tone","class","renderer"],"mappings":"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"}