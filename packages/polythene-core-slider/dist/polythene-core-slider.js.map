{"version":3,"file":"polythene-core-slider.js","sources":["../src/slider.js","../../polythene-css-classes/slider.js"],"sourcesContent":["import { isTouch, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, isClient, filterSupportedAttributes, getStyle } from \"polythene-core\";\nimport classes from \"polythene-css-classes/slider\";\n\nconst MAX_TICKS = 100;\nlet focusElement;\n\nconst deFocus = state => {\n  if (focusElement) {\n    focusElement.blur();\n  }\n  focusElement = undefined;\n  state.hasFocus(false);\n};\n\nconst focus = (state, el) => {\n  deFocus(state);\n  focusElement = el;\n  state.hasFocus(true);\n};\n\nconst positionFromEvent = (e, isVertical) => (\n  // isVertical not yet implemented\n  isTouch && e.touches\n    ? isVertical ? e.touches[0].pageY : e.touches[0].pageX\n    : isVertical ? e.pageY : e.pageX);\n\nconst updatePinPosition = state => {\n  if (state.controlEl && state.pinEl) {\n    const left = state.fraction() * state.rangeWidth;\n    state.pinEl.style.left = left + \"px\";\n  }\n};\n\nconst updateValue = (state, value) => {\n  state.setValue(value, true);\n  updatePinPosition(state);\n};\n\nconst generateTickMarks = (h, stepCount, stepSize, value) => {\n  const items = [];\n  const stepWithValue = value / stepSize;\n  let s = 0;\n  while (s < stepCount + 1) {\n    items.push(h(\"div\", {\n      className: s <= stepWithValue\n        ? [classes.tick, classes.tickValue].join(\" \")\n        : classes.tick,\n      key: `tick-${s}`\n    }));\n    s++;\n  }\n  return items;\n};\n\nconst readRangeData = state => {\n  if (state.controlEl && isClient) {\n    // range is from the far left to the far right minus the thumb width (max x is at the left side of the thumb)\n    state.controlWidth = parseFloat(getStyle({ element: state.controlEl, prop: \"width\" }));\n    state.rangeWidth = state.trackEl.getBoundingClientRect().width - state.controlWidth;\n    const styles = window.getComputedStyle(state.trackEl);\n    state.rangeOffset = parseFloat(styles.marginLeft);\n  }\n};\n\nconst calculateClickOffset = (state, controlOffset = 0) => {\n  state.clickOffset = state.trackEl.getBoundingClientRect().left - (state.rangeOffset - state.controlWidth / 2) + controlOffset;\n};\n\nconst initControlEvent = (state, e) => {\n  const controlPos = state.controlEl.getBoundingClientRect().left;\n  const eventPos = positionFromEvent(e);\n  const controlOffset = eventPos - controlPos - state.controlWidth / 2;\n  calculateClickOffset(state, controlOffset);\n};\n\nconst initTrackEvent = (state) =>\n  calculateClickOffset(state, 0);\n\nconst handlePosEvent = (state, e) => {\n  const pos = positionFromEvent(e) - state.clickOffset;\n  const value = state.min + ((pos - state.rangeOffset) / state.rangeWidth) * (state.max - state.min);\n  updateValue(state, value);\n};\n\nconst startDrag = (state, attrs, e) => {\n  if (state.isDragging()) return;\n  e.preventDefault();\n  state.isDragging(true);\n  state.isActive(true);\n  deFocus(state);\n\n  const drag = e => {\n    if (!state.isDragging()) return;\n    handlePosEvent(state, e);\n  };\n\n  const endDrag = () => {\n    if (!state.isDragging()) return;\n    deFocus(state);\n    if (isClient) {\n      pointerMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, drag));\n      pointerEndMoveEvent.forEach(evt =>\n        window.removeEventListener(evt, endDrag));\n    }\n    state.isDragging(false);\n    state.isActive(false);\n  };\n\n  if (isClient) {\n    pointerMoveEvent.forEach(evt =>\n      window.addEventListener(evt, drag));\n    pointerEndMoveEvent.forEach(evt =>\n      window.addEventListener(evt, endDrag));\n  }\n  readRangeData(state);\n\n  if (attrs.pin) {\n    updatePinPosition(state);\n  }\n};\n\nconst startTrack = (state, attrs, e) => {\n  e.preventDefault();\n  if (state.isDragging()) {\n    return;\n  }\n  readRangeData(state);\n  initTrackEvent(state);\n  handlePosEvent(state, e);\n  startDrag(state, attrs, e);\n};\n\nconst createSlider = (vnode, { h, k, hasTicks, interactiveTrack }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const fraction = state.fraction();\n  const range = state.max - state.min;\n  const stepCount = Math.min(MAX_TICKS, parseInt(range / state.stepSize, 10));\n\n  const onStartTrack = e => (\n    startTrack(state, attrs, e)\n  );\n\n  const onInitDrag = e => {\n    readRangeData(state);\n    initControlEvent(state, e);\n    startDrag(state, attrs, e);\n  };\n\n  const flexValueCss =  fraction + \" 1 0%\";\n  const flexRestValue = 1 - fraction;\n  const flexRestCss =   flexRestValue + \" 1 0%\";\n\n  return h(\"div\",\n    Object.assign(\n      {},\n      { className: classes.track },\n      interactiveTrack && !attrs.disabled && pointerStartMoveEvent.reduce((acc, evt) => (\n        acc[k[`on${evt}`]] = onStartTrack,\n        acc\n      ), {})\n    ),\n    [\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartValue,\n          key: \"trackPartValue\",\n          style: {\n            flex: flexValueCss,\n            msFlex: flexValueCss,\n            WebkitFlex: flexValueCss\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      h(\"div\", Object.assign(\n        {},\n        {\n          className: classes.control,\n          key: \"control\"\n        },\n        attrs.disabled\n          ? { disabled: true }\n          : {\n            [k.tabindex]: attrs[k.tabindex] || 0,\n            [k.onfocus]: () => focus(state, state.controlEl),\n            [k.onblur]: () => deFocus(state),\n            [k.onkeydown]: e => {\n              if (e.key !== \"Tab\") {\n                e.preventDefault();\n              }\n              if (e.key === \"Escape\" || e.key === \"Esc\") {\n                state.controlEl.blur(e);\n              } else if (e.key === \"ArrowLeft\" || e.key === \"ArrowDown\" || e.key === \"Left\" || e.key === \"Down\") {\n                state.decrement(state, e.shiftKey);\n              } else if (e.key === \"ArrowRight\" || e.key === \"ArrowUp\" || e.key === \"Right\" || e.key === \"Up\") {\n                state.increment(state, e.shiftKey);\n              } else if (e.key === \"Home\") {\n                updateValue(state, state.min);\n              } else if (e.key === \"End\") {\n                updateValue(state, state.max);\n              } else if (e.key === \"PageDown\") {\n                state.decrement(state, true);\n              } else if (e.key === \"PageUp\") {\n                state.increment(state, true);\n              }\n              readRangeData(state);\n              updatePinPosition(state);\n            }\n          },\n        !attrs.disabled &&\n          pointerStartMoveEvent.reduce((acc, evt) => (\n            acc[k[`on${evt}`]] = onInitDrag,\n            acc\n          ), {}),\n        attrs.events\n          ? attrs.events\n          : null,\n        hasTicks\n          ? { step: stepCount }\n          : null\n      ),\n      attrs.icon\n        ? h(\"div\",\n          {\n            className: classes.thumb,\n            key: \"icon\"\n          },\n          attrs.icon\n        )\n        : null\n      ),\n      h(\"div\",\n        {\n          className: classes.trackPart + \" \" + classes.trackPartRest,\n          key: \"trackPartRest\",\n          style: {\n            flex: flexRestCss,\n            msFlex: flexRestCss,\n            WebkitFlex: flexRestCss,\n            maxWidth: (flexRestValue * 100) + \"%\" // for IE Edge\n          }\n        },\n        h(\"div\", { className: classes.trackBar },\n          h(\"div\", { className: classes.trackBarValue })\n        )\n      ),\n      hasTicks && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.ticks,\n            key: \"ticks\"\n          },\n          generateTickMarks(h, stepCount, state.stepSize, state.value())\n        )\n        : null,\n      hasTicks && attrs.pin && !attrs.disabled\n        ? h(\"div\",\n          {\n            className: classes.pin,\n            key: \"pin\",\n            value: state.value()\n          }\n        )\n        : null\n    ]\n  );\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n\n  const min = attrs.min !== undefined ? attrs.min : 0;\n  const max = attrs.max !== undefined ? attrs.max : 100;\n  const range = max - min;\n  const stepSize = attrs.stepSize !== undefined\n    ? attrs.stepSize\n    : 1;\n  const defaultValue = attrs.defaultValue !== undefined\n    ? attrs.defaultValue\n    : attrs.value !== undefined\n      ? attrs.value\n      : 0;\n  const previousValue = createStream(undefined);\n  const isActive = createStream(false);\n  const hasFocus = createStream(false);\n  const isDragging = createStream(false);\n  const fraction = createStream(min);\n  const value = createStream(0);\n  const normalizeFactor = 1 / stepSize;\n\n  const setValue = (v, shouldNotify = false) => {\n    if (v < min) v = min;\n    if (v > max) v = max;\n    value(stepSize\n      ? Math.round(v * normalizeFactor) / normalizeFactor\n      : v\n    );\n    fraction((value() - min) / range);\n    if (shouldNotify && attrs.onChange) {\n      attrs.onChange({\n        value: value()\n      });\n    }\n    previousValue(v);\n  };\n\n  const increment = (state, useLargeStep) =>\n    updateValue(state, value() + (useLargeStep ? 10 : 1) * (stepSize || 1));\n\n  const decrement = (state, useLargeStep) =>\n    updateValue(state, value() - (useLargeStep ? 10 : 1) * (stepSize || 1));\n  \n  setValue(defaultValue);\n  \n  return {\n    min,\n    max,\n    stepSize,\n    fraction,\n    // DOM elements\n    trackEl: null,\n    controlEl: null,\n    pinEl: null,\n    // functions\n    setValue,\n    increment,\n    decrement, \n    // streams\n    isDragging,\n    isActive,\n    value,\n    previousValue,\n    hasFocus,\n    // coordinates\n    controlWidth: 0,\n    rangeWidth: 0,\n    rangeOffset: 0,\n    clickOffset: 0,\n    redrawOnUpdate: createStream.merge([isActive, value])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.trackEl = dom.querySelector(`.${classes.track}`);\n  state.controlEl = dom.querySelector(`.${classes.control}`);\n  state.pinEl = dom.querySelector(`.${classes.pin}`);\n\n  readRangeData(state);\n\n  if (attrs.pin) {\n    setTimeout(() => {\n      updateValue(state, state.value());\n    }, 0);\n  }\n};\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.value !== undefined) {\n    if (state.previousValue() !== attrs.value) {\n      state.previousValue(attrs.value);\n      setTimeout(() => state.setValue(state.previousValue()), 0); // perform in next tick to play nice with React\n    }\n  }\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs),\n    attrs.testId && { \"data-test-id\": attrs.testId },\n    {\n      className: [\n        classes.component,\n        attrs.disabled ? classes.isDisabled : null,\n        attrs.pin ? classes.hasPin : null,\n        interactiveTrack ? classes.hasTrack : null,\n        state.isActive() ? classes.isActive : null,\n        state.hasFocus() ? classes.hasFocus : null,\n        state.fraction() === 0 ? classes.isAtMin : null,\n        hasTicks ? classes.hasTicks : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const hasTicks = attrs.ticks !== undefined && attrs.ticks !== false;\n  const interactiveTrack = (attrs.interactiveTrack !== undefined) ? attrs.interactiveTrack : true;\n  return createSlider(vnode, { h, k, hasTicks, interactiveTrack });\n};\n\n\n","\nexport default {\n  component:      \"pe-slider\",\n\n  // elements\n  control:        \"pe-slider__control\",\n  label:          \"pe-slider__label\",\n  pin:            \"pe-slider__pin\",\n  thumb:          \"pe-slider__thumb\",\n  tick:           \"pe-slider__tick\",\n  ticks:          \"pe-slider__ticks\",\n  track:          \"pe-slider__track\",\n  trackBar:       \"pe-slider__track-bar\",\n  trackBarValue:  \"pe-slider__track-bar-value\",\n  trackPart:      \"pe-slider__track-part\",\n  trackPartRest:  \"pe-slider__track-rest\",\n  trackPartValue: \"pe-slider__track-value\",\n\n  // states\n  hasFocus:       \"pe-slider--focus\",\n  hasPin:         \"pe-slider--pin\",\n  hasTicks:       \"pe-slider--ticks\",\n  hasTrack:       \"pe-slider--track\",\n  isActive:       \"pe-slider--active\",\n  isAtMin:        \"pe-slider--min\",\n  isDisabled:     \"pe-slider--disabled\",\n  tickValue:      \"pe-slider__tick--value\",\n};\n"],"names":["focusElement","component","control","label","pin","thumb","tick","ticks","track","trackBar","trackBarValue","trackPart","trackPartRest","trackPartValue","hasFocus","hasPin","hasTicks","hasTrack","isActive","isAtMin","isDisabled","tickValue","deFocus","state","blur","undefined","positionFromEvent","e","isVertical","isTouch","touches","pageY","pageX","updatePinPosition","controlEl","pinEl","left","fraction","rangeWidth","style","updateValue","value","setValue","generateTickMarks","h","stepCount","stepSize","items","stepWithValue","s","push","className","classes","join","key","readRangeData","isClient","controlWidth","parseFloat","getStyle","element","prop","trackEl","getBoundingClientRect","width","styles","window","getComputedStyle","rangeOffset","marginLeft","calculateClickOffset","controlOffset","clickOffset","handlePosEvent","pos","min","max","startDrag","attrs","isDragging","preventDefault","drag","endDrag","pointerMoveEvent","forEach","evt","removeEventListener","pointerEndMoveEvent","addEventListener","startTrack","initTrackEvent","createSlider","vnode","k","interactiveTrack","range","Math","parseInt","onStartTrack","onInitDrag","controlPos","initControlEvent","flexValueCss","flexRestValue","flexRestCss","_extends","disabled","pointerStartMoveEvent","reduce","acc","flex","msFlex","WebkitFlex","tabindex","onfocus","el","focus","onblur","onkeydown","decrement","shiftKey","increment","events","step","icon","maxWidth","createStream","defaultValue","previousValue","normalizeFactor","v","shouldNotify","round","onChange","useLargeStep","redrawOnUpdate","merge","dom","querySelector","setTimeout","keys","filterSupportedAttributes","testId","tone","class","renderer"],"mappings":"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"}