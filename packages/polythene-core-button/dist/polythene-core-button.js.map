{"version":3,"file":"polythene-core-button.js","sources":["../../polythene-css-classes/button.js","../src/button.js","../src/raised-button.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n};\n","import { filterSupportedAttributes, isClient, deprecation, iconDropdownDown } from \"polythene-core\";\nimport classes from \"polythene-css-classes/button\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"a\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const dom = createStream(null);\n  const focus = createStream(false);\n  const inactive = createStream(false);\n  const mouseover = createStream(false);\n  return {\n    dom,\n    focus,\n    inactive,\n    mouseover,\n    redrawOnUpdate: createStream.merge([dom, focus, inactive])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.borders !== undefined) {\n    deprecation(\"Button\", { option: \"borders\", newOption: \"border\" });\n  }\n  state.dom(vnode.dom);\n  \n  if (isClient) {\n    const handleInactivate = () => (\n      state.inactive(true),\n      setTimeout(() => (\n        state.inactive(false)\n      ), attrs.inactivate * 1000)\n    );\n\n    const onFocus = () => state.focus(!state.mouseover());\n    const onBlur = () => state.focus(false);\n    const onMouseOver = () => state.mouseover(true);\n    const onMouseOut = () => state.mouseover(false);\n    const onClick = handleInactivate;\n\n    vnode.dom.addEventListener(\"focus\", onFocus, false);\n    vnode.dom.addEventListener(\"blur\", onBlur, false);\n    vnode.dom.addEventListener(\"mouseover\", onMouseOver, false);\n    vnode.dom.addEventListener(\"mouseout\", onMouseOut, false);\n    vnode.dom.addEventListener(\"click\", onClick, false);\n\n    state.removeEventListeners = () => (\n      vnode.dom.removeEventListener(\"focus\", onFocus, false),\n      vnode.dom.removeEventListener(\"blur\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseover\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseout\", onMouseOut, false),\n      vnode.dom.removeEventListener(\"click\", onClick, false)\n    );\n  }\n};\n\nexport const onUnMount = vnode =>\n  vnode.state.removeEventListeners && vnode.state.removeEventListeners();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const disabled = attrs.disabled;\n  const inactive = attrs.inactive || state.inactive();\n  const onClickHandler = attrs.events && attrs.events[k.onclick];\n  const onKeyUpHandler = (attrs.events && attrs.events[k.onkeyup]) || onClickHandler;\n\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs, { add: [k.formaction, \"type\"], remove: [\"style\"] }), // Set style on content, not on component\n    {\n      className: [\n        classes.super,\n        attrs.parentClassName || classes.component,\n        attrs.contained ? classes.contained : null,\n        attrs.raised ? classes.contained : null,\n        attrs.raised ? classes.raised : null,\n        attrs.selected ? classes.selected : null,\n        attrs.highLabel ? classes.highLabel : null,\n        attrs.extraWide ? classes.extraWide : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        attrs.separatorAtStart ? classes.separatorAtStart : null,\n        (attrs.border || attrs.borders) ? classes.border : null,\n        attrs.dropdown ? classes.hasDropdown : null,\n        attrs.dropdown\n          ? attrs.dropdown.open\n            ? classes.dropdownOpen\n            : classes.dropdownClosed\n          : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events,\n    inactive ? null : {\n      [k.tabindex]: disabled || inactive\n        ? -1\n        : attrs[k.tabindex] || 0,\n      [k.onclick]: onClickHandler,\n      [k.onkeyup]: e => {\n        if (e.keyCode === 13 && state.focus()) {\n          state.focus(false);\n          if (onKeyUpHandler) {\n            onKeyUpHandler(e);\n          }\n        }\n      }\n    },\n    attrs.url,\n    disabled ? { disabled: true } : null\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Ripple, Icon }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const noink = attrs.ink !== undefined && attrs.ink === false;\n  const disabled = attrs.disabled;\n  const children = attrs.children || vnode.children;\n  const label = attrs.content\n    ? attrs.content\n    : attrs.label !== undefined\n      ? typeof attrs.label === \"object\"\n        ? attrs.label\n        : h(\"div\",\n          { className: classes.label },\n          h(\"div\",\n            {\n              className: classes.textLabel,\n              style: attrs.textStyle\n            },\n            attrs.label\n          )\n        )\n      : children\n        ? children\n        : null;\n  const noWash = disabled || (attrs.wash !== undefined && !attrs.wash);\n  return h(\"div\",\n    {\n      [k.class]: classes.content,\n      style: attrs.style\n    },\n    [\n      attrs.shadowComponent // \"protected\" option, used by raised-button\n        ? attrs.shadowComponent\n        : null,\n      // Ripple\n      disabled || noink || !Ripple || (h.displayName === \"react\" ? !state.dom() : false)\n        // somehow Mithril does not update when the dom stream is updated\n        ? null\n        : h(Ripple, Object.assign({},\n          {\n            key: \"ripple\",\n            target: state.dom()\n          },\n          attrs.ripple\n        )),\n      // hover\n      noWash ? null : h(\"div\", { key: \"wash\", className: classes.wash }),\n      label,\n      attrs.dropdown\n        ? h(Icon,\n          {\n            className: classes.dropdown,\n            key: \"dropdown\",\n            svg: { content: h.trust(iconDropdownDown) }\n          }\n        )\n        : null\n    ]\n  );\n};\n","import { isServer, pointerStartMoveEvent, pointerEndMoveEvent, deprecation } from \"polythene-core\";\n\n// Don't export 'getElement': it will be the wrapped Button component (set in polythene-xxx-button)\n\nconst MAX_SHADOW_DEPTH = 5;\n\nlet tapStart,\n  tapEndAll = () => {},\n  downButtons = [];\n\nconst animateZ = (which, vnode) => {\n  const shadowDepthBase = vnode.state.shadowDepthBase;\n  const increase = vnode.attrs.increase || 1;\n  const shadowDepth = vnode.state.shadowDepth();\n  const newShadowDepth = which === \"down\" && shadowDepthBase < MAX_SHADOW_DEPTH\n    ? Math.min(shadowDepthBase + increase, MAX_SHADOW_DEPTH)\n    : which === \"up\"\n      ? Math.max(shadowDepth - increase, shadowDepthBase)\n      : shadowDepth;\n  if (newShadowDepth !== shadowDepth) {\n    vnode.state.shadowDepth(newShadowDepth);\n  }\n};\n\nconst tapHandler = (which, vnode) => {\n  if (which === \"down\") {\n    downButtons.push(Object.assign({}, vnode));\n  }\n  const animateOnTap = vnode.attrs.animateOnTap !== false ? true : false;\n  if (animateOnTap) {\n    animateZ(which, vnode);\n  }\n};\n\nconst initTapEvents = vnode => {\n  if (isServer) return;\n  tapStart = () => tapHandler(\"down\", vnode);\n  tapEndAll = () => {\n    downButtons.map(buttonVnode =>\n      tapHandler(\"up\", buttonVnode));\n    downButtons = [];\n  };\n  pointerStartMoveEvent.forEach(evt =>\n    vnode.dom.addEventListener(evt, tapStart));\n  pointerEndMoveEvent.forEach(evt =>\n    document.addEventListener(evt, tapEndAll));\n};\n\nconst clearTapEvents = vnode => {\n  pointerStartMoveEvent.forEach(evt =>\n    vnode.dom.removeEventListener(evt, tapStart));\n  pointerEndMoveEvent.forEach(evt =>\n    document.removeEventListener(evt, tapEndAll));\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const shadowDepthBase = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z !== undefined // deprecated\n      ? attrs.z\n      : 1; \n  const shadowDepth = createStream(shadowDepthBase);\n  const tapEventsInited = createStream(false);\n  return {\n    shadowDepthBase,\n    shadowDepth,\n    tapEventsInited,\n    redrawOnUpdate: createStream.merge([shadowDepth])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.z !== undefined) {\n    deprecation(\"RaisedButton\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n  if (!state.tapEventsInited()) {\n    initTapEvents(vnode);\n    state.tapEventsInited(true);\n  }\n};\n\nexport const onUnMount = vnode => {\n  if (vnode.state.tapEventsInited()) {\n    clearTapEvents(vnode);\n  }\n};\n\nexport const createProps = (vnode, { renderer: h, Shadow }) => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const children = attrs.children || vnode.children || [];\n  return Object.assign(\n    {},\n    {\n      raised: true,\n      animateOnTap: false,\n      shadowComponent: h(Shadow, {\n        shadowDepth: attrs.disabled ? 0 : state.shadowDepth,\n        animated: true\n      }),\n      wash: attrs.wash !== undefined\n        ? attrs.wash\n        : false,\n      children\n    },\n    attrs\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n"],"names":["component","super","row","content","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","getElement","vnode","attrs","element","getInitialState","createStream","dom","focus","mouseover","redrawOnUpdate","merge","onMount","state","borders","undefined","deprecation","option","newOption","isClient","handleInactivate","setTimeout","inactivate","onFocus","onBlur","onMouseOver","onMouseOut","onClick","addEventListener","removeEventListeners","removeEventListener","onUnMount","createProps","k","keys","onClickHandler","events","onclick","onKeyUpHandler","onkeyup","filterSupportedAttributes","add","formaction","remove","className","classes","parentClassName","open","tone","class","join","tabindex","e","keyCode","url","createContent","h","renderer","Ripple","Icon","noink","ink","children","style","textStyle","noWash","shadowComponent","displayName","key","target","ripple","svg","trust","iconDropdownDown","MAX_SHADOW_DEPTH","tapStart","tapEndAll","downButtons","animateZ","which","shadowDepthBase","increase","shadowDepth","newShadowDepth","Math","min","max","tapHandler","push","_extends","animateOnTap","initTapEvents","isServer","map","buttonVnode","pointerStartMoveEvent","forEach","evt","pointerEndMoveEvent","document","clearTapEvents","z","tapEventsInited","Shadow","animated"],"mappings":"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"}