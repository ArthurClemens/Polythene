{"version":3,"file":"polythene-core-button.js","sources":["../../polythene-css-classes/button.js","../src/button.js","../src/raised-button.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n};\n","import { filterSupportedAttributes, isClient, deprecation, iconDropdownDown } from \"polythene-core\";\nimport classes from \"polythene-css-classes/button\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"a\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const dom = createStream(null);\n  const focus = createStream(false);\n  const inactive = createStream(false);\n  const mouseover = createStream(false);\n  return {\n    dom,\n    focus,\n    inactive,\n    mouseover,\n    redrawOnUpdate: createStream.merge([dom, focus, inactive])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.borders !== undefined) {\n    deprecation(\"Button\", { option: \"borders\", newOption: \"border\" });\n  }\n  state.dom(vnode.dom);\n  \n  if (isClient) {\n    const handleInactivate = () => (\n      state.inactive(true),\n      setTimeout(() => (\n        state.inactive(false)\n      ), attrs.inactivate * 1000)\n    );\n\n    const onFocus = () => state.focus(!state.mouseover());\n    const onBlur = () => state.focus(false);\n    const onMouseOver = () => state.mouseover(true);\n    const onMouseOut = () => state.mouseover(false);\n    const onClick = handleInactivate;\n\n    vnode.dom.addEventListener(\"focus\", onFocus, false);\n    vnode.dom.addEventListener(\"blur\", onBlur, false);\n    vnode.dom.addEventListener(\"mouseover\", onMouseOver, false);\n    vnode.dom.addEventListener(\"mouseout\", onMouseOut, false);\n    vnode.dom.addEventListener(\"click\", onClick, false);\n\n    state.removeEventListeners = () => (\n      vnode.dom.removeEventListener(\"focus\", onFocus, false),\n      vnode.dom.removeEventListener(\"blur\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseover\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseout\", onMouseOut, false),\n      vnode.dom.removeEventListener(\"click\", onClick, false)\n    );\n  }\n};\n\nexport const onUnMount = vnode =>\n  vnode.state.removeEventListeners && vnode.state.removeEventListeners();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const disabled = attrs.disabled;\n  const inactive = attrs.inactive || state.inactive();\n  const onClickHandler = attrs.events && attrs.events[k.onclick];\n  const onKeyUpHandler = (attrs.events && attrs.events[k.onkeyup]) || onClickHandler;\n\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs, { add: [k.formaction, \"type\"], remove: [\"style\"] }), // Set style on content, not on component\n    {\n      className: [\n        classes.super,\n        attrs.parentClassName || classes.component,\n        attrs.contained ? classes.contained : null,\n        attrs.raised ? classes.contained : null,\n        attrs.raised ? classes.raised : null,\n        attrs.selected ? classes.selected : null,\n        attrs.highLabel ? classes.highLabel : null,\n        attrs.extraWide ? classes.extraWide : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        attrs.separatorAtStart ? classes.separatorAtStart : null,\n        (attrs.border || attrs.borders) ? classes.border : null,\n        attrs.dropdown ? classes.hasDropdown : null,\n        attrs.dropdown\n          ? attrs.dropdown.open\n            ? classes.dropdownOpen\n            : classes.dropdownClosed\n          : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events,\n    inactive ? null : {\n      [k.tabindex]: disabled || inactive\n        ? -1\n        : attrs[k.tabindex] || 0,\n      [k.onclick]: onClickHandler,\n      [k.onkeyup]: e => {\n        if (e.keyCode === 13 && state.focus()) {\n          state.focus(false);\n          if (onKeyUpHandler) {\n            onKeyUpHandler(e);\n          }\n        }\n      }\n    },\n    attrs.url,\n    disabled ? { disabled: true } : null\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Ripple, Icon, Shadow }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const noink = attrs.ink !== undefined && attrs.ink === false;\n  const disabled = attrs.disabled;\n  const children = attrs.children || vnode.children;\n  const label = attrs.content\n    ? attrs.content\n    : attrs.label !== undefined\n      ? typeof attrs.label === \"object\"\n        ? attrs.label\n        : h(\"div\",\n          { className: classes.label },\n          h(\"div\",\n            {\n              className: classes.textLabel,\n              style: attrs.textStyle\n            },\n            attrs.label\n          )\n        )\n      : children\n        ? children\n        : null;\n  const noWash = disabled || (attrs.wash !== undefined && !attrs.wash);\n  return h(\"div\",\n    {\n      [k.class]: classes.content,\n      style: attrs.style\n    },\n    [\n      h(Shadow, {\n        key: \"shadow\",\n        shadowDepth: attrs.shadowDepth !== undefined\n          ? attrs.shadowDepth\n          : 0,\n        animated: true\n      }),\n      // Ripple\n      disabled || noink || !Ripple || (h.displayName === \"react\" ? !state.dom() : false)\n        // somehow Mithril does not update when the dom stream is updated\n        ? null\n        : h(Ripple, Object.assign({},\n          {\n            key: \"ripple\",\n            target: state.dom()\n          },\n          attrs.ripple\n        )),\n      // hover\n      noWash ? null : h(\"div\", { key: \"wash\", className: classes.wash }),\n      label,\n      attrs.dropdown\n        ? h(Icon,\n          {\n            className: classes.dropdown,\n            key: \"dropdown\",\n            svg: { content: h.trust(iconDropdownDown) }\n          }\n        )\n        : null\n    ]\n  );\n};\n","import { isServer, pointerStartMoveEvent, pointerEndMoveEvent, deprecation } from \"polythene-core\";\n\n// Don't export 'getElement': it will be the wrapped Button component (set in polythene-xxx-button)\n\nconst MAX_SHADOW_DEPTH = 5;\n\nlet tapStart,\n  tapEndAll = () => {},\n  downButtons = [];\n\nconst animateZ = (which, vnode) => {\n  const shadowDepthBase = vnode.state.shadowDepthBase;\n  const increase = vnode.attrs.increase || 1;\n  const shadowDepth = vnode.state.shadowDepth();\n  const newShadowDepth = which === \"down\" && shadowDepthBase < MAX_SHADOW_DEPTH\n    ? Math.min(shadowDepthBase + increase, MAX_SHADOW_DEPTH)\n    : which === \"up\"\n      ? Math.max(shadowDepth - increase, shadowDepthBase)\n      : shadowDepth;\n  if (newShadowDepth !== shadowDepth) {\n    vnode.state.shadowDepth(newShadowDepth);\n  }\n};\n\nconst tapHandler = (which, vnode) => {\n  if (which === \"down\") {\n    downButtons.push(Object.assign({}, vnode));\n  }\n  const animateOnTap = vnode.attrs.animateOnTap !== false ? true : false;\n  if (animateOnTap) {\n    animateZ(which, vnode);\n  }\n};\n\nconst initTapEvents = vnode => {\n  if (isServer) return;\n  tapStart = () => tapHandler(\"down\", vnode);\n  tapEndAll = () => {\n    downButtons.map(buttonVnode =>\n      tapHandler(\"up\", buttonVnode));\n    downButtons = [];\n  };\n  pointerStartMoveEvent.forEach(evt =>\n    vnode.dom.addEventListener(evt, tapStart));\n  pointerEndMoveEvent.forEach(evt =>\n    document.addEventListener(evt, tapEndAll));\n};\n\nconst clearTapEvents = vnode => {\n  pointerStartMoveEvent.forEach(evt =>\n    vnode.dom.removeEventListener(evt, tapStart));\n  pointerEndMoveEvent.forEach(evt =>\n    document.removeEventListener(evt, tapEndAll));\n};\n\nexport const getInitialState = (vnode, createStream) => {\n  const attrs = vnode.attrs;\n  const shadowDepthBase = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z !== undefined // deprecated\n      ? attrs.z\n      : 1; \n  const shadowDepth = createStream(shadowDepthBase);\n  const tapEventsInited = createStream(false);\n  return {\n    shadowDepthBase,\n    shadowDepth,\n    tapEventsInited,\n    redrawOnUpdate: createStream.merge([shadowDepth])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.z !== undefined) {\n    deprecation(\"RaisedButton\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n  if (!state.tapEventsInited()) {\n    initTapEvents(vnode);\n    state.tapEventsInited(true);\n  }\n};\n\nexport const onUnMount = vnode => {\n  if (vnode.state.tapEventsInited()) {\n    clearTapEvents(vnode);\n  }\n};\n\nexport const createProps = vnode => {\n  const attrs = vnode.attrs;\n  const state = vnode.state;\n  const children = attrs.children || vnode.children || [];\n  return Object.assign(\n    {},\n    {\n      raised: true,\n      animateOnTap: false,\n      wash: attrs.wash !== undefined\n        ? attrs.wash\n        : false,\n      children\n    },\n    attrs,\n    {\n      shadowDepth: attrs.disabled ? 0 : state.shadowDepth(),\n    }\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n"],"names":["component","super","row","content","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","getElement","vnode","attrs","element","getInitialState","createStream","dom","focus","mouseover","redrawOnUpdate","merge","onMount","state","borders","undefined","deprecation","option","newOption","isClient","handleInactivate","setTimeout","inactivate","onFocus","onBlur","onMouseOver","onMouseOut","onClick","addEventListener","removeEventListeners","removeEventListener","onUnMount","createProps","keys","k","onClickHandler","events","onclick","onKeyUpHandler","onkeyup","Object","assign","filterSupportedAttributes","add","formaction","remove","className","classes","parentClassName","open","tone","class","join","tabindex","e","keyCode","url","createContent","renderer","h","Ripple","Icon","Shadow","noink","ink","children","style","textStyle","noWash","key","shadowDepth","animated","displayName","target","ripple","svg","trust","iconDropdownDown","MAX_SHADOW_DEPTH","tapStart","tapEndAll","downButtons","animateZ","which","shadowDepthBase","increase","newShadowDepth","Math","min","max","tapHandler","push","animateOnTap","initTapEvents","isServer","map","buttonVnode","pointerStartMoveEvent","forEach","evt","pointerEndMoveEvent","document","clearTapEvents","z","tapEventsInited"],"mappings":"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"}