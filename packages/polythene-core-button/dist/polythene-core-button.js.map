{"version":3,"file":"polythene-core-button.js","sources":["../../polythene-css-classes/button.js","../src/button.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  focus:            \"pe-button__focus\",\n  label:            \"pe-button__label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  disabled:         \"pe-button--disabled\",\n  focused:          \"pe-button--focus\",\n  inactive:         \"pe-button--inactive\",\n  selected:         \"pe-button--selected\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  extraWide:        \"pe-button--extra-wide\",\n  separatorAtStart: \"pe-button--separator-start\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n};\n","import { filterSupportedAttributes, isClient, deprecation, iconDropdownDown } from \"polythene-core\";\nimport classes from \"polythene-css-classes/button\";\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"a\";\n\nexport const getInitialState = (vnode, createStream) => {\n  const dom = createStream(null);\n  const focus = createStream(false);\n  const inactive = createStream(false);\n  const mouseover = createStream(false);\n  return {\n    dom,\n    focus,\n    inactive,\n    mouseover,\n    redrawOnUpdate: createStream.merge([dom, focus, inactive])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.borders !== undefined) {\n    deprecation(\"Button\", \"borders\", \"border\");\n  }\n  state.dom(vnode.dom);\n  \n  if (isClient) {\n    const handleInactivate = () => (\n      state.inactive(true),\n      setTimeout(() => (\n        state.inactive(false)\n      ), attrs.inactivate * 1000)\n    );\n\n    const onFocus = () => state.focus(!state.mouseover());\n    const onBlur = () => state.focus(false);\n    const onMouseOver = () => state.mouseover(true);\n    const onMouseOut = () => state.mouseover(false);\n    const onClick = handleInactivate;\n\n    vnode.dom.addEventListener(\"focus\", onFocus, false);\n    vnode.dom.addEventListener(\"blur\", onBlur, false);\n    vnode.dom.addEventListener(\"mouseover\", onMouseOver, false);\n    vnode.dom.addEventListener(\"mouseout\", onMouseOut, false);\n    vnode.dom.addEventListener(\"click\", onClick, false);\n\n    state.removeEventListeners = () => (\n      vnode.dom.removeEventListener(\"focus\", onFocus, false),\n      vnode.dom.removeEventListener(\"blur\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseover\", onBlur, false),\n      vnode.dom.removeEventListener(\"mouseout\", onMouseOut, false),\n      vnode.dom.removeEventListener(\"click\", onClick, false)\n    );\n  }\n};\n\nexport const onUnMount = vnode =>\n  vnode.state.removeEventListeners && vnode.state.removeEventListeners();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const disabled = attrs.disabled;\n  const inactive = attrs.inactive || state.inactive();\n  const onClickHandler = attrs.events && attrs.events[k.onclick];\n  const onKeyUpHandler = (attrs.events && attrs.events[k.onkeyup]) || onClickHandler;\n\n  return Object.assign(\n    {}, \n    filterSupportedAttributes(attrs, { add: [k.formaction, \"type\"], remove: [\"style\"] }), // Set style on content, not on component\n    {\n      className: [\n        classes.super,\n        attrs.parentClassName || classes.component,\n        attrs.selected ? classes.selected : null,\n        attrs.highLabel ? classes.highLabel : null,\n        attrs.extraWide ? classes.extraWide : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        attrs.separatorAtStart ? classes.separatorAtStart : null,\n        (attrs.border || attrs.borders) ? classes.border : null,\n        state.focus() ? classes.focused : null,\n        attrs.dropdown ? classes.hasDropdown : null,\n        attrs.dropdown\n          ? attrs.dropdown.open\n            ? classes.dropdownOpen\n            : classes.dropdownClosed\n          : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    },\n    attrs.events,\n    inactive ? null : {\n      [k.tabindex]: disabled || inactive\n        ? -1\n        : attrs[k.tabindex] || 0,\n      [k.onclick]: onClickHandler,\n      [k.onkeyup]: e => {\n        if (e.keyCode === 13 && state.focus()) {\n          state.focus(false);\n          if (onKeyUpHandler) {\n            onKeyUpHandler(e);\n          }\n        }\n      }\n    },\n    attrs.url,\n    disabled ? { disabled: true } : null\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Ripple, Icon }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const noink = attrs.ink !== undefined && attrs.ink === false;\n  const disabled = attrs.disabled;\n  const children = attrs.children || vnode.children;\n  const label = attrs.content\n    ? attrs.content\n    : attrs.label !== undefined\n      ? typeof attrs.label === \"object\"\n        ? attrs.label\n        : h(\"div\", { className: classes.label }, attrs.label)\n      : children\n        ? children\n        : null;\n  const noWash = disabled || (attrs.wash !== undefined && !attrs.wash);\n  return h(\"div\",\n    {\n      [k.class]: classes.content,\n      style: attrs.style\n    },\n    [\n      attrs.shadowComponent // \"protected\" option, used by raised-button\n        ? attrs.shadowComponent\n        : null,\n      // Ripple\n      disabled || noink || !Ripple || (h.displayName === \"react\" ? !state.dom() : false)\n        // somehow Mithril does not update when the dom stream is updated\n        ? null\n        : h(Ripple, Object.assign({},\n          {\n            key: \"ripple\",\n            target: state.dom()\n          },\n          attrs.ripple\n        )),\n      // hover\n      noWash ? null : h(\"div\", { key: \"wash\", className: classes.wash }),\n      // focus\n      disabled ? null : h(\"div\", { key: \"focus\", className: classes.focus }),\n      label,\n      attrs.dropdown\n        ? h(Icon,\n          {\n            className: classes.dropdown,\n            key: \"dropdown\",\n            svg: { content: h.trust(iconDropdownDown) }\n          }\n        )\n        : null\n    ]\n  );\n};\n"],"names":["component","super","row","content","focus","label","wash","dropdown","border","disabled","focused","inactive","selected","hasDropdown","highLabel","extraWide","separatorAtStart","dropdownOpen","dropdownClosed","getElement","vnode","attrs","element","getInitialState","createStream","dom","mouseover","redrawOnUpdate","merge","onMount","state","borders","undefined","deprecation","isClient","handleInactivate","setTimeout","inactivate","onFocus","onBlur","onMouseOver","onMouseOut","onClick","addEventListener","removeEventListeners","removeEventListener","onUnMount","createProps","k","keys","onClickHandler","events","onclick","onKeyUpHandler","onkeyup","filterSupportedAttributes","add","formaction","remove","className","classes","parentClassName","open","tone","class","join","tabindex","e","keyCode","url","createContent","h","renderer","Ripple","Icon","noink","ink","children","noWash","style","shadowComponent","displayName","key","target","ripple","svg","trust","iconDropdownDown"],"mappings":"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"}