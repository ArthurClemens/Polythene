{"version":3,"file":"polythene-core-button.js","sources":["../../polythene-css-classes/button.js","../../polythene-css-classes/shadow.js","../src/index.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n  hasHover:         \"pe-button--has-hover\",\n};\n","\nexport default {\n  component:          \"pe-shadow\",\n      \n  // elements      \n  bottomShadow:       \"pe-shadow__bottom\",\n  topShadow:          \"pe-shadow__top\",\n\n  // states\n  animated:           \"pe-shadow--animated\",\n  depth_n:            \"pe-shadow--depth-\",\n  with_active_shadow: \"pe-with-active-shadow\",\n};\n","import { filterSupportedAttributes, iconDropdownDown } from \"polythene-core\";\nimport classes from \"polythene-css-classes/button\";\nimport shadowClasses from \"polythene-css-classes/shadow\";\nimport { getDepthClass } from \"polythene-core-shadow\";\n\nconst DEFAULT_SHADOW_DEPTH = 1;\n\nexport const _Button = ({ h, a, getRef, useState, useEffect, useRef, Ripple, Shadow, Icon, ...props }) => {\n  const events = props.events || {};\n  const [domElement, setDomElement] = useState();\n  const contentElement = useRef();\n  const [isInactive, setIsInactive] = useState(props.inactive);\n  const disabled = props.disabled;\n  const inactive = props.inactive || isInactive;\n  const onClickHandler = events[a.onclick] || (() => {});\n  const onKeyUpHandler = events[a.onkeyup] || onClickHandler;\n  const shadowDepth = props.raised\n    ? props.shadowDepth !== undefined ? props.shadowDepth : DEFAULT_SHADOW_DEPTH\n    : 0;\n  const animateOnTap = props.animateOnTap !== false ? true : false;\n\n  const handleInactivate = () => {\n    if (props.inactivate === undefined) {\n      return;\n    }\n    setIsInactive(true);\n    setTimeout(() => (\n      setIsInactive(false)\n    ), props.inactivate * 1000);\n  };\n\n  const hasHover = !disabled && !props.selected && (\n    props.raised\n      ? props.wash\n      : props.wash !== false\n  );\n\n  const handleMouseLeave = e => {\n    domElement.blur();\n    domElement.removeEventListener(\"mouseleave\", handleMouseLeave);\n  };\n\n  const componentProps = Object.assign({},\n    filterSupportedAttributes(props, { add: [a.formaction, \"type\"], remove: [\"style\"] }), // Set style on content, not on component\n    getRef(dom => {\n      if (!dom || domElement) {\n        return;\n      }\n      setDomElement(dom);\n      if (dom.querySelector) {\n        contentElement.current = dom.querySelector(`.${classes.content}`);\n      }\n      if (props.getRef) {\n        props.getRef(dom);\n      }\n    }),\n    props.testId && { \"data-test-id\": props.testId },\n    {\n      className: [\n        classes.super,\n        props.parentClassName || classes.component,\n        props.contained ? classes.contained : null,\n        // Raised button classes\n        props.raised ? classes.contained : null,\n        props.raised ? classes.raised : null,\n        props.raised && animateOnTap ? shadowClasses.with_active_shadow : null,\n        props.raised && animateOnTap ? getDepthClass(shadowDepth + 1) : null,\n        //\n        hasHover ? classes.hasHover : null,\n        props.selected ? classes.selected : null,\n        props.highLabel ? classes.highLabel : null,\n        props.extraWide ? classes.extraWide : null,\n        disabled ? classes.disabled : null,\n        inactive ? classes.inactive : null,\n        props.separatorAtStart ? classes.separatorAtStart : null,\n        (props.border || props.borders) ? classes.border : null,\n        props.dropdown ? classes.hasDropdown : null,\n        props.dropdown\n          ? props.dropdown.open\n            ? classes.dropdownOpen\n            : classes.dropdownClosed\n          : null,\n        props.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        props.tone === \"light\" ? \"pe-light-tone\" : null,\n        props.className || props[a.class],\n      ].join(\" \")\n    },\n    inactive ? null : {\n      [a.tabindex]: disabled || inactive\n        ? -1\n        : props[a.tabindex] || 0,\n      ...events,\n      [a.onmousedown]: e => (\n        domElement && domElement.addEventListener(\"mouseleave\", handleMouseLeave),\n        props.events && props.events[a.onmousedown] && props.events[a.onmousedown](e)\n      ),\n      [a.onclick]: e => (\n        document.activeElement === domElement && document.activeElement.blur(),\n        handleInactivate(e),\n        onClickHandler(e)\n      ),\n      [a.onkeyup]: e => {\n        if (onKeyUpHandler) {\n          onKeyUpHandler(e);\n        }\n      }\n    },\n    props.url,\n    disabled ? { disabled: true } : null,\n  );\n\n  const noink = props.ink !== undefined && props.ink === false;\n  const buttonContent = props.content\n    ? props.content\n    : props.label !== undefined\n      ? typeof props.label === \"object\"\n        ? props.label\n        : h(\"div\",\n          {\n            className: classes.label,\n            key: \"label\"\n          },\n          h(\"div\",\n            {\n              className: classes.textLabel,\n              style: props.textStyle\n            },\n            props.label\n          )\n        )\n      : props.children;\n  \n\n  return h(props.element || \"a\",\n    componentProps, [\n      props.before,\n      h(\"div\",\n        {\n          className: classes.content,\n          style: props.style\n        },\n        [\n          h(Shadow, {\n            key: \"shadow\",\n            shadowDepth: shadowDepth !== undefined\n              ? shadowDepth\n              : 0,\n            animated: true\n          }),\n          disabled || noink\n            ? null\n            : h(Ripple, Object.assign({},\n              {\n                key: \"ripple\",\n                target: contentElement.current\n              },\n              props.ripple\n            )),\n          h(\"div\", { key: \"wash\", className: classes.wash }),\n          \n          buttonContent,\n          props.dropdown\n            ? h(Icon,\n              {\n                className: classes.dropdown,\n                key: \"dropdown\",\n                svg: { content: h.trust(iconDropdownDown) }\n              }\n            )\n            : null\n        ]\n      ),\n      props.after,\n    ]\n  );\n};\n"],"names":["component","row","content","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","hasHover","h","a","getRef","useState","useRef","useEffect","Ripple","Shadow","Icon","props","events","domElement","setDomElement","contentElement","isInactive","setIsInactive","onClickHandler","onclick","onKeyUpHandler","onkeyup","shadowDepth","undefined","animateOnTap","handleMouseLeave","e","blur","removeEventListener","componentProps","_extends","filterSupportedAttributes","add","formaction","remove","dom","querySelector","current","classes","testId","className","parentClassName","shadowClasses","getDepthClass","borders","open","tone","join","tabindex","onmousedown","addEventListener","document","activeElement","inactivate","setTimeout","url","noink","ink","buttonContent","_typeof","key","style","textStyle","children","element","before","animated","target","ripple","svg","trust","iconDropdownDown","after"],"mappings":"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"}