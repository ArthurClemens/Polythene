!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e=e||self).polythene={},e["polythene-core"])}(this,function(e,t){"use strict";function l(e,t,l){return t in e?Object.defineProperty(e,t,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[t]=l,e}function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){l(e,t,n[t])})}return e}function a(e,t){if(null==e)return{};var l,n,i=function(e,t){if(null==e)return{};var l,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)l=a[n],t.indexOf(l)>=0||(i[l]=e[l]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)l=a[n],t.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(e,l)&&(i[l]=e[l])}return i}var r={component:"pe-textfield",counter:"pe-textfield__counter",error:"pe-textfield__error",errorPlaceholder:"pe-textfield__error-placeholder",focusHelp:"pe-textfield__help-focus",help:"pe-textfield__help",input:"pe-textfield__input",inputArea:"pe-textfield__input-area",label:"pe-textfield__label",optionalIndicator:"pe-textfield__optional-indicator",requiredIndicator:"pe-textfield__required-indicator",hasCounter:"pe-textfield--counter",hasFloatingLabel:"pe-textfield--floating-label",hasFullWidth:"pe-textfield--full-width",hideClear:"pe-textfield--hide-clear",hideSpinner:"pe-textfield--hide-spinner",hideValidation:"pe-textfield--hide-validation",isDense:"pe-textfield--dense",isRequired:"pe-textfield--required",stateDirty:"pe-textfield--dirty",stateDisabled:"pe-textfield--disabled",stateFocused:"pe-textfield--focused",stateInvalid:"pe-textfield--invalid",stateReadonly:"pe-textfield--readonly"},o={invalid:!1,message:void 0},u=function(e,t){var l=o;return e.isTouched()&&e.isInvalid()&&0===e.inputEl().value.length&&t.validateResetOnClear&&(e.isTouched(!1),e.isInvalid(!1),e.error(void 0)),!l.invalid&&t.counter&&(l=function(e,t){return{invalid:e.inputEl().value.length>t.counter,message:t.error}}(e,t)),!l.invalid&&e.inputEl()&&e.inputEl().checkValidity&&(l=function(e,t){return{invalid:!e.inputEl().checkValidity(),message:t.error}}(e,t)),!l.invalid&&t.validate&&(l=function(e,t){if(!e.inputEl())return o;var l=t.validate(e.inputEl().value);return{invalid:l&&!l.valid,message:l&&l.error}}(e,t)),l},d=function(e){var t=e.state,l=e.attrs,n=void 0!==l.valid?{invalid:!l.valid,message:l.error}:t.isTouched()||l.validateAtStart?u(t,l):o,i=t.isInvalid();t.error(n.message),n.invalid!==i&&t.isInvalid(n.invalid),n.invalid||t.error(void 0)},s=function(e){var t=e.state,l=e.attrs;if(l.onChange){var i=u(t,l);l.onChange({focus:t.hasFocus(),dirty:t.isDirty(),el:t.inputEl(),invalid:i.invalid,error:i.error,value:t.inputEl().value,setInputState:function(l){var i=void 0!==l.value&&l.value!==t.inputEl().value,a=void 0!==l.focus&&l.focus!==t.hasFocus();(i||a)&&t.setInputState(n({},l,{vnode:e}))}})}},c=function(e,t){return e.ignoreEvents&&-1!==e.ignoreEvents.indexOf(t)},p=Object.freeze({getElement:function(e){return e.attrs.element||"div"},getInitialState:function(e,t,l){var n=l.keys,i=e.attrs,a=void 0!==i.defaultValue&&null!==i.defaultValue?i.defaultValue.toString():void 0!==i.value&&null!==i.value?i.value.toString():"",r=t(null),o=t(null),u=t({}),d=t(i.error),s=t(!1),c=t(!1),p=t(""!==a),v=t(!1);return{defaultValue:a,didSetFocusTime:0,el:r,error:d,hasFocus:s,inputEl:o,isDirty:p,isInvalid:v,isTouched:c,previousValue:t(void 0),setInputState:u,showErrorPlaceholder:!!(void 0!==i.valid||i.validate||i.min||i.max||i[n.minlength]||i[n.maxlength]||i.required||i.pattern),redrawOnUpdate:t.merge([o,v,p])}},onMount:function(e){if(e.dom){var t=e.dom,l=e.state,n=e.attrs;l.el(t);var i=n.multiLine?"textarea":"input",a=t.querySelector(i);e.state.inputEl(a),l.inputEl().value=l.defaultValue,l.setInputState.map(function(e){var t=e.vnode,i=e.type,a=e.focus,r=e.value;t&&(void 0!==r&&(l.inputEl().value=r),void 0!==a&&(l.hasFocus(a),a?l.inputEl().focus():l.inputEl().blur()),"input"===i&&(n.validateOnInput||n.counter)&&l.isTouched(l.inputEl().value!==l.defaultValue),"input"!==i&&l.isTouched(l.inputEl().value!==l.defaultValue),"onblur"===i&&l.isTouched(!0),l.isDirty(""!==l.inputEl().value),d(t),s(t),l.previousValue(l.inputEl().value))}),s(e)}},onUpdate:function(e){var t=e.state,l=e.attrs;d(e);var n=t.inputEl(),i=void 0!==l.value&&null!==l.value?l.value:n?n.value:t.previousValue(),a=null==i?"":i.toString();n&&t.previousValue()!==a&&(n.value=a,t.previousValue(a),t.setInputState({vnode:e,type:"input"}))},createProps:function(e,l){var i=l.keys,a=e.state,o=e.attrs,u=a.isInvalid();return n({},t.filterSupportedAttributes(o),{className:[r.component,u?r.stateInvalid:"",a.hasFocus()?r.stateFocused:"",a.isDirty()?r.stateDirty:"",o.floatingLabel?r.hasFloatingLabel:"",o.disabled?r.stateDisabled:"",o[i.readonly]?r.stateReadonly:"",o.dense?r.isDense:"",o.required?r.isRequired:"",o.fullWidth?r.hasFullWidth:"",o.counter?r.hasCounter:"",!1!==o.hideSpinner&&void 0!==o.hideSpinner?r.hideSpinner:"",!1!==o.hideClear&&void 0!==o.hideClear?r.hideClear:"",o.hideValidation?r.hideValidation:"","dark"===o.tone?"pe-dark-tone":null,"light"===o.tone?"pe-light-tone":null,o.className||o[i.class]].join(" ")})},createContent:function(e,t){var o=t.renderer,u=t.keys,d=e.state,p=e.attrs,v=p.counter,f=p.disabled,h=p.error,y=p.events,b=p.help,m=p.label,g=p.multiLine,x=p.name,E=p.optionalIndicator,I=p.required,S=p.requiredIndicator,k=p.rows,O=p.type,_=(p.className,p.defaultValue,p.dense,p.floatingLabel,p.focusHelp,p.fullWidth,p.hideValidation,p.onChange,p.style,p.tone,p.valid,p.validate,p.validateAtStart,p.value,a(p,["counter","disabled","error","events","help","label","multiLine","name","optionalIndicator","required","requiredIndicator","rows","type","className","defaultValue","dense","floatingLabel","focusHelp","fullWidth","hideValidation","onChange","style","tone","valid","validate","validateAtStart","value"])),V=d.inputEl(),j=h||d.error(),w=g?"textarea":"input",q=g?null:O&&"submit"!==O&&"search"!==O?O:"text",F=d.isInvalid()&&void 0!==j,N=f||_.readonly,P=g?k:void 0,C=I&&""!==S?o("span",{key:"required",className:r.requiredIndicator},S||"*"):null,D=!I&&E?o("span",{key:"optional",className:r.optionalIndicator},E):null,L=m?[m,C,D]:null;return[o("div",{className:r.inputArea,key:"input-area"},[L?o("label",{key:"label",className:r.label},L):null,o(w,n({},{key:"input",className:r.input,disabled:f},q?{type:q}:null,x?{name:x}:null,c(p,u.onclick)?null:l({},u.onclick,function(){N||(d.setInputState({vnode:e,focus:!0}),s(e))}),c(p,u.onfocus)?null:l({},u.onfocus,function(){N||(d.setInputState({vnode:e,focus:!0}),d.el()&&d.el().classList.add(r.stateFocused),s(e))}),c(p,u.onblur)?null:l({},u.onblur,function(){d.setInputState({vnode:e,type:"onblur",focus:!1}),d.el().classList.remove(r.stateFocused)}),c(p,u.oninput)?null:l({},u.oninput,function(){d.setInputState({vnode:e,type:"input"})}),c(p,u.onkeydown)?null:l({},u.onkeydown,function(t){"Enter"===t.key?d.isTouched(!0):"Escape"!==t.key&&"Esc"!==t.key||d.setInputState({vnode:e,focus:!1})}),y?p.events:null,void 0!==P?{rows:P}:null,i({},_)))]),v?o("div",{key:"counter",className:r.counter},(V&&V.value.length||0)+" / "+v):null,b&&!F?o("div",{key:"help",className:[r.help,p.focusHelp?r.focusHelp:null].join(" ")},b):null,F?o("div",{key:"error",className:r.error},j):d.showErrorPlaceholder&&!b?o("div",{key:"error-placeholder",className:r.errorPlaceholder}):null]}});e.coreTextField=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-textfield.js.map
