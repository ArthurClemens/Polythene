!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],t):t(e.polythene={},e.m)}(this,function(e,t){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t;const n={autocomplete:"autocomplete",autofocus:"autofocus",class:"class",className:"class",enctype:"enctype",formaction:"formaction",frameborder:"frameborder",maxlength:"maxlength",minlength:"minlength",onblur:"onblur",onchange:"onchange",onclick:"onclick",onfocus:"onfocus",oninput:"oninput",onkeydown:"onkeydown",onkeyup:"onkeyup",onmousedown:"onmousedown",onmouseout:"onmouseout",onmouseover:"onmouseover",onmouseup:"onmouseup",onscroll:"onscroll",onsubmit:"onsubmit",ontouchend:"ontouchend",ontouchmove:"ontouchmove",ontouchstart:"ontouchstart",readonly:"readonly",tabindex:"tabindex"},r=t;r.displayName="mithril";var o,a=(function(e){!function(){var t=0,n={};function r(){function e(){return arguments.length>0&&arguments[0]!==n&&o(e,arguments[0]),e._state.value}return function(e){e.constructor=r,e._state={id:t++,value:void 0,state:0,derive:void 0,recover:void 0,deps:{},parents:[],endStream:void 0,unregister:void 0},e.map=e["fantasy-land/map"]=c,e["fantasy-land/ap"]=d,e["fantasy-land/of"]=r,e.valueOf=f,e.toJSON=l,e.toString=f,Object.defineProperties(e,{end:{get:function(){if(!e._state.endStream){var t=r();t.map(function(n){return!0===n&&(i(e),t._state.unregister=function(){i(t)}),n}),e._state.endStream=t}return e._state.endStream}}})}(e),arguments.length>0&&arguments[0]!==n&&o(e,arguments[0]),e}function o(e,t){for(var n in a(e,t),e._state.deps)s(e._state.deps[n],!1);null!=e._state.unregister&&e._state.unregister(),function(e){for(var t in e._state.changed=!1,e._state.deps)e._state.deps[t]._state.changed=!1}(e)}function a(e,t){e._state.value=t,e._state.changed=!0,2!==e._state.state&&(e._state.state=1)}function s(e,t){var r=e._state.parents;if(r.length>0&&r.every(m)&&(t||r.some(v))){var o=e._state.derive();if(o===n)return!1;a(e,o)}}function u(e,t){if(!t.every(p))throw new Error("Ensure that each item passed to stream.combine/stream.merge is a stream");return function(e,t,n){var r=e._state;return r.derive=n,r.parents=t.filter(_),function e(t,n){for(var r=0;r<n.length;r++)n[r]._state.deps[t._state.id]=t,e(t,n[r]._state.parents)}(e,r.parents),s(e,!0),e}(r(),t,function(){return e.apply(this,t.concat([t.filter(v)]))})}function i(e){for(var t=0;t<e._state.parents.length;t++){delete e._state.parents[t]._state.deps[e._state.id]}for(var n in e._state.deps){var r=e._state.deps[n],o=r._state.parents.indexOf(e);o>-1&&r._state.parents.splice(o,1)}e._state.state=2,e._state.deps={}}function c(e){return u(function(t){return e(t())},[this])}function d(e){return u(function(e,t){return e()(t())},[e,this])}function f(){return this._state.value}function l(){return null!=this._state.value&&"function"==typeof this._state.value.toJSON?this._state.value.toJSON():this._state.value}function p(e){return e._state}function m(e){return 1===e._state.state}function v(e){return e._state.changed}function _(e){return 2!==e._state.state}r["fantasy-land/of"]=r,r.merge=function(e){return u(function(){return e.map(function(e){return e()})},e)},r.combine=u,r.scan=function(e,t,n){var r=u(function(n){return t=e(t,n._state.value)},[n]);return 0===r._state.state&&r(t),r},r.scanMerge=function(e,t){var n=e.map(function(e){var t=e[0];return 0===t._state.state&&t(void 0),t});return u(function(){var r=arguments[arguments.length-1];return n.forEach(function(n,o){r.indexOf(n)>-1&&(t=e[o][1](t,n._state.value))}),t},n)},r.HALT=n,e.exports=r}()}(o={exports:{}},o.exports),o.exports);e.keys=n,e.renderer=r,e.StateComponent=(({createContent:e=(()=>{}),createProps:t=(()=>{}),component:o=null,getElement:s=(()=>"div"),getInitialState:u=(()=>({})),onMount:i=(()=>{}),onUnMount:c=(()=>{}),onUpdate:d=(()=>{}),view:f=null})=>{const l=a=>r(o||s(a),t(a,{renderer:r,requiresKeys:!1,keys:n}),[a.attrs.before,e(a,{renderer:r,requiresKeys:!1,keys:n}),a.attrs.after]);return{view:f?e=>f(e,{render:l,renderer:r}):e=>l(e),oninit:e=>{const t=Object.assign({},e),o=u(t,a,{keys:n});Object.assign(e.state,o),e._mounted=!1,e.state.redrawOnUpdate&&e.state.redrawOnUpdate.map(()=>e._mounted&&setTimeout(r.redraw(!0)))},oncreate:e=>{e._mounted=!0,i(e,{keys:n})},onremove:c,onupdate:d}}),e.ViewComponent=(({createContent:e=(()=>{}),createProps:t=(()=>{}),getElement:o=(()=>"div"),component:a=null,view:s=null,onMount:u=(()=>{}),onUnMount:i=(()=>{})})=>{const c=s=>r(a||o(s),t(s,{renderer:r,requiresKeys:!1,keys:n}),[s.attrs.before,e(s,{renderer:r,requiresKeys:!1,keys:n}),s.attrs.after]);return{view:s?e=>s(e,{render:c,renderer:r}):e=>c(e),oncreate:e=>u(e,{keys:n}),onremove:i}}),Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-mithril-base.js.map
