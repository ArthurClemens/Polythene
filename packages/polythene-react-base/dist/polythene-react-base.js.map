{"version":3,"file":"polythene-react-base.js","sources":["../src/keys.js","../src/MithrilToReact.js","../src/renderer.js","../node_modules/mithril/stream/stream.mjs","../node_modules/mithril/stream.js","../src/StateComponent.js","../src/ViewComponent.js"],"sourcesContent":["\nexport const keys = {\n  autocomplete: \"autoComplete\",\n  autofocus:    \"autoFocus\",\n  class:        \"className\",\n  className:    \"className\",\n  enctype:      \"encType\",\n  formaction:   \"formAction\",\n  frameborder:  \"frameBorder\",\n  maxlength:    \"maxLength\",\n  minlength:    \"minLength\",\n  onblur:       \"onBlur\",\n  onchange:     \"onChange\",\n  onclick:      \"onClick\",\n  onfocus:      \"onFocus\",\n  oninput:      \"onInput\",\n  onkeydown:    \"onKeyDown\",\n  onkeyup:      \"onKeyUp\",\n  onmousedown:  \"onMouseDown\",\n  onmouseout:   \"onMouseOut\",\n  onmouseover:  \"onMouseOver\",\n  onmouseup:    \"onMouseUp\",\n  onscroll:     \"onScroll\",\n  onsubmit:     \"onSubmit\",\n  ontouchend:   \"onTouchEnd\",\n  ontouchmove:  \"onTouchMove\",\n  ontouchstart: \"onTouchStart\",\n  readonly:     \"readOnly\",\n  tabindex:     \"tabIndex\",\n};\n\nexport const normalizeKey = key => keys[key.toLowerCase()];\n","/*\nTakes a Mithril component object and returns a React component (for keys oninit and view).\nAutomatically redraws when the stream `vnode.state.redrawOnUpdate` exists, and the stream is updated.\n\nExample: \n\nimport stream from \"mithril/stream\";\nimport { renderer as h, Button } from \"polythene-react\";\n\nconst StateComponent = {\n  oninit: vnode => {\n    const checked = stream(false);\n    Object.assign(vnode.state, {\n      checked,\n      redrawOnUpdate: stream.merge([checked])\n    });\n  },\n  view: vnode => {\n    const state = vnode.state;\n    const attrs = vnode.attrs;\n    const checked = state.checked();\n    return h(Button, {\n      raised: true,\n      label: `Click ${attrs.subject} to switch ${checked ? \"Off\" : \"On\"}`,\n      events: {\n        [keys.onclick]: () => state.checked(!checked)\n      }\n    });\n  }\n};\n\nh(StateComponent, { subject: \"airco\"});\n*/\n\nimport React from \"react\";\n\nexport const MithrilToReact = component => (\n\n  class extends React.Component {\n\n    constructor(props) {\n      super(props);\n      const vnode = Object.assign(\n        {},\n        component,\n        {\n          state: {},\n          attrs: this.props,\n          redrawValues: undefined\n        }\n      );\n      if (component.oninit) {\n        component.oninit(vnode);\n      }\n      this.state = vnode;\n    }\n\n    componentDidMount() {\n      this._mounted = true;\n      this.state.state.redrawOnUpdate && this.state.state.redrawOnUpdate.map(values => {\n        if (this._mounted) {\n          this.setState({ redrawValues: values });\n        }\n      });\n    }\n\n    componentWillUnmount() {\n      this._mounted = false;\n    }\n\n    render() {\n      return component.view({ state: this.state.state, attrs: this.props }, this.props.children);\n    }\n  }\n);\n","import h from \"react-hyperscript\";\nimport { MithrilToReact } from \"./MithrilToReact\";\n\nexport const renderer = (...args) =>\n  typeof args[0] === \"object\"\n    ? h.call(null, MithrilToReact(args[0]), ...args.slice(1))\n    : h.call(null, ...args);\n\nrenderer.trust = (html, element = \"div\") => {\n  if (html == null) html = \"\";\n  return h(element, {\n    dangerouslySetInnerHTML: { __html: html }\n  });\n};\n\nrenderer.displayName = \"react\";","/* eslint-enable */\nStream.SKIP = {}\nStream.lift = lift\nStream.scan = scan\nStream.merge = merge\nStream.combine = combine\nStream.scanMerge = scanMerge\nStream[\"fantasy-land/of\"] = Stream\n\nlet warnedHalt = false\nObject.defineProperty(Stream, \"HALT\", {\n\tget: function() {\n\t\twarnedHalt && console.log(\"HALT is deprecated and has been renamed to SKIP\");\n\t\twarnedHalt = true\n\t\treturn Stream.SKIP\n\t}\n})\n\nfunction Stream(value) {\n\tvar dependentStreams = []\n\tvar dependentFns = []\n\n\tfunction stream(v) {\n\t\tif (arguments.length && v !== Stream.SKIP && open(stream)) {\n\t\t\tvalue = v\n\t\t\tstream.changing()\n\t\t\tstream.state = \"active\"\n\t\t\tdependentStreams.forEach(function(s, i) { s(dependentFns[i](value)) })\n\t\t}\n\n\t\treturn value\n\t}\n\n\tstream.constructor = Stream\n\tstream.state = arguments.length && value !== Stream.SKIP ? \"active\" : \"pending\"\n\n\tstream.changing = function() {\n\t\topen(stream) && (stream.state = \"changing\")\n\t\tdependentStreams.forEach(function(s) {\n\t\t\ts.dependent && s.dependent.changing()\n\t\t\ts.changing()\n\t\t})\n\t}\n\n\tstream.map = function(fn, ignoreInitial) {\n\t\tvar target = stream.state === \"active\" && ignoreInitial !== Stream.SKIP\n\t\t\t? Stream(fn(value))\n\t\t\t: Stream()\n\n\t\tdependentStreams.push(target)\n\t\tdependentFns.push(fn)\n\t\treturn target\n\t}\n\n\tlet end\n\tfunction createEnd() {\n\t\tend = Stream()\n\t\tend.map(function(value) {\n\t\t\tif (value === true) {\n\t\t\t\tstream.state = \"ended\"\n\t\t\t\tdependentStreams.length = dependentFns.length = 0\n\t\t\t}\n\t\t\treturn value\n\t\t})\n\t\treturn end\n\t}\n\n\tstream.toJSON = function() { return value != null && typeof value.toJSON === \"function\" ? value.toJSON() : value }\n\n\tstream[\"fantasy-land/map\"] = stream.map\n\tstream[\"fantasy-land/ap\"] = function(x) { return combine(function(s1, s2) { return s1()(s2()) }, [x, stream]) }\n\n\tObject.defineProperty(stream, \"end\", {\n\t\tget: function() { return end || createEnd() }\n\t})\n\n\treturn stream\n}\n\nfunction combine(fn, streams) {\n\tvar ready = streams.every(function(s) {\n\t\tif (s.constructor !== Stream)\n\t\t\tthrow new Error(\"Ensure that each item passed to stream.combine/stream.merge/lift is a stream\")\n\t\treturn s.state === \"active\"\n\t})\n\tvar stream = ready\n\t\t? Stream(fn.apply(null, streams.concat([streams])))\n\t\t: Stream()\n\n\tlet changed = []\n\n\tstreams.forEach(function(s) {\n\t\ts.map(function(value) {\n\t\t\tchanged.push(s)\n\t\t\tif (ready || streams.every(function(s) { return s.state !== \"pending\" })) {\n\t\t\t\tready = true\n\t\t\t\tstream(fn.apply(null, streams.concat([changed])))\n\t\t\t\tchanged = []\n\t\t\t}\n\t\t\treturn value\n\t\t}, Stream.SKIP).parent = stream\n\t})\n\n\treturn stream\n}\n\nfunction merge(streams) {\n\treturn combine(function() { return streams.map(function(s) { return s() }) }, streams)\n}\n\nfunction scan(fn, acc, origin) {\n\tvar stream = origin.map(function(v) {\n\t\tacc = fn(acc, v)\n\t\treturn acc\n\t})\n\tstream(acc)\n\treturn stream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) { return tuple[0] })\n\n\tvar stream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\t\tstreams.forEach(function(stream, i) {\n\t\t\tif (changed.indexOf(stream) > -1)\n\t\t\t\tseed = tuples[i][1](seed, stream())\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\tstream(seed)\n\n\treturn stream\n}\n\nfunction lift() {\n\tvar fn = arguments[0]\n\tvar streams = Array.prototype.slice.call(arguments, 1)\n\treturn merge(streams).map(function(streams) {\n\t\treturn fn.apply(undefined, streams)\n\t})\n}\n\nfunction open(s) {\n\treturn s.state === \"pending\" || s.state === \"active\" || s.state === \"changing\"\n}\n\n\nexport default Stream","\"use strict\"\n\nmodule.exports = require(\"./stream/stream\")\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport stream from \"mithril/stream\";\nimport { renderer } from \"./renderer\";\nimport { keys } from \"./keys\";\nimport { isClient } from \"polythene-core\";\n\nconst requiresKeys = true;\n\nexport const StateComponent = ({\n  createContent = () => {},\n  createProps = () => ({}),\n  getElement = () => \"div\",\n  component,\n  getInitialState = () => ({}),\n  onMount = () => {},\n  onUnMount = () => {},\n  onUpdate = () => {},\n  view = null\n}) => {\n  \n  return class extends React.Component {\n    \n    constructor(props) {\n      super(props);\n      this.dom = null;\n      const protoState = Object.assign(\n        {},\n        component,\n        this.createVirtualNode(),\n        {\n          redrawValues: undefined\n        }\n      );\n      this.state = getInitialState(protoState, stream, { keys });\n      this.registerDOM = this.registerDOM.bind(this);\n      this._render = this._render.bind(this);      \n    }\n    \n    componentDidMount() {\n      this._mounted = true;\n      this.state.redrawOnUpdate && this.state.redrawOnUpdate.map(values => (\n        setTimeout(() => this._mounted && this.setState({ redrawValues: values }), 0)\n      ));\n      onMount(this.createVirtualNode(), { keys });\n    }\n\n    componentDidUpdate() {\n      onUpdate(this.createVirtualNode());\n    }\n\n    componentWillUnmount() {\n      this._mounted = false;\n      onUnMount(this.createVirtualNode());\n    }\n\n    createVirtualNode() {\n      return {\n        state: this.state,\n        attrs: this.props,\n        children: this.props.children,\n        dom: this.dom,\n      };\n    }\n\n    registerDOM(el) {\n      if (isClient && !this.dom && el) {\n        this.dom = el instanceof HTMLElement\n          ? el\n          : ReactDOM.findDOMNode(el);\n      }\n    }\n\n    _render() {\n      const vnode = this.createVirtualNode();\n      return renderer(\n        component || getElement(vnode),\n        Object.assign(\n          {},\n          createProps(vnode, { renderer, requiresKeys, keys }),\n          { ref: this.registerDOM }\n        ),\n        [\n          vnode.attrs.before,\n          createContent(vnode, { renderer, requiresKeys, keys }),\n          vnode.attrs.after\n        ]\n      );\n    }\n\n    render() {\n      return view\n        ? view(this.createVirtualNode(), { renderer, render: this._render })\n        : this._render(this.props);\n    }\n  };\n};","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { renderer } from \"./renderer\";\nimport { keys } from \"./keys\";\nimport { isClient } from \"polythene-core\";\n\nconst requiresKeys = true;\n\nexport const ViewComponent = ({\n  createContent = () => {},\n  createProps = () => ({}),\n  getElement = () => \"div\",\n  onMount = () => {},\n  onUnMount = () => {},\n  component,\n  view = null\n}) => {\n  \n  return class extends React.Component {\n\n    constructor(props) {\n      super(props);\n      this.dom = null;\n      this.registerDOM = this.registerDOM.bind(this);\n      this._render = this._render.bind(this);\n    }\n\n    componentDidMount() {\n      onMount(this.createVirtualNode(), { keys });\n    }\n\n    componentWillUnmount() {\n      onUnMount(this.createVirtualNode());\n    }\n\n    createVirtualNode() {\n      const props = Object.assign({}, this.props);\n      return {\n        attrs: props,\n        children: props.children,\n        dom: this.dom\n      };\n    }\n\n    registerDOM(el) {\n      if (isClient && !this.dom && el) {\n        this.dom = el instanceof HTMLElement\n          ? el\n          : ReactDOM.findDOMNode(el);\n      }\n    }\n\n    _render() {\n      const vnode = this.createVirtualNode();\n      return renderer(\n        component || getElement(vnode),\n        Object.assign(\n          {},\n          createProps(vnode, { renderer, requiresKeys, keys }),\n          { ref: this.registerDOM }\n        ),\n        [\n          vnode.attrs.before,\n          createContent(vnode, { renderer, requiresKeys, keys }),\n          vnode.attrs.after\n        ]\n      );\n    }\n\n    render() {\n      return view\n        ? view(this.createVirtualNode(), { renderer, render: this._render })\n        : this._render(this.props);\n    }\n  };\n};\n"],"names":["keys","autocomplete","autofocus","class","className","enctype","formaction","frameborder","maxlength","minlength","onblur","onchange","onclick","onfocus","oninput","onkeydown","onkeyup","onmousedown","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchend","ontouchmove","ontouchstart","readonly","tabindex","MithrilToReact","component","React","Component","constructor","props","vnode","Object","assign","state","attrs","redrawValues","undefined","oninit","componentDidMount","_mounted","redrawOnUpdate","map","values","setState","componentWillUnmount","render","view","children","renderer","args","h","call","slice","trust","html","element","dangerouslySetInnerHTML","__html","displayName","Stream","SKIP","lift","scan","merge","combine","scanMerge","warnedHalt","defineProperty","get","console","log","value","dependentStreams","dependentFns","stream","v","arguments","length","open","changing","forEach","s","i","dependent","fn","ignoreInitial","target","push","end","createEnd","toJSON","x","s1","s2","streams","ready","every","Error","apply","concat","changed","parent","acc","origin","tuples","seed","tuple","indexOf","Array","prototype","require$$0","requiresKeys","StateComponent","createContent","createProps","getElement","getInitialState","onMount","onUnMount","onUpdate","dom","protoState","createVirtualNode","registerDOM","bind","_render","setTimeout","componentDidUpdate","el","isClient","HTMLElement","ReactDOM","findDOMNode","ref","before","after","ViewComponent"],"mappings":"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"}