{"version":3,"file":"polythene-css-dialog.js","sources":["../../polythene-css-classes/dialog.js","../src/color.js","../src/vars.js","../src/layout.js","../src/index.js"],"sourcesContent":["import menuClasses from \"./menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  placeholder:       \"pe-dialog__placeholder\",\n  holder:            \"pe-dialog__holder\",\n  content:           \"pe-dialog__content\",\n  backdrop:          \"pe-dialog__backdrop\",\n  touch:             \"pe-dialog__touch\",\n\n  // states\n  fullScreen:        \"pe-dialog--full-screen\",\n  modal:             \"pe-dialog--modal\",\n  open:              \"pe-dialog--open\",    // class set to html element\n  visible:           \"pe-dialog--visible\", // class set to dialog element\n  showBackdrop:      \"pe-dialog--backdrop\",\n  transition:        \"pe-dialog--transition\",\n\n  // lookup\n  menuContent:       menuClasses.content,\n};\n","import { sel, createColor } from \"polythene-core-css\";\n\nconst generalFns = ({\n  general_styles: selector => [], // eslint-disable-line no-unused-vars\n});\n\nconst tintFns = tint => ({\n  [\"color_\" + tint + \"_background\"]: (selector, vars) => [\n    sel(selector, {\n      \" .pe-dialog__content\": {\n        backgroundColor: vars[\"color_\" + tint + \"_background\"],\n      },\n    })\n  ],\n  [\"color_\" + tint + \"_text\"]: (selector, vars) => [\n    sel(selector, {\n      \" .pe-dialog__content\": {\n        color: vars[\"color_\" + tint + \"_text\"],\n      },\n    })\n  ],\n  [\"color_\" + tint + \"_backdrop_background\"]: (selector, vars) => [\n    sel(selector, {\n      \" .pe-dialog__backdrop\": {\n        backgroundColor: vars[\"color_\" + tint + \"_backdrop_background\"]\n      }\n    })\n  ]\n});\n\nconst lightTintFns = Object.assign({}, generalFns, tintFns(\"light\"));\nconst darkTintFns = Object.assign({}, generalFns, tintFns(\"dark\"));\n\nexport default createColor({\n  varFns: { lightTintFns, darkTintFns }\n});\n","import { rgba } from \"polythene-core-css\";\nimport { vars } from \"polythene-theme\";\nimport { sharedVars as shadowVars } from \"polythene-css-shadow\";\n\nexport const behaviorVars = {\n  full_screen:                       false,\n  modal:                             false,\n};\n\nconst themeVars = Object.assign(\n  {},\n  {\n    backdrop:                        false,\n    z_index:                         vars.z_dialog,\n  },\n  behaviorVars,\n  shadowVars\n);\n\nexport default Object.assign(\n  {},\n  {\n    general_styles:                  true,\n\n    animation_delay:                 \"0s\",\n    animation_duration:              \".220s\",\n    animation_hide_css:              \"opacity: 0;\",\n    animation_show_css:              \"opacity: 1;\",\n    animation_timing_function:       \"ease-in-out\",\n    border_radius:                   vars.unit_block_border_radius,\n    position:                        \"fixed\",\n    \n    // color vars\n\n    color_light_backdrop_background: \"rgba(0, 0, 0, .4)\",\n    color_dark_backdrop_background:  \"rgba(0, 0, 0, .5)\",\n\n    color_light_background:          rgba(vars.color_light_background),\n    color_dark_background:           rgba(vars.color_dark_background),\n\n    color_light_text:                rgba(vars.color_light_foreground, vars.blend_light_text_regular),\n    color_dark_text:                 rgba(vars.color_dark_foreground, vars.blend_dark_text_regular),\n  },\n  themeVars\n);\n","import { mixin, flex, sel, createLayout, createMarker } from \"polythene-core-css\";\nimport { fullScreen as fullScreenPane } from \"polythene-css-dialog-pane\";\nimport { sharedVarFns as shadowVarFns } from \"polythene-css-shadow\";\nimport { behaviorVars } from \"./vars\";\n\nconst minWidth = \"320px\";\n\nconst backdrop = selector =>\n  sel(selector, {\n    \".pe-dialog--visible .pe-dialog__backdrop\": {\n      display: \"block\",\n      opacity: 1,\n    }\n  });\n\nconst fullScreen = (selector, vars) =>\n  sel(selector, [\n    createMarker(vars, behaviorVars),\n    {\n      padding: 0,\n\n      \" .pe-dialog__content\": {\n        width: \"100%\", // for IE 11\n      },\n    },\n    fullScreenPane(selector)\n  ]);\n\nconst modal = (selector, vars) =>\n  sel(selector, [\n    createMarker(vars, behaviorVars)\n  ]);\n\nconst varFns = {\n  general_styles: (selector, vars) => [\n    sel(selector, [\n      flex.layoutCenterCenter,\n      {\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        zIndex: vars.z_index,\n        height: \"100%\", // 100vh would make the dialog go beneath Mobile Safari toolbar        \n        transitionProperty: \"opacity,background-color,transform\",\n\n        \".pe-dialog--full-screen\": fullScreen(selector, vars),\n        \".pe-dialog--modal\": modal(selector),\n\n        \" .pe-dialog__content\": {\n          position: \"relative\",\n          transitionProperty: \"all\",\n        },\n\n        \" .pe-dialog__backdrop\": [\n          mixin.defaultTransition(\"all\"), // animation duration is set in component options\n          {\n            position: \"absolute\",\n            opacity: 0,\n            top: 0,\n            left: 0,\n            right: 0,\n            bottom: 0,\n            pointerEvents: \"none\",\n          }\n        ],\n\n        \".pe-dialog--backdrop\": backdrop(selector),\n      }\n    ]),\n    {\n      \".pe-dialog__holder\": {\n        height: \"100%\",\n        minWidth,\n      },\n    }\n  ],\n  animation_hide_css: (selector, vars) => [\n    sel(selector, [\n      vars.animation_hide_css\n    ]),\n  ],\n  position: (selector, vars) => [\n    sel(selector, {\n      position: vars.position,\n    }),\n  ],\n  animation_delay: (selector, vars) => [\n    sel(selector, {\n      \"&, .pe-dialog__content\": {\n        transitionDelay: vars.animation_delay,\n      }\n    }),\n  ],\n  animation_duration: (selector, vars) => [\n    sel(selector, {\n      \"&, .pe-dialog__content\": {\n        transitionDuration: vars.animation_duration,\n      }\n    }),\n  ],\n  animation_timing_function: (selector, vars) => [\n    sel(selector, {\n      \"&, .pe-dialog__content\": {\n        transitionTimingFunction: vars.animation_timing_function,\n      }\n    }),\n  ],\n  animation_show_css: (selector, vars) => [\n    sel(selector, {\n      \".pe-dialog--visible\": vars.animation_show_css,\n    }),\n  ],\n  border_radius: (selector, vars) => [\n    !vars.full_screen && sel(selector, {\n      \" .pe-dialog__content\": {\n        borderTopLeftRadius: vars.border_radius + \"px\",\n        borderTopRightRadius: vars.border_radius + \"px\",\n        borderBottomLeftRadius: vars.border_radius + \"px\",\n        borderBottomRightRadius: vars.border_radius + \"px\",\n      },\n    }),\n  ],\n  // Theme vars\n  backdrop: (selector, vars) =>\n    vars.backdrop && backdrop(selector, vars),\n  full_screen: (selector, vars) =>\n    vars.full_screen && fullScreen(selector, vars),\n  modal: (selector, vars) =>\n    vars.modal && modal(selector, vars),\n  // shadow_depth:\n  ...shadowVarFns\n};\n\nexport default createLayout({ varFns });\n","import classes from \"polythene-css-classes/dialog\";\nimport color from \"./color\";\nimport layout from \"./layout\";\nimport vars from \"./vars\";\nimport { styler } from \"polythene-core-css\";\n\nconst fns = [layout, color];\nconst selector = `.${classes.component}`;\n\nconst addStyle = styler.createAddStyle(selector, fns, vars);\n\nconst getStyle = styler.createGetStyle(selector, fns, vars);\n\nstyler.addStyle({\n  selectors: [selector],\n  fns,\n  vars\n});\n\nexport {\n  addStyle,\n  color,\n  getStyle,\n  layout,\n  vars,\n};\n"],"names":["generalFns","general_styles","selector","tintFns","tint","vars","sel","backgroundColor","color","lightTintFns","_extends","darkTintFns","createColor","varFns","behaviorVars","full_screen","modal","themeVars","backdrop","z_index","z_dialog","shadowVars","animation_delay","animation_duration","animation_hide_css","animation_show_css","animation_timing_function","border_radius","unit_block_border_radius","position","color_light_backdrop_background","color_dark_backdrop_background","color_light_background","rgba","color_dark_background","color_light_text","color_light_foreground","blend_light_text_regular","color_dark_text","color_dark_foreground","blend_dark_text_regular","display","opacity","fullScreen","createMarker","padding","width","fullScreenPane","flex","layoutCenterCenter","top","left","right","bottom","zIndex","height","transitionProperty","mixin","defaultTransition","pointerEvents","minWidth","transitionDelay","transitionDuration","transitionTimingFunction","borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius","shadowVarFns","createLayout","fns","layout","classes","addStyle","styler","createAddStyle","getStyle","createGetStyle","selectors"],"mappings":"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"}