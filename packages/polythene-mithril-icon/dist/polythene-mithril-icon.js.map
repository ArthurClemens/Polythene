{"version":3,"file":"polythene-mithril-icon.js","sources":["../../polythene-mithril-base/src/keys.js","../../polythene-mithril-base/src/renderer.js","../../polythene-mithril-base/node_modules/mithril/stream/stream.js","../../polythene-mithril-base/src/ViewComponent.js","../../polythene-core/dist/polythene-core.mjs","../../polythene-core-icon/dist/polythene-core-icon.mjs","../../polythene-mithril-svg/dist/polythene-mithril-svg.mjs","../src/index.js"],"sourcesContent":["\nexport const keys = {\n  autocomplete: \"autocomplete\",\n  autofocus:    \"autofocus\",\n  class:        \"class\",\n  className:    \"class\",\n  enctype:      \"enctype\",\n  formaction:   \"formaction\",\n  frameborder:  \"frameborder\",\n  maxlength:    \"maxlength\",\n  minlength:    \"minlength\",\n  onblur:       \"onblur\",\n  onchange:     \"onchange\",\n  onclick:      \"onclick\",\n  onfocus:      \"onfocus\",\n  oninput:      \"oninput\",\n  onkeydown:    \"onkeydown\",\n  onkeyup:      \"onkeyup\",\n  onmousedown:  \"onmousedown\",\n  onmouseout:   \"onmouseout\",\n  onmouseover:  \"onmouseover\",\n  onmouseup:    \"onmouseup\",\n  onscroll:     \"onscroll\",\n  onsubmit:     \"onsubmit\",\n  ontouchend:   \"ontouchend\",\n  ontouchmove:  \"ontouchmove\",\n  ontouchstart: \"ontouchstart\",\n  readonly:     \"readonly\",\n  tabindex:     \"tabindex\",\n};\n\nexport const normalizeKey = key => key.toLowerCase();\n","import m from \"mithril\";\n\nexport const renderer = m;\nrenderer.displayName = \"mithril\";\n","/* eslint-disable */\n;(function() {\n\"use strict\"\n/* eslint-enable */\n\nvar guid = 0, HALT = {}\nfunction createStream() {\n\tfunction stream() {\n\t\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\t\treturn stream._state.value\n\t}\n\tinitStream(stream)\n\n\tif (arguments.length > 0 && arguments[0] !== HALT) updateStream(stream, arguments[0])\n\n\treturn stream\n}\nfunction initStream(stream) {\n\tstream.constructor = createStream\n\tstream._state = {id: guid++, value: undefined, state: 0, derive: undefined, recover: undefined, deps: {}, parents: [], endStream: undefined, unregister: undefined}\n\tstream.map = stream[\"fantasy-land/map\"] = map, stream[\"fantasy-land/ap\"] = ap, stream[\"fantasy-land/of\"] = createStream\n\tstream.valueOf = valueOf, stream.toJSON = toJSON, stream.toString = valueOf\n\n\tObject.defineProperties(stream, {\n\t\tend: {get: function() {\n\t\t\tif (!stream._state.endStream) {\n\t\t\t\tvar endStream = createStream()\n\t\t\t\tendStream.map(function(value) {\n\t\t\t\t\tif (value === true) {\n\t\t\t\t\t\tunregisterStream(stream)\n\t\t\t\t\t\tendStream._state.unregister = function(){unregisterStream(endStream)}\n\t\t\t\t\t}\n\t\t\t\t\treturn value\n\t\t\t\t})\n\t\t\t\tstream._state.endStream = endStream\n\t\t\t}\n\t\t\treturn stream._state.endStream\n\t\t}}\n\t})\n}\nfunction updateStream(stream, value) {\n\tupdateState(stream, value)\n\tfor (var id in stream._state.deps) updateDependency(stream._state.deps[id], false)\n\tif (stream._state.unregister != null) stream._state.unregister()\n\tfinalize(stream)\n}\nfunction updateState(stream, value) {\n\tstream._state.value = value\n\tstream._state.changed = true\n\tif (stream._state.state !== 2) stream._state.state = 1\n}\nfunction updateDependency(stream, mustSync) {\n\tvar state = stream._state, parents = state.parents\n\tif (parents.length > 0 && parents.every(active) && (mustSync || parents.some(changed))) {\n\t\tvar value = stream._state.derive()\n\t\tif (value === HALT) return false\n\t\tupdateState(stream, value)\n\t}\n}\nfunction finalize(stream) {\n\tstream._state.changed = false\n\tfor (var id in stream._state.deps) stream._state.deps[id]._state.changed = false\n}\n\nfunction combine(fn, streams) {\n\tif (!streams.every(valid)) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge is a stream\")\n\treturn initDependency(createStream(), streams, function() {\n\t\treturn fn.apply(this, streams.concat([streams.filter(changed)]))\n\t})\n}\n\nfunction initDependency(dep, streams, derive) {\n\tvar state = dep._state\n\tstate.derive = derive\n\tstate.parents = streams.filter(notEnded)\n\n\tregisterDependency(dep, state.parents)\n\tupdateDependency(dep, true)\n\n\treturn dep\n}\nfunction registerDependency(stream, parents) {\n\tfor (var i = 0; i < parents.length; i++) {\n\t\tparents[i]._state.deps[stream._state.id] = stream\n\t\tregisterDependency(stream, parents[i]._state.parents)\n\t}\n}\nfunction unregisterStream(stream) {\n\tfor (var i = 0; i < stream._state.parents.length; i++) {\n\t\tvar parent = stream._state.parents[i]\n\t\tdelete parent._state.deps[stream._state.id]\n\t}\n\tfor (var id in stream._state.deps) {\n\t\tvar dependent = stream._state.deps[id]\n\t\tvar index = dependent._state.parents.indexOf(stream)\n\t\tif (index > -1) dependent._state.parents.splice(index, 1)\n\t}\n\tstream._state.state = 2 //ended\n\tstream._state.deps = {}\n}\n\nfunction map(fn) {return combine(function(stream) {return fn(stream())}, [this])}\nfunction ap(stream) {return combine(function(s1, s2) {return s1()(s2())}, [stream, this])}\nfunction valueOf() {return this._state.value}\nfunction toJSON() {return this._state.value != null && typeof this._state.value.toJSON === \"function\" ? this._state.value.toJSON() : this._state.value}\n\nfunction valid(stream) {return stream._state }\nfunction active(stream) {return stream._state.state === 1}\nfunction changed(stream) {return stream._state.changed}\nfunction notEnded(stream) {return stream._state.state !== 2}\n\nfunction merge(streams) {\n\treturn combine(function() {\n\t\treturn streams.map(function(s) {return s()})\n\t}, streams)\n}\n\nfunction scan(reducer, seed, stream) {\n\tvar newStream = combine(function (s) {\n\t\treturn seed = reducer(seed, s._state.value)\n\t}, [stream])\n\n\tif (newStream._state.state === 0) newStream(seed)\n\n\treturn newStream\n}\n\nfunction scanMerge(tuples, seed) {\n\tvar streams = tuples.map(function(tuple) {\n\t\tvar stream = tuple[0]\n\t\tif (stream._state.state === 0) stream(undefined)\n\t\treturn stream\n\t})\n\n\tvar newStream = combine(function() {\n\t\tvar changed = arguments[arguments.length - 1]\n\n\t\tstreams.forEach(function(stream, idx) {\n\t\t\tif (changed.indexOf(stream) > -1) {\n\t\t\t\tseed = tuples[idx][1](seed, stream._state.value)\n\t\t\t}\n\t\t})\n\n\t\treturn seed\n\t}, streams)\n\n\treturn newStream\n}\n\ncreateStream[\"fantasy-land/of\"] = createStream\ncreateStream.merge = merge\ncreateStream.combine = combine\ncreateStream.scan = scan\ncreateStream.scanMerge = scanMerge\ncreateStream.HALT = HALT\n\nif (typeof module !== \"undefined\") module[\"exports\"] = createStream\nelse if (typeof window.m === \"function\" && !(\"stream\" in window.m)) window.m.stream = createStream\nelse window.m = {stream : createStream}\n\n}());\n","import { renderer } from \"./renderer\";\nimport { keys } from \"./keys\";\n\nconst requiresKeys = false;\n\nexport const ViewComponent = ({\n  createContent = () => {},\n  createProps = () => {},\n  getElement = () => \"div\",\n  component = null,\n  view = null,\n  onMount = () => {},\n  onUnMount = () => {},\n}) => {\n\n  const render = vnode =>\n    renderer(\n      component || getElement(vnode),\n      createProps(vnode, { renderer, requiresKeys, keys }),\n      [\n        vnode.attrs.before,\n        createContent(vnode, { renderer, requiresKeys, keys }),\n        vnode.attrs.after\n      ]\n    );\n\n  return {\n    view: view\n      ? vnode => view(vnode, { render, renderer })\n      : vnode => render(vnode),\n    oncreate: vnode => onMount(vnode, { keys }),\n    onremove: onUnMount\n  };\n};\n","const isClient = typeof document !== \"undefined\";\nconst isServer = !isClient;\n\nconst evts = {\n  \"animation\": \"animationend\",\n  \"OAnimation\": \"oAnimationEnd\",\n  \"MozAnimation\": \"animationend\",\n  \"WebkitAnimation\": \"webkitAnimationEnd\"\n};\nconst getAnimationEndEvent = () => {\n  if (isClient) {\n    const el = document.createElement(\"fakeelement\");\n\n    for (let a in evts) {\n      if (el.style[a] !== undefined) {\n        return evts[a];\n      }\n    }\n  }\n};\n\nconst modes = {\n  hidden: \"hidden\",\n  visible: \"visible\",\n  exposing: \"exposing\",\n  hiding: \"hiding\"\n};\nconst Conditional = {\n  getInitialState: (vnode, createStream) => {\n    const attrs = vnode.attrs;\n\n    if (!attrs.didHide) {\n      return {};\n    }\n\n    const visible = attrs.permanent || attrs.show;\n    const mode = createStream(attrs.permanent ? modes.visible : visible ? modes.visible : modes.hidden);\n    return {\n      mode,\n      redrawOnUpdate: createStream.merge([mode])\n    };\n  },\n  onUpdate: ({\n    state,\n    attrs\n  }) => {\n    if (!attrs.didHide) {\n      return;\n    }\n\n    const mode = state.mode();\n\n    if (attrs.permanent) {\n      if (mode === modes.visible && attrs.show) {\n        state.mode(modes.exposing);\n      } else if (mode === modes.exposing && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    } else {\n      // \"normal\" type\n      if (mode === modes.hidden && attrs.show) {\n        state.mode(modes.visible);\n      } else if (mode === modes.visible && !attrs.show) {\n        state.mode(modes.hiding);\n      }\n    }\n  },\n  view: ({\n    state,\n    attrs\n  }, {\n    renderer: h\n  }) => {\n    const placeholder = h(\"span\", {\n      className: attrs.placeholderClassName\n    }); // No didHide callback passed: use normal visibility evaluation\n\n    if (!attrs.didHide) {\n      return attrs.permanent || attrs.inactive || attrs.show ? h(attrs.instance, attrs) : placeholder;\n    } // else: use didHide to reset the state after hiding\n\n\n    const mode = state.mode();\n    const visible = mode !== modes.hidden;\n    return visible ? h(attrs.instance, Object.assign({}, attrs, {\n      didHide: args => (attrs.didHide(args), state.mode(attrs.permanent ? modes.visible : modes.hidden))\n    }, mode === modes.hiding && {\n      show: true,\n      hide: true\n    })) : placeholder;\n  }\n};\nConditional.displayName = \"Conditional\";\n\nconst r = (acc, p) => (acc[p] = 1, acc);\n/* \nSeparately handled props:\n- class\n- element\n*/\n\n\nconst defaultAttrs = [// Universal\n\"key\", \"style\", \"href\", \"id\", // React\n\"tabIndex\", // Mithril\n\"tabindex\", \"oninit\", \"oncreate\", \"onupdate\", \"onbeforeremove\", \"onremove\", \"onbeforeupdate\"];\nconst filterSupportedAttributes = (attrs, {\n  add: addAttrs = [],\n  remove: removeAttrs = []\n} = {}) => {\n  const removeLookup = removeAttrs.reduce(r, {});\n  const supported = defaultAttrs.concat(addAttrs).filter(item => !removeLookup[item]).reduce(r, {});\n  return Object.keys(attrs).reduce((acc, key) => (supported[key] ? acc[key] = attrs[key] : null, acc), {});\n};\nconst unpackAttrs = attrs => typeof attrs === \"function\" ? attrs() : attrs;\n\nconst sizeClasses = classes => ({\n  small: classes.small,\n  regular: classes.regular,\n  medium: classes.medium,\n  large: classes.large,\n  fab: classes.fab\n});\n\nconst classForSize = (classes, size = \"regular\") => sizeClasses(classes)[size];\n\nconst isTouch = isServer ? false : \"ontouchstart\" in document.documentElement;\nconst pointerStartEvent = isTouch ? [\"touchstart\", \"click\"] : [\"click\"];\nconst pointerEndEvent = isTouch ? [\"click\", \"mouseup\"] : [\"mouseup\"];\nconst pointerStartMoveEvent = isTouch ? [\"touchstart\", \"mousedown\"] : [\"mousedown\"];\nconst pointerMoveEvent = isTouch ? [\"touchmove\", \"mousemove\"] : [\"mousemove\"];\nconst pointerEndMoveEvent = isTouch ? [\"touchend\", \"mouseup\"] : [\"mouseup\"];\n\nif (isClient) {\n  document.querySelector(\"html\").classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n}\n\nconst listeners = {}; // https://gist.github.com/Eartz/fe651f2fadcc11444549\n\nconst throttle = (func, s = 0.05, context = isClient ? window : {}) => {\n  let wait = false;\n  return (...args) => {\n    const later = () => func.apply(context, args);\n\n    if (!wait) {\n      later();\n      wait = true;\n      setTimeout(() => wait = false, s);\n    }\n  };\n};\nconst subscribe = (eventName, listener, delay) => {\n  listeners[eventName] = listeners[eventName] || [];\n  listeners[eventName].push(delay ? throttle(listener, delay) : listener);\n};\nconst unsubscribe = (eventName, listener) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  const index = listeners[eventName].indexOf(listener);\n\n  if (index > -1) {\n    listeners[eventName].splice(index, 1);\n  }\n};\nconst emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(listener => listener(event));\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\", e => emit(\"resize\", e));\n  window.addEventListener(\"scroll\", e => emit(\"scroll\", e));\n  window.addEventListener(\"keydown\", e => emit(\"keydown\", e));\n  window.addEventListener(pointerEndEvent, e => emit(pointerEndEvent, e));\n}\n\n/*\nHelper module to manage multiple items of the same component type.\n*/\nconst Multi = ({\n  options: mOptions,\n  renderer\n}) => {\n  const items = []; // This is shared between all instances of a type (Dialog, Notification, ...)\n\n  let current;\n\n  const getInitialState = (vnode, createStream) => {\n    current = createStream(null);\n    return {\n      current,\n      redrawOnUpdate: createStream.merge([current])\n    };\n  };\n  /*\n  @param e: { id, eventName }\n  */\n\n\n  const onChange = e => {\n    if (!current) {\n      console.error(\"Cannot set state. Did you set a root element like Dialog to show instances?\"); // eslint-disable-line no-console\n    }\n\n    current(e.id);\n    emit(mOptions.name, e);\n  };\n\n  const itemIndex = id => {\n    const item = findItem(id);\n    return items.indexOf(item);\n  };\n\n  const removeItem = id => {\n    const index = itemIndex(id);\n\n    if (index !== -1) {\n      items.splice(index, 1);\n      onChange({\n        id,\n        name: \"removeItem\"\n      });\n    }\n  };\n\n  const replaceItem = (id, newItem) => {\n    const index = itemIndex(id);\n\n    if (index !== -1) {\n      items[index] = newItem;\n    }\n  };\n\n  const findItem = id => {\n    // traditional for loop for IE10\n    for (let i = 0; i < items.length; i++) {\n      if (items[i].instanceId === id) {\n        return items[i];\n      }\n    }\n  };\n\n  const next = () => {\n    if (items.length) {\n      items[0].show = true;\n    }\n\n    onChange({\n      id: items.length ? items[0].instanceId : null,\n      name: \"next\"\n    });\n  };\n\n  const remove = (instanceId = mOptions.defaultId) => {\n    if (mOptions.queue) {\n      items.shift();\n      next();\n    } else {\n      removeItem(instanceId);\n    }\n  };\n\n  const removeAll = () => {\n    items.length = 0;\n    onChange({\n      id: null,\n      name: \"removeAll\"\n    });\n  };\n\n  const setPauseState = (pause, instanceId) => {\n    const item = findItem(instanceId);\n\n    if (item) {\n      item.pause = pause;\n      item.unpause = !pause;\n      onChange({\n        id: instanceId,\n        name: pause ? \"pause\" : \"unpause\"\n      });\n    }\n  };\n\n  const createItem = (itemAttrs, instanceId, spawn) => {\n    let resolveShow;\n    let resolveHide;\n    const attrs = unpackAttrs(itemAttrs);\n\n    const didShow = () => {\n      if (attrs.didShow) {\n        attrs.didShow(instanceId);\n      }\n\n      onChange({\n        id: instanceId,\n        name: \"didShow\"\n      });\n      return resolveShow(instanceId);\n    };\n\n    const showPromise = new Promise(resolve => resolveShow = resolve);\n\n    const didHide = () => {\n      if (attrs.didHide) {\n        attrs.didHide(instanceId);\n      }\n\n      onChange({\n        id: instanceId,\n        name: \"didHide\"\n      });\n      remove(instanceId);\n      return resolveHide(instanceId);\n    };\n\n    const hidePromise = new Promise(resolve => resolveHide = resolve);\n    return Object.assign({}, mOptions, {\n      instanceId,\n      spawn,\n      attrs: itemAttrs,\n      show: mOptions.queue ? false : true,\n      showPromise,\n      hidePromise,\n      didShow,\n      didHide\n    });\n  };\n\n  const count = () => items.length;\n\n  const pause = (instanceId = mOptions.defaultId) => setPauseState(true, instanceId);\n\n  const unpause = (instanceId = mOptions.defaultId) => setPauseState(false, instanceId);\n\n  const show = (attrs = {}, spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const spawn = spawnOpts.spawn || mOptions.defaultId;\n    const item = createItem(attrs, instanceId, spawn);\n    onChange({\n      id: instanceId,\n      name: \"show\"\n    });\n\n    if (mOptions.queue) {\n      items.push(item);\n\n      if (items.length === 1) {\n        next();\n      }\n    } else {\n      const storedItem = findItem(instanceId);\n\n      if (!storedItem) {\n        items.push(item);\n      } else {\n        replaceItem(instanceId, item);\n      }\n    }\n\n    return item.showPromise;\n  };\n\n  const hide = (spawnOpts = {}) => {\n    const instanceId = spawnOpts.id || mOptions.defaultId;\n    const item = mOptions.queue && items.length ? items[0] : findItem(instanceId);\n\n    if (item) {\n      item.hide = true;\n    }\n\n    onChange({\n      id: instanceId,\n      name: \"hide\"\n    });\n    return item ? item.hidePromise : Promise.resolve(instanceId);\n  };\n\n  const clear = removeAll;\n\n  const view = ({\n    attrs\n  }) => {\n    const spawn = attrs.spawn || mOptions.defaultId;\n    const candidates = items.filter(item => item.show && item.spawn === spawn);\n\n    if (mOptions.htmlShowClass && isClient && document.documentElement) {\n      document.documentElement.classList[candidates.length ? \"add\" : \"remove\"](mOptions.htmlShowClass);\n    }\n\n    return !candidates.length ? renderer(mOptions.placeholder) // placeholder because we cannot return null\n    : renderer(mOptions.holderSelector, {\n      className: attrs.position === \"container\" ? \"pe-multiple--container\" : \"pe-multiple--screen\"\n    }, candidates.map(itemData => {\n      return renderer(mOptions.instance, Object.assign({}, {\n        fromMultipleClassName: mOptions.className,\n        fromMultipleClear: clear,\n        fromMultipleDidHide: itemData.didHide,\n        fromMultipleDidShow: itemData.didShow,\n        hide: itemData.hide,\n        holderSelector: mOptions.holderSelector,\n        instanceId: itemData.instanceId,\n        key: itemData.key,\n        pause: itemData.pause,\n        show: itemData.show,\n        spawnId: spawn,\n        transitions: mOptions.transitions,\n        unpause: itemData.unpause\n      }, unpackAttrs(itemData.attrs)));\n    }));\n  };\n\n  return {\n    clear,\n    count,\n    getInitialState,\n    hide,\n    pause,\n    remove,\n    show,\n    unpause,\n    view\n  };\n};\nMulti.displayName = \"Multi\";\n\nconst getStyle = ({\n  element,\n  selector,\n  pseudoSelector,\n  prop\n}) => {\n  const el = selector ? element.querySelector(selector) : element;\n\n  if (!el) {\n    return;\n  }\n\n  return el.currentStyle ? el.currentStyle[prop] : window.getComputedStyle ? document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop) : null;\n};\nconst stylePropCompare = ({\n  element,\n  selector,\n  pseudoSelector,\n  prop,\n  equals,\n  contains\n}) => {\n  const el = selector ? element.querySelector(selector) : element;\n\n  if (!el) {\n    return false;\n  }\n\n  if (equals !== undefined) {\n    return equals === document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop);\n  }\n\n  if (contains !== undefined) {\n    return document.defaultView.getComputedStyle(el, pseudoSelector).getPropertyValue(prop).indexOf(contains) !== -1;\n  }\n};\nconst isRTL = ({\n  element = document,\n  selector\n}) => stylePropCompare({\n  element,\n  selector,\n  prop: \"direction\",\n  equals: \"rtl\"\n});\nconst styleDurationToMs = durationStr => {\n  const parsed = parseFloat(durationStr) * (durationStr.indexOf(\"ms\") === -1 ? 1000 : 1);\n  return isNaN(parsed) ? 0 : parsed;\n};\n\n/*\nGeneric show/hide transition module\n*/\n\nconst DEFAULT_DURATION = .240;\nconst DEFAULT_DELAY = 0; // const TRANSITION =    \"both\";\n// See: transition\n\nconst show = opts => transition(opts, \"show\");\nconst hide = opts => transition(opts, \"hide\");\n/*\nopts:\n- el\n- duration\n- delay\n- showClass\n- transitionClass\n- before\n- show\n- hide\n- after\n- timingFunction\n\n- state (show, hide)\n*/\n\nconst transition = (opts, state) => {\n  const el = opts.el;\n\n  if (!el) {\n    return Promise.resolve();\n  } else {\n    return new Promise(resolve => {\n      const style = el.style;\n      const computedStyle = isClient ? window.getComputedStyle(el) : {};\n      const duration = opts.hasDuration ? opts.duration * 1000.0 : styleDurationToMs(computedStyle.transitionDuration);\n      const delay = opts.hasDelay ? opts.delay * 1000.0 : styleDurationToMs(computedStyle.transitionDelay);\n      const timingFunction = opts.timingFunction || computedStyle.transitionTimingFunction;\n\n      if (opts.transitionClass) {\n        const transitionClassElement = opts.transitionClassElement || el;\n        transitionClassElement.classList.add(opts.transitionClass);\n      }\n\n      const before = () => {\n        style.transitionDuration = \"0ms\";\n        style.transitionDelay = \"0ms\";\n        opts.before();\n      };\n\n      const maybeBefore = opts.before && state === \"show\" ? before : opts.before && state === \"hide\" ? before : null;\n      const after = opts.after ? () => opts.after() : null;\n\n      const applyTransition = () => {\n        style.transitionDuration = duration + \"ms\";\n        style.transitionDelay = delay + \"ms\";\n\n        if (timingFunction) {\n          style.transitionTimingFunction = timingFunction;\n        }\n\n        if (opts.showClass) {\n          const showClassElement = opts.showClassElement || el;\n          showClassElement.classList[state === \"show\" ? \"add\" : \"remove\"](opts.showClass);\n        }\n\n        if (opts.transition) {\n          opts.transition();\n        }\n      };\n\n      const doTransition = () => {\n        applyTransition();\n        setTimeout(() => {\n          if (after) {\n            after();\n          }\n\n          if (opts.transitionClass) {\n            const transitionClassElement = opts.transitionClassElement || el;\n            transitionClassElement.classList.remove(opts.transitionClass);\n            el.offsetHeight; // force reflow\n          }\n\n          resolve();\n        }, duration + delay);\n      };\n\n      const maybeDelayTransition = () => {\n        if (duration === 0) {\n          doTransition();\n        } else {\n          setTimeout(doTransition, 0);\n        }\n      };\n\n      if (maybeBefore) {\n        maybeBefore();\n        el.offsetHeight; // force reflow\n\n        setTimeout(() => {\n          maybeDelayTransition();\n        }, 0);\n      } else {\n        maybeDelayTransition();\n      }\n    });\n  }\n};\n\nconst transitionComponent = ({\n  isShow,\n  state,\n  attrs,\n  domElements,\n  beforeTransition,\n  afterTransition,\n  showClass,\n  transitionClass\n}) => {\n  if (state.transitioning()) {\n    return Promise.resolve();\n  }\n\n  state.transitioning(true);\n  state.visible(isShow ? true : false);\n\n  if (beforeTransition) {\n    beforeTransition();\n  }\n\n  const duration = attrs[isShow ? \"showDuration\" : \"hideDuration\"];\n  const delay = attrs[isShow ? \"showDelay\" : \"hideDelay\"];\n  const timingFunction = attrs[isShow ? \"showTimingFunction\" : \"hideTimingFunction\"];\n  const transitions = attrs.transitions;\n  const fn = isShow ? show : hide;\n  const opts1 = Object.assign({}, attrs, domElements, {\n    showClass,\n    transitionClass,\n    duration,\n    delay,\n    timingFunction\n  });\n  const opts2 = Object.assign({}, opts1, transitions && transitions[isShow ? \"show\" : \"hide\"](opts1));\n  const opts3 = Object.assign({}, opts2, {\n    duration: opts2.duration !== undefined ? opts2.duration : DEFAULT_DURATION,\n    hasDuration: opts2.duration !== undefined,\n    delay: opts2.delay !== undefined ? opts2.delay : DEFAULT_DELAY,\n    hasDelay: opts2.delay !== undefined\n  });\n  return fn(opts3).then(() => {\n    const id = state.instanceId;\n\n    if (attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"]) {\n      attrs[isShow ? \"fromMultipleDidShow\" : \"fromMultipleDidHide\"](id); // when used with Multiple; this will call attrs.didShow / attrs.didHide\n    } else if (attrs[isShow ? \"didShow\" : \"didHide\"]) {\n      attrs[isShow ? \"didShow\" : \"didHide\"](id); // when used directly\n    }\n\n    if (afterTransition) {\n      afterTransition();\n    }\n\n    state.transitioning(false);\n  });\n};\n\nconst deprecation = (component, {\n  option,\n  newOption,\n  newComponent\n}) => (option && console.warn(`${component}: option '${option}' is deprecated and will be removed in later versions. Use '${newOption}' instead.`), // eslint-disable-line no-console\nnewComponent && !newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use '${newComponent}' instead.`), // eslint-disable-line no-console\nnewComponent && newOption && console.warn(`${component}: this component is deprecated and will be removed in later versions. Use '${newComponent}' with option '${newOption}' instead.`) // eslint-disable-line no-console\n);\n\nconst iconDropdownUp = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-up-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 14l5-5 5 5z\\\"/></svg>\";\nconst iconDropdownDown = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" id=\\\"dd-down-svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M7 10l5 5 5-5z\\\"/></svg>\";\n\nexport { getAnimationEndEvent, Conditional, filterSupportedAttributes, unpackAttrs, classForSize, isClient, isServer, isTouch, pointerStartEvent, pointerEndEvent, pointerStartMoveEvent, pointerMoveEvent, pointerEndMoveEvent, Multi, show, hide, transitionComponent, throttle, subscribe, unsubscribe, emit, getStyle, stylePropCompare, isRTL, styleDurationToMs, deprecation, iconDropdownUp, iconDropdownDown };\n","import { filterSupportedAttributes, classForSize } from 'polythene-core';\n\nvar classes = {\n  component: \"pe-icon\",\n  // states\n  avatar: \"pe-icon--avatar\",\n  large: \"pe-icon--large\",\n  medium: \"pe-icon--medium\",\n  regular: \"pe-icon--regular\",\n  small: \"pe-icon--small\"\n};\n\nconst getElement = vnode => vnode.attrs.element || \"div\";\nconst createProps = (vnode, {\n  keys: k\n}) => {\n  const attrs = vnode.attrs;\n  return Object.assign({}, filterSupportedAttributes(attrs), {\n    className: [classes.component, classForSize(classes, attrs.size), attrs.avatar ? classes.avatar : null, attrs.tone === \"dark\" ? \"pe-dark-tone\" : null, attrs.tone === \"light\" ? \"pe-light-tone\" : null, attrs.className || attrs[k.class]].join(\" \")\n  }, attrs.events);\n};\nconst createContent = (vnode, {\n  renderer: h,\n  SVG\n}) => {\n  const attrs = vnode.attrs;\n  return attrs.content ? attrs.content : attrs.svg ? h(SVG, attrs.svg) : attrs.src ? h(\"img\", {\n    src: attrs.src\n  }) : attrs.children || vnode.children;\n};\n\nvar icon = /*#__PURE__*/Object.freeze({\n  getElement: getElement,\n  createProps: createProps,\n  createContent: createContent\n});\n\nexport { icon as coreIcon };\n","function Vnode(tag, key, attrs0, children0, text, dom) {\n  return {\n    tag: tag,\n    key: key,\n    attrs: attrs0,\n    children: children0,\n    text: text,\n    dom: dom,\n    domSize: undefined,\n    state: undefined,\n    events: undefined,\n    instance: undefined\n  };\n}\n\nVnode.normalize = function (node) {\n  if (Array.isArray(node)) return Vnode(\"[\", undefined, undefined, Vnode.normalizeChildren(node), undefined, undefined);\n  if (node != null && typeof node !== \"object\") return Vnode(\"#\", undefined, undefined, node === false ? \"\" : node, undefined, undefined);\n  return node;\n};\n\nVnode.normalizeChildren = function (input) {\n  var children0 = [];\n\n  for (var i = 0; i < input.length; i++) {\n    children0[i] = Vnode.normalize(input[i]);\n  }\n\n  return children0;\n}; // Call via `hyperscriptVnode0.apply(startOffset, arguments)`\n//\n// The reason I do it this way, forwarding the arguments and passing the start\n// offset in `this`, is so I don't have to create a temporary array in a\n// performance-critical path.\n//\n// In native ES6, I'd instead add a final `...args` parameter to the\n// `hyperscript0` and `fragment` factories and define this as\n// `hyperscriptVnode0(...args)`, since modern engines do optimize that away. But\n// ES5 (what Mithril requires thanks to IE support) doesn't give me that luxury,\n// and engines aren't nearly intelligent enough to do either of these:\n//\n// 1. Elide the allocation for `[].slice.call(arguments, 1)` when it's passed to\n//    another function only to be indexed.\n// 2. Elide an `arguments` allocation when it's passed to any function other\n//    than `Function.prototype.apply` or `Reflect.apply`.\n//\n// In ES6, it'd probably look closer to this (I'd need to profile it, though):\n// var hyperscriptVnode = function(attrs1, ...children1) {\n//     if (attrs1 == null || typeof attrs1 === \"object\" && attrs1.tag == null && !Array.isArray(attrs1)) {\n//         if (children1.length === 1 && Array.isArray(children1[0])) children1 = children1[0]\n//     } else {\n//         children1 = children1.length === 0 && Array.isArray(attrs1) ? attrs1 : [attrs1, ...children1]\n//         attrs1 = undefined\n//     }\n//\n//     if (attrs1 == null) attrs1 = {}\n//     return Vnode(\"\", attrs1.key, attrs1, children1)\n// }\n\n\nvar hyperscriptVnode = function () {\n  var attrs1 = arguments[this],\n      start = this + 1,\n      children1;\n\n  if (attrs1 == null) {\n    attrs1 = {};\n  } else if (typeof attrs1 !== \"object\" || attrs1.tag != null || Array.isArray(attrs1)) {\n    attrs1 = {};\n    start = this;\n  }\n\n  if (arguments.length === start + 1) {\n    children1 = arguments[start];\n    if (!Array.isArray(children1)) children1 = [children1];\n  } else {\n    children1 = [];\n\n    while (start < arguments.length) children1.push(arguments[start++]);\n  }\n\n  return Vnode(\"\", attrs1.key, attrs1, children1);\n};\n\nvar selectorParser = /(?:(^|#|\\.)([^#\\.\\[\\]]+))|(\\[(.+?)(?:\\s*=\\s*(\"|'|)((?:\\\\[\"'\\]]|.)*?)\\5)?\\])/g;\nvar selectorCache = {};\nvar hasOwn = {}.hasOwnProperty;\n\nfunction isEmpty(object) {\n  for (var key in object) if (hasOwn.call(object, key)) return false;\n\n  return true;\n}\n\nfunction compileSelector(selector) {\n  var match,\n      tag = \"div\",\n      classes = [],\n      attrs = {};\n\n  while (match = selectorParser.exec(selector)) {\n    var type = match[1],\n        value = match[2];\n    if (type === \"\" && value !== \"\") tag = value;else if (type === \"#\") attrs.id = value;else if (type === \".\") classes.push(value);else if (match[3][0] === \"[\") {\n      var attrValue = match[6];\n      if (attrValue) attrValue = attrValue.replace(/\\\\([\"'])/g, \"$1\").replace(/\\\\\\\\/g, \"\\\\\");\n      if (match[4] === \"class\") classes.push(attrValue);else attrs[match[4]] = attrValue === \"\" ? attrValue : attrValue || true;\n    }\n  }\n\n  if (classes.length > 0) attrs.className = classes.join(\" \");\n  return selectorCache[selector] = {\n    tag: tag,\n    attrs: attrs\n  };\n}\n\nfunction execSelector(state, vnode) {\n  var attrs = vnode.attrs;\n  var children = Vnode.normalizeChildren(vnode.children);\n  var hasClass = hasOwn.call(attrs, \"class\");\n  var className = hasClass ? attrs.class : attrs.className;\n  vnode.tag = state.tag;\n  vnode.attrs = null;\n  vnode.children = undefined;\n\n  if (!isEmpty(state.attrs) && !isEmpty(attrs)) {\n    var newAttrs = {};\n\n    for (var key in attrs) {\n      if (hasOwn.call(attrs, key)) newAttrs[key] = attrs[key];\n    }\n\n    attrs = newAttrs;\n  }\n\n  for (var key in state.attrs) {\n    if (hasOwn.call(state.attrs, key) && key !== \"className\" && !hasOwn.call(attrs, key)) {\n      attrs[key] = state.attrs[key];\n    }\n  }\n\n  if (className != null || state.attrs.className != null) attrs.className = className != null ? state.attrs.className != null ? String(state.attrs.className) + \" \" + String(className) : className : state.attrs.className != null ? state.attrs.className : null;\n  if (hasClass) attrs.class = null;\n\n  for (var key in attrs) {\n    if (hasOwn.call(attrs, key) && key !== \"key\") {\n      vnode.attrs = attrs;\n      break;\n    }\n  }\n\n  if (Array.isArray(children) && children.length === 1 && children[0] != null && children[0].tag === \"#\") {\n    vnode.text = children[0].children;\n  } else {\n    vnode.children = children;\n  }\n\n  return vnode;\n}\n\nfunction hyperscript(selector) {\n  if (selector == null || typeof selector !== \"string\" && typeof selector !== \"function\" && typeof selector.view !== \"function\") {\n    throw Error(\"The selector must be either a string or a component.\");\n  }\n\n  var vnode = hyperscriptVnode.apply(1, arguments);\n\n  if (typeof selector === \"string\") {\n    return execSelector(selectorCache[selector] || compileSelector(selector), vnode);\n  } else {\n    vnode.tag = selector;\n    return vnode;\n  }\n}\n\nhyperscript.trust = function (html) {\n  if (html == null) html = \"\";\n  return Vnode(\"<\", undefined, undefined, html, undefined, undefined);\n};\n\nhyperscript.fragment = function () {\n  var vnode2 = hyperscriptVnode.apply(0, arguments);\n  vnode2.tag = \"[\";\n  vnode2.children = Vnode.normalizeChildren(vnode2.children);\n  return vnode2;\n};\n\nvar m = function m() {\n  return hyperscript.apply(this, arguments);\n};\n\nm.m = hyperscript;\nm.trust = hyperscript.trust;\nm.fragment = hyperscript.fragment;\n/** @constructor */\n\nvar PromisePolyfill = function (executor) {\n  if (!(this instanceof PromisePolyfill)) throw new Error(\"Promise must be called with `new`\");\n  if (typeof executor !== \"function\") throw new TypeError(\"executor must be a function\");\n  var self = this,\n      resolvers = [],\n      rejectors = [],\n      resolveCurrent = handler(resolvers, true),\n      rejectCurrent = handler(rejectors, false);\n  var instance = self._instance = {\n    resolvers: resolvers,\n    rejectors: rejectors\n  };\n  var callAsync = typeof setImmediate === \"function\" ? setImmediate : setTimeout;\n\n  function handler(list, shouldAbsorb) {\n    return function execute(value) {\n      var then;\n\n      try {\n        if (shouldAbsorb && value != null && (typeof value === \"object\" || typeof value === \"function\") && typeof (then = value.then) === \"function\") {\n          if (value === self) throw new TypeError(\"Promise can't be resolved w/ itself\");\n          executeOnce(then.bind(value));\n        } else {\n          callAsync(function () {\n            if (!shouldAbsorb && list.length === 0) console.error(\"Possible unhandled promise rejection:\", value);\n\n            for (var i = 0; i < list.length; i++) list[i](value);\n\n            resolvers.length = 0, rejectors.length = 0;\n            instance.state = shouldAbsorb;\n\n            instance.retry = function () {\n              execute(value);\n            };\n          });\n        }\n      } catch (e) {\n        rejectCurrent(e);\n      }\n    };\n  }\n\n  function executeOnce(then) {\n    var runs = 0;\n\n    function run(fn) {\n      return function (value) {\n        if (runs++ > 0) return;\n        fn(value);\n      };\n    }\n\n    var onerror = run(rejectCurrent);\n\n    try {\n      then(run(resolveCurrent), onerror);\n    } catch (e) {\n      onerror(e);\n    }\n  }\n\n  executeOnce(executor);\n};\n\nPromisePolyfill.prototype.then = function (onFulfilled, onRejection) {\n  var self = this,\n      instance = self._instance;\n\n  function handle(callback, list, next, state) {\n    list.push(function (value) {\n      if (typeof callback !== \"function\") next(value);else try {\n        resolveNext(callback(value));\n      } catch (e) {\n        if (rejectNext) rejectNext(e);\n      }\n    });\n    if (typeof instance.retry === \"function\" && state === instance.state) instance.retry();\n  }\n\n  var resolveNext, rejectNext;\n  var promise = new PromisePolyfill(function (resolve, reject) {\n    resolveNext = resolve, rejectNext = reject;\n  });\n  handle(onFulfilled, instance.resolvers, resolveNext, true), handle(onRejection, instance.rejectors, rejectNext, false);\n  return promise;\n};\n\nPromisePolyfill.prototype.catch = function (onRejection) {\n  return this.then(null, onRejection);\n};\n\nPromisePolyfill.prototype.finally = function (callback) {\n  return this.then(function (value) {\n    return PromisePolyfill.resolve(callback()).then(function () {\n      return value;\n    });\n  }, function (reason) {\n    return PromisePolyfill.resolve(callback()).then(function () {\n      return PromisePolyfill.reject(reason);\n    });\n  });\n};\n\nPromisePolyfill.resolve = function (value) {\n  if (value instanceof PromisePolyfill) return value;\n  return new PromisePolyfill(function (resolve) {\n    resolve(value);\n  });\n};\n\nPromisePolyfill.reject = function (value) {\n  return new PromisePolyfill(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromisePolyfill.all = function (list) {\n  return new PromisePolyfill(function (resolve, reject) {\n    var total = list.length,\n        count = 0,\n        values = [];\n    if (list.length === 0) resolve([]);else for (var i = 0; i < list.length; i++) {\n      (function (i) {\n        function consume(value) {\n          count++;\n          values[i] = value;\n          if (count === total) resolve(values);\n        }\n\n        if (list[i] != null && (typeof list[i] === \"object\" || typeof list[i] === \"function\") && typeof list[i].then === \"function\") {\n          list[i].then(consume, reject);\n        } else consume(list[i]);\n      })(i);\n    }\n  });\n};\n\nPromisePolyfill.race = function (list) {\n  return new PromisePolyfill(function (resolve, reject) {\n    for (var i = 0; i < list.length; i++) {\n      list[i].then(resolve, reject);\n    }\n  });\n};\n\nif (typeof window !== \"undefined\") {\n  if (typeof window.Promise === \"undefined\") {\n    window.Promise = PromisePolyfill;\n  } else if (!window.Promise.prototype.finally) {\n    window.Promise.prototype.finally = PromisePolyfill.prototype.finally;\n  }\n\n  var PromisePolyfill = window.Promise;\n} else if (typeof global !== \"undefined\") {\n  if (typeof global.Promise === \"undefined\") {\n    global.Promise = PromisePolyfill;\n  } else if (!global.Promise.prototype.finally) {\n    global.Promise.prototype.finally = PromisePolyfill.prototype.finally;\n  }\n\n  var PromisePolyfill = global.Promise;\n}\n\nvar buildQueryString = function (object) {\n  if (Object.prototype.toString.call(object) !== \"[object Object]\") return \"\";\n  var args = [];\n\n  for (var key in object) {\n    destructure(key, object[key]);\n  }\n\n  return args.join(\"&\");\n\n  function destructure(key, value) {\n    if (Array.isArray(value)) {\n      for (var i = 0; i < value.length; i++) {\n        destructure(key + \"[\" + i + \"]\", value[i]);\n      }\n    } else if (Object.prototype.toString.call(value) === \"[object Object]\") {\n      for (var i in value) {\n        destructure(key + \"[\" + i + \"]\", value[i]);\n      }\n    } else args.push(encodeURIComponent(key) + (value != null && value !== \"\" ? \"=\" + encodeURIComponent(value) : \"\"));\n  }\n};\n\nvar _12 = function ($window, Promise) {\n  var callbackCount = 0;\n  var oncompletion;\n\n  function makeRequest(factory) {\n    return function (url, args) {\n      if (typeof url !== \"string\") {\n        args = url;\n        url = url.url;\n      } else if (args == null) args = {};\n\n      var promise0 = new Promise(function (resolve, reject) {\n        factory(url, args, function (data) {\n          if (typeof args.type === \"function\") {\n            if (Array.isArray(data)) {\n              for (var i = 0; i < data.length; i++) {\n                data[i] = new args.type(data[i]);\n              }\n            } else data = new args.type(data);\n          }\n\n          resolve(data);\n        }, reject);\n      });\n      if (args.background === true) return promise0;\n      var count = 0;\n\n      function complete() {\n        if (--count === 0 && typeof oncompletion === \"function\") oncompletion();\n      }\n\n      return wrap(promise0);\n\n      function wrap(promise0) {\n        var then0 = promise0.then;\n\n        promise0.then = function () {\n          count++;\n          var next = then0.apply(promise0, arguments);\n          next.then(complete, function (e) {\n            complete();\n            if (count === 0) throw e;\n          });\n          return wrap(next);\n        };\n\n        return promise0;\n      }\n    };\n  }\n\n  function hasHeader(args, name) {\n    for (var key in args.headers) {\n      if ({}.hasOwnProperty.call(args.headers, key) && name.test(key)) return true;\n    }\n\n    return false;\n  }\n\n  function interpolate(url, data, assemble) {\n    if (data == null) return url;\n    url = url.replace(/:([^\\/]+)/gi, function (m0, key) {\n      return data[key] != null ? data[key] : m0;\n    });\n\n    if (assemble && data != null) {\n      var querystring = buildQueryString(data);\n      if (querystring) url += (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + querystring;\n    }\n\n    return url;\n  }\n\n  return {\n    request: makeRequest(function (url, args, resolve, reject) {\n      var method = args.method != null ? args.method.toUpperCase() : \"GET\";\n      var useBody = method !== \"GET\" && method !== \"TRACE\" && (typeof args.useBody !== \"boolean\" || args.useBody);\n      var data = args.data;\n      var assumeJSON = (args.serialize == null || args.serialize === JSON.serialize) && !(data instanceof $window.FormData);\n\n      if (useBody) {\n        if (typeof args.serialize === \"function\") data = args.serialize(data);else if (!(data instanceof $window.FormData)) data = JSON.stringify(data);\n      }\n\n      var xhr = new $window.XMLHttpRequest(),\n          aborted = false,\n          _abort = xhr.abort;\n\n      xhr.abort = function abort() {\n        aborted = true;\n\n        _abort.call(xhr);\n      };\n\n      xhr.open(method, interpolate(url, args.data, !useBody), typeof args.async !== \"boolean\" || args.async, typeof args.user === \"string\" ? args.user : undefined, typeof args.password === \"string\" ? args.password : undefined);\n\n      if (assumeJSON && useBody && !hasHeader(args, /^content-type0$/i)) {\n        xhr.setRequestHeader(\"Content-Type\", \"application/json; charset=utf-8\");\n      }\n\n      if (typeof args.deserialize !== \"function\" && !hasHeader(args, /^accept$/i)) {\n        xhr.setRequestHeader(\"Accept\", \"application/json, text/*\");\n      }\n\n      if (args.withCredentials) xhr.withCredentials = args.withCredentials;\n      if (args.timeout) xhr.timeout = args.timeout;\n      if (args.responseType) xhr.responseType = args.responseType;\n\n      for (var key in args.headers) {\n        if ({}.hasOwnProperty.call(args.headers, key)) {\n          xhr.setRequestHeader(key, args.headers[key]);\n        }\n      }\n\n      if (typeof args.config === \"function\") xhr = args.config(xhr, args) || xhr;\n\n      xhr.onreadystatechange = function () {\n        // Don't throw errors on xhr.abort().\n        if (aborted) return;\n\n        if (xhr.readyState === 4) {\n          try {\n            var success = xhr.status >= 200 && xhr.status < 300 || xhr.status === 304 || /^file:\\/\\//i.test(url);\n            var response = xhr.responseText;\n\n            if (typeof args.extract === \"function\") {\n              response = args.extract(xhr, args);\n              success = true;\n            } else if (typeof args.deserialize === \"function\") {\n              response = args.deserialize(response);\n            } else {\n              try {\n                response = response ? JSON.parse(response) : null;\n              } catch (e) {\n                throw new Error(\"Invalid JSON: \" + response);\n              }\n            }\n\n            if (success) resolve(response);else {\n              var error = new Error(xhr.responseText);\n              error.code = xhr.status;\n              error.response = response;\n              reject(error);\n            }\n          } catch (e) {\n            reject(e);\n          }\n        }\n      };\n\n      if (useBody && data != null) xhr.send(data);else xhr.send();\n    }),\n    jsonp: makeRequest(function (url, args, resolve, reject) {\n      var callbackName = args.callbackName || \"_mithril_\" + Math.round(Math.random() * 1e16) + \"_\" + callbackCount++;\n      var script = $window.document.createElement(\"script\");\n\n      $window[callbackName] = function (data) {\n        script.parentNode.removeChild(script);\n        resolve(data);\n        delete $window[callbackName];\n      };\n\n      script.onerror = function () {\n        script.parentNode.removeChild(script);\n        reject(new Error(\"JSONP request failed\"));\n        delete $window[callbackName];\n      };\n\n      url = interpolate(url, args.data, true);\n      script.src = url + (url.indexOf(\"?\") < 0 ? \"?\" : \"&\") + encodeURIComponent(args.callbackKey || \"callback\") + \"=\" + encodeURIComponent(callbackName);\n      $window.document.documentElement.appendChild(script);\n    }),\n    setCompletionCallback: function (callback) {\n      oncompletion = callback;\n    }\n  };\n};\n\nvar requestService = _12(window, PromisePolyfill);\n\nvar coreRenderer = function ($window) {\n  var $doc = $window.document;\n  var nameSpace = {\n    svg: \"http://www.w3.org/2000/svg\",\n    math: \"http://www.w3.org/1998/Math/MathML\"\n  };\n  var redraw0;\n\n  function setRedraw(callback) {\n    return redraw0 = callback;\n  }\n\n  function getNameSpace(vnode3) {\n    return vnode3.attrs && vnode3.attrs.xmlns || nameSpace[vnode3.tag];\n  } //sanity check to discourage people from doing `vnode3.state = ...`\n\n\n  function checkState(vnode3, original) {\n    if (vnode3.state !== original) throw new Error(\"`vnode.state` must not be modified\");\n  } //Note: the hook is passed as the `this` argument to allow proxying the\n  //arguments without requiring a full array allocation to do so. It also\n  //takes advantage of the fact the current `vnode3` is the first argument in\n  //all lifecycle methods.\n\n\n  function callHook(vnode3) {\n    var original = vnode3.state;\n\n    try {\n      return this.apply(original, arguments);\n    } finally {\n      checkState(vnode3, original);\n    }\n  } // IE11 (at least) throws an UnspecifiedError when accessing document.activeElement when\n  // inside an iframe. Catch and swallow this error1, and heavy-handidly return null.\n\n\n  function activeElement() {\n    try {\n      return $doc.activeElement;\n    } catch (e) {\n      return null;\n    }\n  } //create\n\n\n  function createNodes(parent, vnodes, start, end, hooks, nextSibling, ns) {\n    for (var i = start; i < end; i++) {\n      var vnode3 = vnodes[i];\n\n      if (vnode3 != null) {\n        createNode(parent, vnode3, hooks, ns, nextSibling);\n      }\n    }\n  }\n\n  function createNode(parent, vnode3, hooks, ns, nextSibling) {\n    var tag = vnode3.tag;\n\n    if (typeof tag === \"string\") {\n      vnode3.state = {};\n      if (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks);\n\n      switch (tag) {\n        case \"#\":\n          createText(parent, vnode3, nextSibling);\n          break;\n\n        case \"<\":\n          createHTML(parent, vnode3, ns, nextSibling);\n          break;\n\n        case \"[\":\n          createFragment(parent, vnode3, hooks, ns, nextSibling);\n          break;\n\n        default:\n          createElement(parent, vnode3, hooks, ns, nextSibling);\n      }\n    } else createComponent(parent, vnode3, hooks, ns, nextSibling);\n  }\n\n  function createText(parent, vnode3, nextSibling) {\n    vnode3.dom = $doc.createTextNode(vnode3.children);\n    insertNode(parent, vnode3.dom, nextSibling);\n  }\n\n  var possibleParents = {\n    caption: \"table\",\n    thead: \"table\",\n    tbody: \"table\",\n    tfoot: \"table\",\n    tr: \"tbody\",\n    th: \"tr\",\n    td: \"tr\",\n    colgroup: \"table\",\n    col: \"colgroup\"\n  };\n\n  function createHTML(parent, vnode3, ns, nextSibling) {\n    var match0 = vnode3.children.match(/^\\s*?<(\\w+)/im) || []; // not using the proper parent makes the child element(s) vanish.\n    //     var div = document.createElement(\"div\")\n    //     div.innerHTML = \"<td>i</td><td>j</td>\"\n    //     console.log(div.innerHTML)\n    // --> \"ij\", no <td> in sight.\n\n    var temp = $doc.createElement(possibleParents[match0[1]] || \"div\");\n\n    if (ns === \"http://www.w3.org/2000/svg\") {\n      temp.innerHTML = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\">\" + vnode3.children + \"</svg>\";\n      temp = temp.firstChild;\n    } else {\n      temp.innerHTML = vnode3.children;\n    }\n\n    vnode3.dom = temp.firstChild;\n    vnode3.domSize = temp.childNodes.length;\n    var fragment = $doc.createDocumentFragment();\n    var child;\n\n    while (child = temp.firstChild) {\n      fragment.appendChild(child);\n    }\n\n    insertNode(parent, fragment, nextSibling);\n  }\n\n  function createFragment(parent, vnode3, hooks, ns, nextSibling) {\n    var fragment = $doc.createDocumentFragment();\n\n    if (vnode3.children != null) {\n      var children3 = vnode3.children;\n      createNodes(fragment, children3, 0, children3.length, hooks, null, ns);\n    }\n\n    vnode3.dom = fragment.firstChild;\n    vnode3.domSize = fragment.childNodes.length;\n    insertNode(parent, fragment, nextSibling);\n  }\n\n  function createElement(parent, vnode3, hooks, ns, nextSibling) {\n    var tag = vnode3.tag;\n    var attrs2 = vnode3.attrs;\n    var is = attrs2 && attrs2.is;\n    ns = getNameSpace(vnode3) || ns;\n    var element = ns ? is ? $doc.createElementNS(ns, tag, {\n      is: is\n    }) : $doc.createElementNS(ns, tag) : is ? $doc.createElement(tag, {\n      is: is\n    }) : $doc.createElement(tag);\n    vnode3.dom = element;\n\n    if (attrs2 != null) {\n      setAttrs(vnode3, attrs2, ns);\n    }\n\n    insertNode(parent, element, nextSibling);\n\n    if (attrs2 != null && attrs2.contenteditable != null) {\n      setContentEditable(vnode3);\n    } else {\n      if (vnode3.text != null) {\n        if (vnode3.text !== \"\") element.textContent = vnode3.text;else vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)];\n      }\n\n      if (vnode3.children != null) {\n        var children3 = vnode3.children;\n        createNodes(element, children3, 0, children3.length, hooks, null, ns);\n        if (vnode3.tag === \"select\" && attrs2 != null) setLateSelectAttrs(vnode3, attrs2);\n      }\n    }\n  }\n\n  function initComponent(vnode3, hooks) {\n    var sentinel;\n\n    if (typeof vnode3.tag.view === \"function\") {\n      vnode3.state = Object.create(vnode3.tag);\n      sentinel = vnode3.state.view;\n      if (sentinel.$$reentrantLock$$ != null) return;\n      sentinel.$$reentrantLock$$ = true;\n    } else {\n      vnode3.state = void 0;\n      sentinel = vnode3.tag;\n      if (sentinel.$$reentrantLock$$ != null) return;\n      sentinel.$$reentrantLock$$ = true;\n      vnode3.state = vnode3.tag.prototype != null && typeof vnode3.tag.prototype.view === \"function\" ? new vnode3.tag(vnode3) : vnode3.tag(vnode3);\n    }\n\n    initLifecycle(vnode3.state, vnode3, hooks);\n    if (vnode3.attrs != null) initLifecycle(vnode3.attrs, vnode3, hooks);\n    vnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3));\n    if (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\");\n    sentinel.$$reentrantLock$$ = null;\n  }\n\n  function createComponent(parent, vnode3, hooks, ns, nextSibling) {\n    initComponent(vnode3, hooks);\n\n    if (vnode3.instance != null) {\n      createNode(parent, vnode3.instance, hooks, ns, nextSibling);\n      vnode3.dom = vnode3.instance.dom;\n      vnode3.domSize = vnode3.dom != null ? vnode3.instance.domSize : 0;\n    } else {\n      vnode3.domSize = 0;\n    }\n  } //update\n\n  /**\n   * @param {Element|Fragment} parent - the parent element\n   * @param {Vnode[] | null} old - the list of vnodes of the last `render()` call for\n   *                               this part of the tree\n   * @param {Vnode[] | null} vnodes - as above, but for the current `render()` call.\n   * @param {Function[]} hooks - an accumulator of post-render hooks (oncreate/onupdate)\n   * @param {Element | null} nextSibling - the next0 DOM node if we're dealing with a\n   *                                       fragment that is not the last item in its\n   *                                       parent\n   * @param {'svg' | 'math' | String | null} ns) - the current XML namespace, if any\n   * @returns void\n   */\n  // This function diffs and patches lists of vnodes, both keyed and unkeyed.\n  //\n  // We will:\n  //\n  // 1. describe its general structure\n  // 2. focus on the diff algorithm optimizations\n  // 3. discuss DOM node operations.\n  // ## Overview:\n  //\n  // The updateNodes() function:\n  // - deals with trivial cases\n  // - determines whether the lists are keyed or unkeyed based on the first non-null node\n  //   of each list.\n  // - diffs them and patches the DOM if needed (that's the brunt of the code)\n  // - manages the leftovers: after diffing, are there:\n  //   - old nodes left to remove?\n  // \t - new nodes to insert?\n  // \t deal with them!\n  //\n  // The lists are only iterated over once, with an exception for the nodes in `old` that\n  // are visited in the fourth part of the diff and in the `removeNodes` loop.\n  // ## Diffing\n  //\n  // Reading https://github.com/localvoid/ivi/blob/ddc09d06abaef45248e6133f7040d00d3c6be853/packages/ivi/src/vdom/implementation.ts#L617-L837\n  // may be good for context on longest increasing subsequence-based logic for moving nodes.\n  //\n  // In order to diff keyed lists, one has to\n  //\n  // 1) match0 nodes in both lists, per key, and update them accordingly\n  // 2) create the nodes present in the new list, but absent in the old one\n  // 3) remove the nodes present in the old list, but absent in the new one\n  // 4) figure out what nodes in 1) to move in order to minimize the DOM operations.\n  //\n  // To achieve 1) one can create a dictionary of keys => index0 (for the old list), then1 iterate\n  // over the new list and for each new vnode3, find the corresponding vnode3 in the old list using\n  // the map.\n  // 2) is achieved in the same step: if a new node has no corresponding entry in the map, it is new\n  // and must be created.\n  // For the removals, we actually remove the nodes that have been updated from the old list.\n  // The nodes that remain in that list after 1) and 2) have been performed can be safely removed.\n  // The fourth step is a bit more complex and relies on the longest increasing subsequence (LIS)\n  // algorithm.\n  //\n  // the longest increasing subsequence is the list of nodes that can remain in place. Imagine going\n  // from `1,2,3,4,5` to `4,5,1,2,3` where the numbers are not necessarily the keys, but the indices\n  // corresponding to the keyed nodes in the old list (keyed nodes `e,d,c,b,a` => `b,a,e,d,c` would\n  //  match0 the above lists, for example).\n  //\n  // In there are two increasing subsequences: `4,5` and `1,2,3`, the latter being the longest. We\n  // can update those nodes without moving them, and only call `insertNode` on `4` and `5`.\n  //\n  // @localvoid adapted the algo to also support node deletions and insertions (the `lis` is actually\n  // the longest increasing subsequence *of old nodes still present in the new list*).\n  //\n  // It is a general algorithm that is fireproof in all circumstances, but it requires the allocation\n  // and the construction of a `key => oldIndex` map, and three arrays (one with `newIndex => oldIndex`,\n  // the `LIS` and a temporary one to create the LIS).\n  //\n  // So we cheat where we can: if the tails of the lists are identical, they are guaranteed to be part of\n  // the LIS and can be updated without moving them.\n  //\n  // If two nodes are swapped, they are guaranteed not to be part of the LIS, and must be moved (with\n  // the exception of the last node if the list is fully reversed).\n  //\n  // ## Finding the next0 sibling.\n  //\n  // `updateNode()` and `createNode()` expect a nextSibling parameter to perform DOM operations.\n  // When the list is being traversed top-down, at any index0, the DOM nodes up to the previous\n  // vnode3 reflect the content of the new list, whereas the rest of the DOM nodes reflect the old\n  // list. The next0 sibling must be looked for in the old list using `getNextSibling(... oldStart + 1 ...)`.\n  //\n  // In the other scenarios (swaps, upwards traversal, map-based diff),\n  // the new vnodes list is traversed upwards. The DOM nodes at the bottom of the list reflect the\n  // bottom part of the new vnodes list, and we can use the `v.dom`  value of the previous node\n  // as the next0 sibling (cached in the `nextSibling` variable).\n  // ## DOM node moves\n  //\n  // In most scenarios `updateNode()` and `createNode()` perform the DOM operations. However,\n  // this is not the case if the node moved (second and fourth part of the diff algo). We move\n  // the old DOM nodes before updateNode runs0 because it enables us to use the cached `nextSibling`\n  // variable rather than fetching it using `getNextSibling()`.\n  //\n  // The fourth part of the diff currently inserts nodes unconditionally, leading to issues\n  // like #1791 and #1999. We need to be smarter about those situations where adjascent old\n  // nodes remain together in the new list in a way that isn't covered by parts one and\n  // three of the diff algo.\n\n\n  function updateNodes(parent, old, vnodes, hooks, nextSibling, ns) {\n    if (old === vnodes || old == null && vnodes == null) return;else if (old == null || old.length === 0) createNodes(parent, vnodes, 0, vnodes.length, hooks, nextSibling, ns);else if (vnodes == null || vnodes.length === 0) removeNodes(old, 0, old.length);else {\n      var start = 0,\n          oldStart = 0,\n          isOldKeyed = null,\n          isKeyed = null;\n\n      for (; oldStart < old.length; oldStart++) {\n        if (old[oldStart] != null) {\n          isOldKeyed = old[oldStart].key != null;\n          break;\n        }\n      }\n\n      for (; start < vnodes.length; start++) {\n        if (vnodes[start] != null) {\n          isKeyed = vnodes[start].key != null;\n          break;\n        }\n      }\n\n      if (isKeyed === null && isOldKeyed == null) return; // both lists are full of nulls\n\n      if (isOldKeyed !== isKeyed) {\n        removeNodes(old, oldStart, old.length);\n        createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns);\n      } else if (!isKeyed) {\n        // Don't index0 past the end of either list (causes deopts).\n        var commonLength = old.length < vnodes.length ? old.length : vnodes.length; // Rewind if necessary to the first non-null index0 on either side.\n        // We could alternatively either explicitly create or remove nodes when `start !== oldStart`\n        // but that would be optimizing for sparse lists which are more rare than dense ones.\n\n        start = start < oldStart ? start : oldStart;\n\n        for (; start < commonLength; start++) {\n          o = old[start];\n          v = vnodes[start];\n          if (o === v || o == null && v == null) continue;else if (o == null) createNode(parent, v, hooks, ns, getNextSibling(old, start + 1, nextSibling));else if (v == null) removeNode(o);else updateNode(parent, o, v, hooks, getNextSibling(old, start + 1, nextSibling), ns);\n        }\n\n        if (old.length > commonLength) removeNodes(old, start, old.length);\n        if (vnodes.length > commonLength) createNodes(parent, vnodes, start, vnodes.length, hooks, nextSibling, ns);\n      } else {\n        // keyed diff\n        var oldEnd = old.length - 1,\n            end = vnodes.length - 1,\n            map,\n            o,\n            v,\n            oe,\n            ve,\n            topSibling; // bottom-up\n\n        while (oldEnd >= oldStart && end >= start) {\n          oe = old[oldEnd];\n          ve = vnodes[end];\n          if (oe == null) oldEnd--;else if (ve == null) end--;else if (oe.key === ve.key) {\n            if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);\n            if (ve.dom != null) nextSibling = ve.dom;\n            oldEnd--, end--;\n          } else {\n            break;\n          }\n        } // top-down\n\n\n        while (oldEnd >= oldStart && end >= start) {\n          o = old[oldStart];\n          v = vnodes[start];\n          if (o == null) oldStart++;else if (v == null) start++;else if (o.key === v.key) {\n            oldStart++, start++;\n            if (o !== v) updateNode(parent, o, v, hooks, getNextSibling(old, oldStart, nextSibling), ns);\n          } else {\n            break;\n          }\n        } // swaps and list reversals\n\n\n        while (oldEnd >= oldStart && end >= start) {\n          if (o == null) oldStart++;else if (v == null) start++;else if (oe == null) oldEnd--;else if (ve == null) end--;else if (start === end) break;else {\n            if (o.key !== ve.key || oe.key !== v.key) break;\n            topSibling = getNextSibling(old, oldStart, nextSibling);\n            insertNode(parent, toFragment(oe), topSibling);\n            if (oe !== v) updateNode(parent, oe, v, hooks, topSibling, ns);\n            if (++start <= --end) insertNode(parent, toFragment(o), nextSibling);\n            if (o !== ve) updateNode(parent, o, ve, hooks, nextSibling, ns);\n            if (ve.dom != null) nextSibling = ve.dom;\n            oldStart++;\n            oldEnd--;\n          }\n          oe = old[oldEnd];\n          ve = vnodes[end];\n          o = old[oldStart];\n          v = vnodes[start];\n        } // bottom up once again\n\n\n        while (oldEnd >= oldStart && end >= start) {\n          if (oe == null) oldEnd--;else if (ve == null) end--;else if (oe.key === ve.key) {\n            if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);\n            if (ve.dom != null) nextSibling = ve.dom;\n            oldEnd--, end--;\n          } else {\n            break;\n          }\n          oe = old[oldEnd];\n          ve = vnodes[end];\n        }\n\n        if (start > end) removeNodes(old, oldStart, oldEnd + 1);else if (oldStart > oldEnd) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns);else {\n          // inspired by ivi https://github.com/ivijs/ivi/ by Boris Kaul\n          var originalNextSibling = nextSibling,\n              vnodesLength = end - start + 1,\n              oldIndices = new Array(vnodesLength),\n              li = 0,\n              i = 0,\n              pos = 2147483647,\n              matched = 0,\n              map,\n              lisIndices;\n\n          for (i = 0; i < vnodesLength; i++) oldIndices[i] = -1;\n\n          for (i = end; i >= start; i--) {\n            if (map == null) map = getKeyMap(old, oldStart, oldEnd + 1);\n            ve = vnodes[i];\n\n            if (ve != null) {\n              var oldIndex = map[ve.key];\n\n              if (oldIndex != null) {\n                pos = oldIndex < pos ? oldIndex : -1; // becomes -1 if nodes were re-ordered\n\n                oldIndices[i - start] = oldIndex;\n                oe = old[oldIndex];\n                old[oldIndex] = null;\n                if (oe !== ve) updateNode(parent, oe, ve, hooks, nextSibling, ns);\n                if (ve.dom != null) nextSibling = ve.dom;\n                matched++;\n              }\n            }\n          }\n\n          nextSibling = originalNextSibling;\n          if (matched !== oldEnd - oldStart + 1) removeNodes(old, oldStart, oldEnd + 1);\n          if (matched === 0) createNodes(parent, vnodes, start, end + 1, hooks, nextSibling, ns);else {\n            if (pos === -1) {\n              // the indices of the indices of the items that are part of the\n              // longest increasing subsequence in the oldIndices list\n              lisIndices = makeLisIndices(oldIndices);\n              li = lisIndices.length - 1;\n\n              for (i = end; i >= start; i--) {\n                v = vnodes[i];\n                if (oldIndices[i - start] === -1) createNode(parent, v, hooks, ns, nextSibling);else {\n                  if (lisIndices[li] === i - start) li--;else insertNode(parent, toFragment(v), nextSibling);\n                }\n                if (v.dom != null) nextSibling = vnodes[i].dom;\n              }\n            } else {\n              for (i = end; i >= start; i--) {\n                v = vnodes[i];\n                if (oldIndices[i - start] === -1) createNode(parent, v, hooks, ns, nextSibling);\n                if (v.dom != null) nextSibling = vnodes[i].dom;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  function updateNode(parent, old, vnode3, hooks, nextSibling, ns) {\n    var oldTag = old.tag,\n        tag = vnode3.tag;\n\n    if (oldTag === tag) {\n      vnode3.state = old.state;\n      vnode3.events = old.events;\n      if (shouldNotUpdate(vnode3, old)) return;\n\n      if (typeof oldTag === \"string\") {\n        if (vnode3.attrs != null) {\n          updateLifecycle(vnode3.attrs, vnode3, hooks);\n        }\n\n        switch (oldTag) {\n          case \"#\":\n            updateText(old, vnode3);\n            break;\n\n          case \"<\":\n            updateHTML(parent, old, vnode3, ns, nextSibling);\n            break;\n\n          case \"[\":\n            updateFragment(parent, old, vnode3, hooks, nextSibling, ns);\n            break;\n\n          default:\n            updateElement(old, vnode3, hooks, ns);\n        }\n      } else updateComponent(parent, old, vnode3, hooks, nextSibling, ns);\n    } else {\n      removeNode(old);\n      createNode(parent, vnode3, hooks, ns, nextSibling);\n    }\n  }\n\n  function updateText(old, vnode3) {\n    if (old.children.toString() !== vnode3.children.toString()) {\n      old.dom.nodeValue = vnode3.children;\n    }\n\n    vnode3.dom = old.dom;\n  }\n\n  function updateHTML(parent, old, vnode3, ns, nextSibling) {\n    if (old.children !== vnode3.children) {\n      toFragment(old);\n      createHTML(parent, vnode3, ns, nextSibling);\n    } else vnode3.dom = old.dom, vnode3.domSize = old.domSize;\n  }\n\n  function updateFragment(parent, old, vnode3, hooks, nextSibling, ns) {\n    updateNodes(parent, old.children, vnode3.children, hooks, nextSibling, ns);\n    var domSize = 0,\n        children3 = vnode3.children;\n    vnode3.dom = null;\n\n    if (children3 != null) {\n      for (var i = 0; i < children3.length; i++) {\n        var child = children3[i];\n\n        if (child != null && child.dom != null) {\n          if (vnode3.dom == null) vnode3.dom = child.dom;\n          domSize += child.domSize || 1;\n        }\n      }\n\n      if (domSize !== 1) vnode3.domSize = domSize;\n    }\n  }\n\n  function updateElement(old, vnode3, hooks, ns) {\n    var element = vnode3.dom = old.dom;\n    ns = getNameSpace(vnode3) || ns;\n\n    if (vnode3.tag === \"textarea\") {\n      if (vnode3.attrs == null) vnode3.attrs = {};\n\n      if (vnode3.text != null) {\n        vnode3.attrs.value = vnode3.text; //FIXME handle0 multiple children3\n\n        vnode3.text = undefined;\n      }\n    }\n\n    updateAttrs(vnode3, old.attrs, vnode3.attrs, ns);\n\n    if (vnode3.attrs != null && vnode3.attrs.contenteditable != null) {\n      setContentEditable(vnode3);\n    } else if (old.text != null && vnode3.text != null && vnode3.text !== \"\") {\n      if (old.text.toString() !== vnode3.text.toString()) old.dom.firstChild.nodeValue = vnode3.text;\n    } else {\n      if (old.text != null) old.children = [Vnode(\"#\", undefined, undefined, old.text, undefined, old.dom.firstChild)];\n      if (vnode3.text != null) vnode3.children = [Vnode(\"#\", undefined, undefined, vnode3.text, undefined, undefined)];\n      updateNodes(element, old.children, vnode3.children, hooks, null, ns);\n    }\n  }\n\n  function updateComponent(parent, old, vnode3, hooks, nextSibling, ns) {\n    vnode3.instance = Vnode.normalize(callHook.call(vnode3.state.view, vnode3));\n    if (vnode3.instance === vnode3) throw Error(\"A view cannot return the vnode it received as argument\");\n    updateLifecycle(vnode3.state, vnode3, hooks);\n    if (vnode3.attrs != null) updateLifecycle(vnode3.attrs, vnode3, hooks);\n\n    if (vnode3.instance != null) {\n      if (old.instance == null) createNode(parent, vnode3.instance, hooks, ns, nextSibling);else updateNode(parent, old.instance, vnode3.instance, hooks, nextSibling, ns);\n      vnode3.dom = vnode3.instance.dom;\n      vnode3.domSize = vnode3.instance.domSize;\n    } else if (old.instance != null) {\n      removeNode(old.instance);\n      vnode3.dom = undefined;\n      vnode3.domSize = 0;\n    } else {\n      vnode3.dom = old.dom;\n      vnode3.domSize = old.domSize;\n    }\n  }\n\n  function getKeyMap(vnodes, start, end) {\n    var map = Object.create(null);\n\n    for (; start < end; start++) {\n      var vnode3 = vnodes[start];\n\n      if (vnode3 != null) {\n        var key = vnode3.key;\n        if (key != null) map[key] = start;\n      }\n    }\n\n    return map;\n  } // Lifted from ivi https://github.com/ivijs/ivi/\n  // takes a list of unique numbers (-1 is special and can\n  // occur multiple times) and returns an array with the indices\n  // of the items that are part of the longest increasing\n  // subsequece\n\n\n  function makeLisIndices(a) {\n    var p = a.slice();\n    var result = [];\n    result.push(0);\n    var u;\n    var v;\n\n    for (var i = 0, il = a.length; i < il; ++i) {\n      if (a[i] === -1) {\n        continue;\n      }\n\n      var j = result[result.length - 1];\n\n      if (a[j] < a[i]) {\n        p[i] = j;\n        result.push(i);\n        continue;\n      }\n\n      u = 0;\n      v = result.length - 1;\n\n      while (u < v) {\n        var c = (u + v) / 2 | 0; // eslint-disable-line no-bitwise\n\n        if (a[result[c]] < a[i]) {\n          u = c + 1;\n        } else {\n          v = c;\n        }\n      }\n\n      if (a[i] < a[result[u]]) {\n        if (u > 0) {\n          p[i] = result[u - 1];\n        }\n\n        result[u] = i;\n      }\n    }\n\n    u = result.length;\n    v = result[u - 1];\n\n    while (u-- > 0) {\n      result[u] = v;\n      v = p[v];\n    }\n\n    return result;\n  }\n\n  function toFragment(vnode3) {\n    var count0 = vnode3.domSize;\n\n    if (count0 != null || vnode3.dom == null) {\n      var fragment = $doc.createDocumentFragment();\n\n      if (count0 > 0) {\n        var dom = vnode3.dom;\n\n        while (--count0) fragment.appendChild(dom.nextSibling);\n\n        fragment.insertBefore(dom, fragment.firstChild);\n      }\n\n      return fragment;\n    } else return vnode3.dom;\n  }\n\n  function getNextSibling(vnodes, i, nextSibling) {\n    for (; i < vnodes.length; i++) {\n      if (vnodes[i] != null && vnodes[i].dom != null) return vnodes[i].dom;\n    }\n\n    return nextSibling;\n  }\n\n  function insertNode(parent, dom, nextSibling) {\n    if (nextSibling != null) parent.insertBefore(dom, nextSibling);else parent.appendChild(dom);\n  }\n\n  function setContentEditable(vnode3) {\n    var children3 = vnode3.children;\n\n    if (children3 != null && children3.length === 1 && children3[0].tag === \"<\") {\n      var content = children3[0].children;\n      if (vnode3.dom.innerHTML !== content) vnode3.dom.innerHTML = content;\n    } else if (vnode3.text != null || children3 != null && children3.length !== 0) throw new Error(\"Child node of a contenteditable must be trusted\");\n  } //remove\n\n\n  function removeNodes(vnodes, start, end) {\n    for (var i = start; i < end; i++) {\n      var vnode3 = vnodes[i];\n      if (vnode3 != null) removeNode(vnode3);\n    }\n  }\n\n  function removeNode(vnode3) {\n    var expected = 1,\n        called = 0;\n    var original = vnode3.state;\n\n    if (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeremove === \"function\") {\n      var result = callHook.call(vnode3.state.onbeforeremove, vnode3);\n\n      if (result != null && typeof result.then === \"function\") {\n        expected++;\n        result.then(continuation, continuation);\n      }\n    }\n\n    if (vnode3.attrs && typeof vnode3.attrs.onbeforeremove === \"function\") {\n      var result = callHook.call(vnode3.attrs.onbeforeremove, vnode3);\n\n      if (result != null && typeof result.then === \"function\") {\n        expected++;\n        result.then(continuation, continuation);\n      }\n    }\n\n    continuation();\n\n    function continuation() {\n      if (++called === expected) {\n        checkState(vnode3, original);\n        onremove(vnode3);\n\n        if (vnode3.dom) {\n          var parent = vnode3.dom.parentNode;\n          var count0 = vnode3.domSize || 1;\n\n          while (--count0) parent.removeChild(vnode3.dom.nextSibling);\n\n          parent.removeChild(vnode3.dom);\n        }\n      }\n    }\n  }\n\n  function onremove(vnode3) {\n    if (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onremove === \"function\") callHook.call(vnode3.state.onremove, vnode3);\n    if (vnode3.attrs && typeof vnode3.attrs.onremove === \"function\") callHook.call(vnode3.attrs.onremove, vnode3);\n\n    if (typeof vnode3.tag !== \"string\") {\n      if (vnode3.instance != null) onremove(vnode3.instance);\n    } else {\n      var children3 = vnode3.children;\n\n      if (Array.isArray(children3)) {\n        for (var i = 0; i < children3.length; i++) {\n          var child = children3[i];\n          if (child != null) onremove(child);\n        }\n      }\n    }\n  } //attrs2\n\n\n  function setAttrs(vnode3, attrs2, ns) {\n    for (var key in attrs2) {\n      setAttr(vnode3, key, null, attrs2[key], ns);\n    }\n  }\n\n  function setAttr(vnode3, key, old, value, ns) {\n    if (key === \"key\" || key === \"is\" || value == null || isLifecycleMethod(key) || old === value && !isFormAttribute(vnode3, key) && typeof value !== \"object\") return;\n    if (key[0] === \"o\" && key[1] === \"n\") return updateEvent(vnode3, key, value);\n    if (key.slice(0, 6) === \"xlink:\") vnode3.dom.setAttributeNS(\"http://www.w3.org/1999/xlink\", key.slice(6), value);else if (key === \"style\") updateStyle(vnode3.dom, old, value);else if (hasPropertyKey(vnode3, key, ns)) {\n      if (key === \"value\") {\n        // Only do the coercion if we're actually going to check the value.\n\n        /* eslint-disable no-implicit-coercion */\n        //setting input[value] to same value by typing on focused element moves cursor to end in Chrome\n        if ((vnode3.tag === \"input\" || vnode3.tag === \"textarea\") && vnode3.dom.value === \"\" + value && vnode3.dom === activeElement()) return; //setting select[value] to same value while having select open blinks select dropdown in Chrome\n\n        if (vnode3.tag === \"select\" && old !== null && vnode3.dom.value === \"\" + value) return; //setting option[value] to same value while having select open blinks select dropdown in Chrome\n\n        if (vnode3.tag === \"option\" && old !== null && vnode3.dom.value === \"\" + value) return;\n        /* eslint-enable no-implicit-coercion */\n      } // If you assign an input type1 that is not supported by IE 11 with an assignment expression, an error1 will occur.\n\n\n      if (vnode3.tag === \"input\" && key === \"type\") vnode3.dom.setAttribute(key, value);else vnode3.dom[key] = value;\n    } else {\n      if (typeof value === \"boolean\") {\n        if (value) vnode3.dom.setAttribute(key, \"\");else vnode3.dom.removeAttribute(key);\n      } else vnode3.dom.setAttribute(key === \"className\" ? \"class\" : key, value);\n    }\n  }\n\n  function removeAttr(vnode3, key, old, ns) {\n    if (key === \"key\" || key === \"is\" || old == null || isLifecycleMethod(key)) return;\n    if (key[0] === \"o\" && key[1] === \"n\" && !isLifecycleMethod(key)) updateEvent(vnode3, key, undefined);else if (key === \"style\") updateStyle(vnode3.dom, old, null);else if (hasPropertyKey(vnode3, key, ns) && key !== \"className\" && !(key === \"value\" && (vnode3.tag === \"option\" || vnode3.tag === \"select\" && vnode3.dom.selectedIndex === -1 && vnode3.dom === activeElement())) && !(vnode3.tag === \"input\" && key === \"type\")) {\n      vnode3.dom[key] = null;\n    } else {\n      var nsLastIndex = key.indexOf(\":\");\n      if (nsLastIndex !== -1) key = key.slice(nsLastIndex + 1);\n      if (old !== false) vnode3.dom.removeAttribute(key === \"className\" ? \"class\" : key);\n    }\n  }\n\n  function setLateSelectAttrs(vnode3, attrs2) {\n    if (\"value\" in attrs2) {\n      if (attrs2.value === null) {\n        if (vnode3.dom.selectedIndex !== -1) vnode3.dom.value = null;\n      } else {\n        var normalized = \"\" + attrs2.value; // eslint-disable-line no-implicit-coercion\n\n        if (vnode3.dom.value !== normalized || vnode3.dom.selectedIndex === -1) {\n          vnode3.dom.value = normalized;\n        }\n      }\n    }\n\n    if (\"selectedIndex\" in attrs2) setAttr(vnode3, \"selectedIndex\", null, attrs2.selectedIndex, undefined);\n  }\n\n  function updateAttrs(vnode3, old, attrs2, ns) {\n    if (attrs2 != null) {\n      for (var key in attrs2) {\n        setAttr(vnode3, key, old && old[key], attrs2[key], ns);\n      }\n    }\n\n    var val;\n\n    if (old != null) {\n      for (var key in old) {\n        if ((val = old[key]) != null && (attrs2 == null || attrs2[key] == null)) {\n          removeAttr(vnode3, key, val, ns);\n        }\n      }\n    }\n  }\n\n  function isFormAttribute(vnode3, attr) {\n    return attr === \"value\" || attr === \"checked\" || attr === \"selectedIndex\" || attr === \"selected\" && vnode3.dom === activeElement() || vnode3.tag === \"option\" && vnode3.dom.parentNode === $doc.activeElement;\n  }\n\n  function isLifecycleMethod(attr) {\n    return attr === \"oninit\" || attr === \"oncreate\" || attr === \"onupdate\" || attr === \"onremove\" || attr === \"onbeforeremove\" || attr === \"onbeforeupdate\";\n  }\n\n  function hasPropertyKey(vnode3, key, ns) {\n    // Filter out namespaced keys\n    return ns === undefined && ( // If it's a custom element, just keep it.\n    vnode3.tag.indexOf(\"-\") > -1 || vnode3.attrs != null && vnode3.attrs.is || // If it's a normal element, let's try to avoid a few browser bugs.\n    key !== \"href\" && key !== \"list\" && key !== \"form\" && key !== \"width\" && key !== \"height\" // && key !== \"type\"\n    // Defer the property check until *after* we check everything.\n    ) && key in vnode3.dom;\n  } //style\n\n\n  var uppercaseRegex = /[A-Z]/g;\n\n  function toLowerCase(capital) {\n    return \"-\" + capital.toLowerCase();\n  }\n\n  function normalizeKey(key) {\n    return key[0] === \"-\" && key[1] === \"-\" ? key : key === \"cssFloat\" ? \"float\" : key.replace(uppercaseRegex, toLowerCase);\n  }\n\n  function updateStyle(element, old, style) {\n    if (old === style) ; else if (style == null) {\n      // New style is missing, just clear it.\n      element.style.cssText = \"\";\n    } else if (typeof style !== \"object\") {\n      // New style is a string, let engine deal with patching.\n      element.style.cssText = style;\n    } else if (old == null || typeof old !== \"object\") {\n      // `old` is missing or a string, `style` is an object.\n      element.style.cssText = \"\"; // Add new style properties\n\n      for (var key in style) {\n        var value = style[key];\n        if (value != null) element.style.setProperty(normalizeKey(key), String(value));\n      }\n    } else {\n      // Both old & new are (different) objects.\n      // Update style properties that have changed\n      for (var key in style) {\n        var value = style[key];\n\n        if (value != null && (value = String(value)) !== String(old[key])) {\n          element.style.setProperty(normalizeKey(key), value);\n        }\n      } // Remove style properties that no longer exist\n\n\n      for (var key in old) {\n        if (old[key] != null && style[key] == null) {\n          element.style.removeProperty(normalizeKey(key));\n        }\n      }\n    }\n  } // Here's an explanation of how this works:\n  // 1. The event names are always (by design) prefixed by `on`.\n  // 2. The EventListener interface accepts either a function or an object\n  //    with a `handleEvent` method0.\n  // 3. The object does not inherit from `Object.prototype`, to avoid\n  //    any potential interference with that (e.g. setters).\n  // 4. The event name is remapped to the handler0 before calling it.\n  // 5. In function-based event handlers, `ev.target === this`. We replicate\n  //    that below.\n  // 6. In function-based event handlers, `return false` prevents the default\n  //    action and stops event propagation. We replicate that below.\n\n\n  function EventDict() {}\n\n  EventDict.prototype = Object.create(null);\n\n  EventDict.prototype.handleEvent = function (ev) {\n    var handler0 = this[\"on\" + ev.type];\n    var result;\n    if (typeof handler0 === \"function\") result = handler0.call(ev.currentTarget, ev);else if (typeof handler0.handleEvent === \"function\") handler0.handleEvent(ev);\n    if (ev.redraw === false) ev.redraw = undefined;else if (typeof redraw0 === \"function\") redraw0();\n\n    if (result === false) {\n      ev.preventDefault();\n      ev.stopPropagation();\n    }\n  }; //event\n\n\n  function updateEvent(vnode3, key, value) {\n    if (vnode3.events != null) {\n      if (vnode3.events[key] === value) return;\n\n      if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n        if (vnode3.events[key] == null) vnode3.dom.addEventListener(key.slice(2), vnode3.events, false);\n        vnode3.events[key] = value;\n      } else {\n        if (vnode3.events[key] != null) vnode3.dom.removeEventListener(key.slice(2), vnode3.events, false);\n        vnode3.events[key] = undefined;\n      }\n    } else if (value != null && (typeof value === \"function\" || typeof value === \"object\")) {\n      vnode3.events = new EventDict();\n      vnode3.dom.addEventListener(key.slice(2), vnode3.events, false);\n      vnode3.events[key] = value;\n    }\n  } //lifecycle\n\n\n  function initLifecycle(source, vnode3, hooks) {\n    if (typeof source.oninit === \"function\") callHook.call(source.oninit, vnode3);\n    if (typeof source.oncreate === \"function\") hooks.push(callHook.bind(source.oncreate, vnode3));\n  }\n\n  function updateLifecycle(source, vnode3, hooks) {\n    if (typeof source.onupdate === \"function\") hooks.push(callHook.bind(source.onupdate, vnode3));\n  }\n\n  function shouldNotUpdate(vnode3, old) {\n    do {\n      if (vnode3.attrs != null && typeof vnode3.attrs.onbeforeupdate === \"function\") {\n        var force = callHook.call(vnode3.attrs.onbeforeupdate, vnode3, old);\n        if (force !== undefined && !force) break;\n      }\n\n      if (typeof vnode3.tag !== \"string\" && typeof vnode3.state.onbeforeupdate === \"function\") {\n        var force = callHook.call(vnode3.state.onbeforeupdate, vnode3, old);\n        if (force !== undefined && !force) break;\n      }\n\n      return false;\n    } while (false); // eslint-disable-line no-constant-condition\n\n\n    vnode3.dom = old.dom;\n    vnode3.domSize = old.domSize;\n    vnode3.instance = old.instance;\n    return true;\n  }\n\n  function render(dom, vnodes) {\n    if (!dom) throw new Error(\"Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.\");\n    var hooks = [];\n    var active = activeElement();\n    var namespace = dom.namespaceURI; // First time rendering0 into a node clears it out\n\n    if (dom.vnodes == null) dom.textContent = \"\";\n    vnodes = Vnode.normalizeChildren(Array.isArray(vnodes) ? vnodes : [vnodes]);\n    updateNodes(dom, dom.vnodes, vnodes, hooks, null, namespace === \"http://www.w3.org/1999/xhtml\" ? undefined : namespace);\n    dom.vnodes = vnodes; // `document.activeElement` can return null: https://html.spec.whatwg.org/multipage/interaction.html#dom-document-activeelement\n\n    if (active != null && activeElement() !== active && typeof active.focus === \"function\") active.focus();\n\n    for (var i = 0; i < hooks.length; i++) hooks[i]();\n  }\n\n  return {\n    render: render,\n    setRedraw: setRedraw\n  };\n};\n\nfunction throttle(callback) {\n  var pending = null;\n  return function () {\n    if (pending === null) {\n      pending = requestAnimationFrame(function () {\n        pending = null;\n        callback();\n      });\n    }\n  };\n}\n\nvar _15 = function ($window, throttleMock) {\n  var renderService = coreRenderer($window);\n  var callbacks = [];\n  var rendering = false;\n\n  function subscribe(key, callback) {\n    unsubscribe(key);\n    callbacks.push(key, callback);\n  }\n\n  function unsubscribe(key) {\n    var index = callbacks.indexOf(key);\n    if (index > -1) callbacks.splice(index, 2);\n  }\n\n  function sync() {\n    if (rendering) throw new Error(\"Nested m.redraw.sync() call\");\n    rendering = true;\n\n    for (var i = 1; i < callbacks.length; i += 2) try {\n      callbacks[i]();\n    } catch (e) {\n      if (typeof console !== \"undefined\") console.error(e);\n    }\n\n    rendering = false;\n  }\n\n  var redraw = (throttleMock || throttle)(sync);\n  redraw.sync = sync;\n  renderService.setRedraw(redraw);\n  return {\n    subscribe: subscribe,\n    unsubscribe: unsubscribe,\n    redraw: redraw,\n    render: renderService.render\n  };\n};\n\nvar redrawService = _15(window);\n\nrequestService.setCompletionCallback(redrawService.redraw);\n\nvar _20 = function (redrawService0) {\n  return function (root, component) {\n    if (component === null) {\n      redrawService0.render(root, []);\n      redrawService0.unsubscribe(root);\n      return;\n    }\n\n    if (component.view == null && typeof component !== \"function\") throw new Error(\"m.mount(element, component) expects a component, not a vnode\");\n\n    var run0 = function () {\n      redrawService0.render(root, Vnode(component));\n    };\n\n    redrawService0.subscribe(root, run0);\n    run0();\n  };\n};\n\nm.mount = _20(redrawService);\nvar Promise = PromisePolyfill;\n\nvar parseQueryString = function (string) {\n  if (string === \"\" || string == null) return {};\n  if (string.charAt(0) === \"?\") string = string.slice(1);\n  var entries = string.split(\"&\"),\n      data2 = {},\n      counters = {};\n\n  for (var i = 0; i < entries.length; i++) {\n    var entry = entries[i].split(\"=\");\n    var key2 = decodeURIComponent(entry[0]);\n    var value0 = entry.length === 2 ? decodeURIComponent(entry[1]) : \"\";\n    if (value0 === \"true\") value0 = true;else if (value0 === \"false\") value0 = false;\n    var levels = key2.split(/\\]\\[?|\\[/);\n    var cursor = data2;\n    if (key2.indexOf(\"[\") > -1) levels.pop();\n\n    for (var j0 = 0; j0 < levels.length; j0++) {\n      var level = levels[j0],\n          nextLevel = levels[j0 + 1];\n      var isNumber = nextLevel == \"\" || !isNaN(parseInt(nextLevel, 10));\n      var isValue = j0 === levels.length - 1;\n\n      if (level === \"\") {\n        var key2 = levels.slice(0, j0).join();\n        if (counters[key2] == null) counters[key2] = 0;\n        level = counters[key2]++;\n      }\n\n      if (cursor[level] == null) {\n        cursor[level] = isValue ? value0 : isNumber ? [] : {};\n      }\n\n      cursor = cursor[level];\n    }\n  }\n\n  return data2;\n};\n\nvar coreRouter = function ($window) {\n  var supportsPushState = typeof $window.history.pushState === \"function\";\n  var callAsync0 = typeof setImmediate === \"function\" ? setImmediate : setTimeout;\n\n  function normalize(fragment0) {\n    var data1 = $window.location[fragment0].replace(/(?:%[a-f89][a-f0-9])+/gim, decodeURIComponent);\n    if (fragment0 === \"pathname\" && data1[0] !== \"/\") data1 = \"/\" + data1;\n    return data1;\n  }\n\n  var asyncId;\n\n  function debounceAsync(callback) {\n    return function () {\n      if (asyncId != null) return;\n      asyncId = callAsync0(function () {\n        asyncId = null;\n        callback();\n      });\n    };\n  }\n\n  function parsePath(path, queryData, hashData) {\n    var queryIndex = path.indexOf(\"?\");\n    var hashIndex = path.indexOf(\"#\");\n    var pathEnd = queryIndex > -1 ? queryIndex : hashIndex > -1 ? hashIndex : path.length;\n\n    if (queryIndex > -1) {\n      var queryEnd = hashIndex > -1 ? hashIndex : path.length;\n      var queryParams = parseQueryString(path.slice(queryIndex + 1, queryEnd));\n\n      for (var key1 in queryParams) queryData[key1] = queryParams[key1];\n    }\n\n    if (hashIndex > -1) {\n      var hashParams = parseQueryString(path.slice(hashIndex + 1));\n\n      for (var key1 in hashParams) hashData[key1] = hashParams[key1];\n    }\n\n    return path.slice(0, pathEnd);\n  }\n\n  var router = {\n    prefix: \"#!\"\n  };\n\n  router.getPath = function () {\n    var type2 = router.prefix.charAt(0);\n\n    switch (type2) {\n      case \"#\":\n        return normalize(\"hash\").slice(router.prefix.length);\n\n      case \"?\":\n        return normalize(\"search\").slice(router.prefix.length) + normalize(\"hash\");\n\n      default:\n        return normalize(\"pathname\").slice(router.prefix.length) + normalize(\"search\") + normalize(\"hash\");\n    }\n  };\n\n  router.setPath = function (path, data1, options) {\n    var queryData = {},\n        hashData = {};\n    path = parsePath(path, queryData, hashData);\n\n    if (data1 != null) {\n      for (var key1 in data1) queryData[key1] = data1[key1];\n\n      path = path.replace(/:([^\\/]+)/g, function (match1, token) {\n        delete queryData[token];\n        return data1[token];\n      });\n    }\n\n    var query = buildQueryString(queryData);\n    if (query) path += \"?\" + query;\n    var hash = buildQueryString(hashData);\n    if (hash) path += \"#\" + hash;\n\n    if (supportsPushState) {\n      var state = options ? options.state : null;\n      var title = options ? options.title : null;\n      $window.onpopstate();\n      if (options && options.replace) $window.history.replaceState(state, title, router.prefix + path);else $window.history.pushState(state, title, router.prefix + path);\n    } else $window.location.href = router.prefix + path;\n  };\n\n  router.defineRoutes = function (routes, resolve, reject) {\n    function resolveRoute() {\n      var path = router.getPath();\n      var params = {};\n      var pathname = parsePath(path, params, params);\n      var state = $window.history.state;\n\n      if (state != null) {\n        for (var k in state) params[k] = state[k];\n      }\n\n      for (var route0 in routes) {\n        var matcher = new RegExp(\"^\" + route0.replace(/:[^\\/]+?\\.{3}/g, \"(.*?)\").replace(/:[^\\/]+/g, \"([^\\\\/]+)\") + \"\\/?$\");\n\n        if (matcher.test(pathname)) {\n          pathname.replace(matcher, function () {\n            var keys = route0.match(/:[^\\/]+/g) || [];\n            var values = [].slice.call(arguments, 1, -2);\n\n            for (var i = 0; i < keys.length; i++) {\n              params[keys[i].replace(/:|\\./g, \"\")] = decodeURIComponent(values[i]);\n            }\n\n            resolve(routes[route0], params, path, route0);\n          });\n          return;\n        }\n      }\n\n      reject(path, params);\n    }\n\n    if (supportsPushState) $window.onpopstate = debounceAsync(resolveRoute);else if (router.prefix.charAt(0) === \"#\") $window.onhashchange = resolveRoute;\n    resolveRoute();\n  };\n\n  return router;\n};\n\nvar _24 = function ($window, redrawService0) {\n  var routeService = coreRouter($window);\n\n  var identity = function (v0) {\n    return v0;\n  };\n\n  var render1, component, attrs3, currentPath, lastUpdate;\n\n  var route = function (root, defaultRoute, routes) {\n    if (root == null) throw new Error(\"Ensure the DOM element that was passed to `m.route` is not undefined\");\n\n    function run1() {\n      if (render1 != null) redrawService0.render(root, render1(Vnode(component, attrs3.key, attrs3)));\n    }\n\n    var redraw3 = function () {\n      run1();\n      redraw3 = redrawService0.redraw;\n    };\n\n    redrawService0.subscribe(root, run1);\n\n    var bail = function (path) {\n      if (path !== defaultRoute) routeService.setPath(defaultRoute, null, {\n        replace: true\n      });else throw new Error(\"Could not resolve default route \" + defaultRoute);\n    };\n\n    routeService.defineRoutes(routes, function (payload, params, path) {\n      var update = lastUpdate = function (routeResolver, comp) {\n        if (update !== lastUpdate) return;\n        component = comp != null && (typeof comp.view === \"function\" || typeof comp === \"function\") ? comp : \"div\";\n        attrs3 = params, currentPath = path, lastUpdate = null;\n        render1 = (routeResolver.render || identity).bind(routeResolver);\n        redraw3();\n      };\n\n      if (payload.view || typeof payload === \"function\") update({}, payload);else {\n        if (payload.onmatch) {\n          Promise.resolve(payload.onmatch(params, path)).then(function (resolved) {\n            update(payload, resolved);\n          }, bail);\n        } else update(payload, \"div\");\n      }\n    }, bail);\n  };\n\n  route.set = function (path, data0, options) {\n    if (lastUpdate != null) {\n      options = options || {};\n      options.replace = true;\n    }\n\n    lastUpdate = null;\n    routeService.setPath(path, data0, options);\n  };\n\n  route.get = function () {\n    return currentPath;\n  };\n\n  route.prefix = function (prefix) {\n    routeService.prefix = prefix;\n  };\n\n  var link = function (options, vnode5) {\n    vnode5.dom.setAttribute(\"href\", routeService.prefix + vnode5.attrs.href);\n\n    vnode5.dom.onclick = function (e) {\n      if (e.ctrlKey || e.metaKey || e.shiftKey || e.which === 2) return;\n      e.preventDefault();\n      e.redraw = false;\n      var href = this.getAttribute(\"href\");\n      if (href.indexOf(routeService.prefix) === 0) href = href.slice(routeService.prefix.length);\n      route.set(href, undefined, options);\n    };\n  };\n\n  route.link = function (args0) {\n    if (args0.tag == null) return link.bind(link, args0);\n    return link({}, args0);\n  };\n\n  route.param = function (key0) {\n    if (typeof attrs3 !== \"undefined\" && typeof key0 !== \"undefined\") return attrs3[key0];\n    return attrs3;\n  };\n\n  return route;\n};\n\nm.route = _24(window, redrawService);\n\nvar _31 = coreRenderer(window);\n\nm.render = _31.render;\nm.redraw = redrawService.redraw;\nm.request = requestService.request;\nm.jsonp = requestService.jsonp;\nm.parseQueryString = parseQueryString;\nm.buildQueryString = buildQueryString;\nm.version = \"2.0.0-rc.3\";\nm.vnode = Vnode;\nm.PromisePolyfill = PromisePolyfill;\n\nconst keys = {\n  autocomplete: \"autocomplete\",\n  autofocus: \"autofocus\",\n  class: \"class\",\n  className: \"class\",\n  enctype: \"enctype\",\n  formaction: \"formaction\",\n  frameborder: \"frameborder\",\n  maxlength: \"maxlength\",\n  minlength: \"minlength\",\n  onblur: \"onblur\",\n  onchange: \"onchange\",\n  onclick: \"onclick\",\n  onfocus: \"onfocus\",\n  oninput: \"oninput\",\n  onkeydown: \"onkeydown\",\n  onkeyup: \"onkeyup\",\n  onmousedown: \"onmousedown\",\n  onmouseout: \"onmouseout\",\n  onmouseover: \"onmouseover\",\n  onmouseup: \"onmouseup\",\n  onscroll: \"onscroll\",\n  onsubmit: \"onsubmit\",\n  ontouchend: \"ontouchend\",\n  ontouchmove: \"ontouchmove\",\n  ontouchstart: \"ontouchstart\",\n  readonly: \"readonly\",\n  tabindex: \"tabindex\"\n};\nconst renderer = m;\nrenderer.displayName = \"mithril\";\n/* eslint-enable */\n\nStream.SKIP = {};\nStream.lift = lift;\nStream.scan = scan;\nStream.merge = merge;\nStream.combine = combine;\nStream.scanMerge = scanMerge;\nStream[\"fantasy-land/of\"] = Stream;\nlet warnedHalt = false;\nObject.defineProperty(Stream, \"HALT\", {\n  get: function () {\n    warnedHalt && console.log(\"HALT is deprecated and has been renamed to SKIP\");\n    warnedHalt = true;\n    return Stream.SKIP;\n  }\n});\n\nfunction Stream(value) {\n  var dependentStreams = [];\n  var dependentFns = [];\n\n  function stream(v) {\n    if (arguments.length && v !== Stream.SKIP && open(stream)) {\n      value = v;\n      stream.changing();\n      stream.state = \"active\";\n      dependentStreams.forEach(function (s, i) {\n        s(dependentFns[i](value));\n      });\n    }\n\n    return value;\n  }\n\n  stream.constructor = Stream;\n  stream.state = arguments.length && value !== Stream.SKIP ? \"active\" : \"pending\";\n\n  stream.changing = function () {\n    open(stream) && (stream.state = \"changing\");\n    dependentStreams.forEach(function (s) {\n      s.dependent && s.dependent.changing();\n      s.changing();\n    });\n  };\n\n  stream.map = function (fn, ignoreInitial) {\n    var target = stream.state === \"active\" && ignoreInitial !== Stream.SKIP ? Stream(fn(value)) : Stream();\n    dependentStreams.push(target);\n    dependentFns.push(fn);\n    return target;\n  };\n\n  let end;\n\n  function createEnd() {\n    end = Stream();\n    end.map(function (value) {\n      if (value === true) {\n        stream.state = \"ended\";\n        dependentStreams.length = dependentFns.length = 0;\n      }\n\n      return value;\n    });\n    return end;\n  }\n\n  stream.toJSON = function () {\n    return value != null && typeof value.toJSON === \"function\" ? value.toJSON() : value;\n  };\n\n  stream[\"fantasy-land/map\"] = stream.map;\n\n  stream[\"fantasy-land/ap\"] = function (x) {\n    return combine(function (s1, s2) {\n      return s1()(s2());\n    }, [x, stream]);\n  };\n\n  Object.defineProperty(stream, \"end\", {\n    get: function () {\n      return end || createEnd();\n    }\n  });\n  return stream;\n}\n\nfunction combine(fn, streams) {\n  var ready = streams.every(function (s) {\n    if (s.constructor !== Stream) throw new Error(\"Ensure that each item passed to stream.combine/stream.merge/lift is a stream\");\n    return s.state === \"active\";\n  });\n  var stream = ready ? Stream(fn.apply(null, streams.concat([streams]))) : Stream();\n  let changed = [];\n  streams.forEach(function (s) {\n    s.map(function (value) {\n      changed.push(s);\n\n      if (ready || streams.every(function (s) {\n        return s.state !== \"pending\";\n      })) {\n        ready = true;\n        stream(fn.apply(null, streams.concat([changed])));\n        changed = [];\n      }\n\n      return value;\n    }, Stream.SKIP).parent = stream;\n  });\n  return stream;\n}\n\nfunction merge(streams) {\n  return combine(function () {\n    return streams.map(function (s) {\n      return s();\n    });\n  }, streams);\n}\n\nfunction scan(fn, acc, origin) {\n  var stream = origin.map(function (v) {\n    acc = fn(acc, v);\n    return acc;\n  });\n  stream(acc);\n  return stream;\n}\n\nfunction scanMerge(tuples, seed) {\n  var streams = tuples.map(function (tuple) {\n    return tuple[0];\n  });\n  var stream = combine(function () {\n    var changed = arguments[arguments.length - 1];\n    streams.forEach(function (stream, i) {\n      if (changed.indexOf(stream) > -1) seed = tuples[i][1](seed, stream());\n    });\n    return seed;\n  }, streams);\n  stream(seed);\n  return stream;\n}\n\nfunction lift() {\n  var fn = arguments[0];\n  var streams = Array.prototype.slice.call(arguments, 1);\n  return merge(streams).map(function (streams) {\n    return fn.apply(undefined, streams);\n  });\n}\n\nfunction open(s) {\n  return s.state === \"pending\" || s.state === \"active\" || s.state === \"changing\";\n}\n\nvar stream =\n/*#__PURE__*/\nObject.freeze({\n  default: Stream\n});\n\nfunction getCjsExportFromNamespace(n) {\n  return n && n.default || n;\n}\n\nvar require$$0 = getCjsExportFromNamespace(stream);\n\nconst requiresKeys$1 = false;\n\nconst ViewComponent = ({\n  createContent = () => {},\n  createProps = () => {},\n  getElement = () => \"div\",\n  component = null,\n  view = null,\n  onMount = () => {},\n  onUnMount = () => {}\n}) => {\n  const render = vnode => renderer(component || getElement(vnode), createProps(vnode, {\n    renderer,\n    requiresKeys: requiresKeys$1,\n    keys\n  }), [vnode.attrs.before, createContent(vnode, {\n    renderer,\n    requiresKeys: requiresKeys$1,\n    keys\n  }), vnode.attrs.after]);\n\n  return {\n    view: view ? vnode => view(vnode, {\n      render,\n      renderer\n    }) : vnode => render(vnode),\n    oncreate: vnode => onMount(vnode, {\n      keys\n    }),\n    onremove: onUnMount\n  };\n};\n\nconst isClient = typeof document !== \"undefined\";\nconst isServer = !isClient;\n\nconst r = (acc, p) => (acc[p] = 1, acc);\n/* \nSeparately handled props:\n- class\n- element\n*/\n\n\nconst defaultAttrs = [// Universal\n\"key\", \"style\", \"href\", \"id\", // React\n\"tabIndex\", // Mithril\n\"tabindex\", \"oninit\", \"oncreate\", \"onupdate\", \"onbeforeremove\", \"onremove\", \"onbeforeupdate\"];\n\nconst filterSupportedAttributes = (attrs, {\n  add: addAttrs = [],\n  remove: removeAttrs = []\n} = {}) => {\n  const removeLookup = removeAttrs.reduce(r, {});\n  const supported = defaultAttrs.concat(addAttrs).filter(item => !removeLookup[item]).reduce(r, {});\n  return Object.keys(attrs).reduce((acc, key) => (supported[key] ? acc[key] = attrs[key] : null, acc), {});\n};\n\nconst isTouch = isServer ? false : \"ontouchstart\" in document.documentElement;\nconst pointerEndEvent = isTouch ? [\"click\", \"mouseup\"] : [\"mouseup\"];\n\nif (isClient) {\n  document.querySelector(\"html\").classList.add(isTouch ? \"pe-touch\" : \"pe-no-touch\");\n}\n\nconst listeners = {}; // https://gist.github.com/Eartz/fe651f2fadcc11444549\n\nconst emit = (eventName, event) => {\n  if (!listeners[eventName]) {\n    return;\n  }\n\n  listeners[eventName].forEach(listener => listener(event));\n};\n\nif (isClient) {\n  window.addEventListener(\"resize\", e => emit(\"resize\", e));\n  window.addEventListener(\"scroll\", e => emit(\"scroll\", e));\n  window.addEventListener(\"keydown\", e => emit(\"keydown\", e));\n  window.addEventListener(pointerEndEvent, e => emit(pointerEndEvent, e));\n}\n\nvar classes = {\n  component: \"pe-svg\"\n};\n\nconst getElement = vnode => vnode.attrs.element || \"div\";\n\nconst onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  } // Prevent that SVG gets keyboard focus\n\n\n  const elem = vnode.dom.querySelector(\"svg\");\n\n  if (elem) {\n    elem.setAttribute(\"focusable\", \"false\");\n  }\n};\n\nconst createProps = (vnode, {\n  keys: k\n}) => {\n  const attrs = vnode.attrs;\n  return Object.assign({}, filterSupportedAttributes(attrs), {\n    className: [classes.component, attrs.tone === \"dark\" ? \"pe-dark-tone\" : null, attrs.tone === \"light\" ? \"pe-light-tone\" : null, attrs.className || attrs[k.class]].join(\" \")\n  });\n};\n\nconst createContent = vnode => {\n  const attrs = vnode.attrs;\n  return attrs.content ? attrs.content : attrs.children || vnode.children || attrs;\n};\n\nvar svg =\n/*#__PURE__*/\nObject.freeze({\n  getElement: getElement,\n  onMount: onMount,\n  createProps: createProps,\n  createContent: createContent\n});\n\nconst SVG = ViewComponent(Object.assign({}, svg));\nSVG.displayName = \"SVG\";\n\nexport { SVG };\n","import { ViewComponent } from \"polythene-mithril-base\";\nimport { coreIcon as core } from \"polythene-core-icon\";\nimport { SVG } from \"polythene-mithril-svg\";\n\nexport const Icon = ViewComponent(Object.assign(\n  {},\n  core,\n  {\n    createProps: (vnode, args) => core.createProps(vnode, Object.assign(args, { SVG })),\n    createContent: (vnode, args) => core.createContent(vnode, Object.assign(args, { SVG }))\n  }\n));\n\nIcon.displayName = \"Icon\";\n"],"names":["keys","autocomplete","autofocus","class","className","enctype","formaction","frameborder","maxlength","minlength","onblur","onchange","onclick","onfocus","oninput","onkeydown","onkeyup","onmousedown","onmouseout","onmouseover","onmouseup","onscroll","onsubmit","ontouchend","ontouchmove","ontouchstart","readonly","tabindex","renderer","m","displayName","guid","HALT","createStream","stream","arguments","length","updateStream","_state","value","constructor","id","undefined","state","derive","recover","deps","parents","endStream","unregister","map","ap","valueOf","toJSON","toString","Object","defineProperties","end","get","unregisterStream","initStream","updateState","updateDependency","changed","finalize","mustSync","every","active","some","combine","fn","streams","valid","Error","dep","filter","notEnded","registerDependency","i","initDependency","apply","this","concat","dependent","index","indexOf","splice","s1","s2","merge","s","scan","reducer","seed","newStream","scanMerge","tuples","tuple","forEach","idx","module","isClient","document","r","acc","p","defaultAttrs","classForSize","classes","size","small","regular","medium","large","fab","sizeClasses","isTouch","documentElement","pointerEndEvent","querySelector","classList","add","listeners","emit","eventName","event","listener","window","addEventListener","e","component","avatar","icon","freeze","getElement","vnode","attrs","element","createProps","k","assign","addAttrs","remove","removeAttrs","removeLookup","reduce","supported","item","key","filterSupportedAttributes","tone","join","events","createContent","h","SVG","content","svg","src","children","Vnode","tag","attrs0","children0","text","dom","domSize","instance","normalize","node","Array","isArray","normalizeChildren","input","hyperscriptVnode","children1","attrs1","start","push","selectorParser","selectorCache","hasOwn","hasOwnProperty","isEmpty","object","call","hyperscript","selector","view","hasClass","newAttrs","String","execSelector","match","exec","type","attrValue","replace","compileSelector","trust","html","fragment","vnode2","PromisePolyfill","executor","TypeError","self","resolvers","rejectors","resolveCurrent","handler","rejectCurrent","_instance","callAsync","setImmediate","setTimeout","list","shouldAbsorb","execute","then","console","error","retry","executeOnce","bind","runs","run","onerror","prototype","onFulfilled","onRejection","resolveNext","rejectNext","handle","callback","next","promise","resolve","reject","catch","finally","reason","all","total","count","values","consume","race","Promise","global","buildQueryString","args","destructure","encodeURIComponent","requestService","$window","oncompletion","callbackCount","makeRequest","factory","url","promise0","data","background","complete","wrap","then0","hasHeader","name","headers","test","interpolate","assemble","m0","querystring","request","method","toUpperCase","useBody","assumeJSON","serialize","JSON","FormData","stringify","xhr","XMLHttpRequest","aborted","_abort","abort","open","async","user","password","setRequestHeader","deserialize","withCredentials","timeout","responseType","config","onreadystatechange","readyState","success","status","response","responseText","extract","parse","code","send","jsonp","callbackName","Math","round","random","script","createElement","parentNode","removeChild","callbackKey","appendChild","setCompletionCallback","_12","coreRenderer","redraw0","$doc","nameSpace","math","getNameSpace","vnode3","xmlns","checkState","original","callHook","activeElement","createNodes","parent","vnodes","hooks","nextSibling","ns","createNode","initLifecycle","createTextNode","insertNode","createText","createHTML","createDocumentFragment","children3","firstChild","childNodes","createFragment","attrs2","is","createElementNS","setAttr","setAttrs","contenteditable","setContentEditable","textContent","selectedIndex","normalized","setLateSelectAttrs","sentinel","create","$$reentrantLock$$","initComponent","createComponent","possibleParents","caption","thead","tbody","tfoot","tr","th","td","colgroup","col","match0","temp","innerHTML","child","updateNodes","old","removeNodes","oldStart","isOldKeyed","isKeyed","o","v","oe","ve","topSibling","oldEnd","updateNode","getNextSibling","toFragment","lisIndices","originalNextSibling","vnodesLength","oldIndices","li","pos","matched","getKeyMap","oldIndex","a","u","slice","result","il","j","c","makeLisIndices","commonLength","removeNode","oldTag","onbeforeupdate","force","shouldNotUpdate","updateLifecycle","nodeValue","updateText","updateHTML","updateFragment","val","removeAttr","updateAttrs","updateElement","updateComponent","count0","insertBefore","expected","called","onbeforeremove","continuation","onremove","isLifecycleMethod","attr","isFormAttribute","updateEvent","setAttributeNS","updateStyle","hasPropertyKey","setAttribute","removeAttribute","nsLastIndex","uppercaseRegex","toLowerCase","capital","normalizeKey","style","cssText","setProperty","removeProperty","EventDict","removeEventListener","source","oninit","oncreate","onupdate","handleEvent","ev","handler0","currentTarget","redraw","preventDefault","stopPropagation","render","namespace","namespaceURI","focus","setRedraw","redrawService","throttleMock","renderService","callbacks","rendering","unsubscribe","sync","pending","requestAnimationFrame","subscribe","_15","redrawService0","mount","root","run0","parseQueryString","string","charAt","entries","split","data2","counters","entry","key2","decodeURIComponent","value0","levels","cursor","pop","j0","level","nextLevel","isNumber","isNaN","parseInt","isValue","coreRouter","asyncId","supportsPushState","history","pushState","callAsync0","fragment0","data1","location","parsePath","path","queryData","hashData","queryIndex","hashIndex","pathEnd","queryEnd","queryParams","key1","hashParams","router","prefix","options","match1","token","query","hash","title","onpopstate","replaceState","href","defineRoutes","routes","resolveRoute","getPath","params","pathname","route0","matcher","RegExp","onhashchange","route","render1","attrs3","currentPath","lastUpdate","routeService","defaultRoute","run1","redraw3","bail","setPath","payload","update","routeResolver","comp","v0","onmatch","resolved","set","data0","link","vnode5","ctrlKey","metaKey","shiftKey","which","getAttribute","args0","param","key0","_24","_31","version","Stream","SKIP","lift","origin","warnedHalt","dependentStreams","dependentFns","changing","ignoreInitial","target","x","defineProperty","ready","log","n","default","onMount","elem","onUnMount","requiresKeys","before","after","ViewComponent","Icon","core"],"mappings":"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"}