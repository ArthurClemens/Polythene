{"version":3,"file":"polythene-core-dialog.js","sources":["../../polythene-css-classes/list-tile.js","../../polythene-css-classes/menu.js","../../polythene-css-classes/dialog.js","../src/dialog.js"],"sourcesContent":["\nexport default {\n  component:       \"pe-list-tile\",\n\n  // elements\n  content:         \"pe-list-tile__content\",\n  highSubtitle:    \"pe-list-tile__high-subtitle\",\n  primary:         \"pe-list-tile__primary\",\n  secondary:       \"pe-list-tile__secondary\",\n  subtitle:        \"pe-list-tile__subtitle\",\n  title:           \"pe-list-tile__title\",\n  contentFront:    \"pe-list-tile__content-front\",\n\n  // states\n  compact:         \"pe-list-tile--compact\",\n  compactFront:    \"pe-list-tile--compact-front\",\n  disabled:        \"pe-list-tile--disabled\",\n  hasFront:        \"pe-list-tile--front\",\n  hasHighSubtitle: \"pe-list-tile--high-subtitle\",\n  hasSubtitle:     \"pe-list-tile--subtitle\",\n  header:          \"pe-list-tile--header\",\n  hoverable:       \"pe-list-tile--hoverable\",\n  selectable:      \"pe-list-tile--selectable\",\n  selected:        \"pe-list-tile--selected\",\n  highlight:       \"pe-list-tile--highlight\",\n  sticky:          \"pe-list-tile--sticky\",\n  navigation:      \"pe-list-tile--navigation\",\n};\n","import listTileClasses from \"./list-tile\";\n\nexport default {\n  component:   \"pe-menu\",\n\n  // elements\n  panel:       \"pe-menu__panel\",\n  content:     \"pe-menu__content\",\n  placeholder: \"pe-menu__placeholder\",\n  backdrop:    \"pe-menu__backdrop\",\n\n  // states\n  floating:     \"pe-menu--floating\",\n  origin:       \"pe-menu--origin\",\n  permanent:    \"pe-menu--permanent\",\n  showBackdrop: \"pe-menu--backdrop\",\n  visible:      \"pe-menu--visible\",\n  width_auto:   \"pe-menu--width-auto\",\n  width_n:      \"pe-menu--width-\",\n  isTopMenu:    \"pe-menu--top-menu\",\n\n  // lookup\n  listTile:         listTileClasses.component,\n  selectedListTile: listTileClasses.selected,\n};","import menuClasses from \"./menu\";\n\nexport default {\n  component:         \"pe-dialog\",\n\n  // elements\n  placeholder:       \"pe-dialog__placeholder\",\n  holder:            \"pe-dialog__holder\",\n  content:           \"pe-dialog__content\",\n  backdrop:          \"pe-dialog__backdrop\",\n  touch:             \"pe-dialog__touch\",\n\n  // states\n  fullScreen:        \"pe-dialog--full-screen\",\n  modal:             \"pe-dialog--modal\",\n  open:              \"pe-dialog--open\",    // class set to html element\n  visible:           \"pe-dialog--visible\", // class set to dialog element\n  showBackdrop:      \"pe-dialog--backdrop\",\n  transition:        \"pe-dialog--transition\",\n\n  // lookup\n  menuContent:       menuClasses.content,\n};\n","import { filterSupportedAttributes, subscribe, unsubscribe, transitionComponent, stylePropCompare, deprecation } from \"polythene-core\";\nimport classes from \"polythene-css-classes/dialog\";\n\nconst DEFAULT_SHADOW_DEPTH    = 3;\n\nexport const getElement = vnode =>\n  vnode.attrs.element || \"div\";\n\nconst isFullScreen = ({ state, attrs }) =>\n  attrs.fullScreen || stylePropCompare({\n    element: state.el,\n    pseudoSelector: \":before\",\n    prop: \"content\",\n    contains: `\"${\"full_screen\"}\"`\n  });\n\nconst isModal = ({ state, attrs }) =>\n  attrs.modal || stylePropCompare({\n    element: state.el,\n    pseudoSelector: \":before\",\n    prop: \"content\",\n    contains: `\"${\"modal\"}\"`\n  });\n\nconst transitionOptions = (state, attrs, isShow) => ({\n  state,\n  attrs,\n  isShow,\n  domElements: {\n    el: state.el,\n    contentEl: state.contentEl,\n    backdropEl: state.backdropEl,\n  },\n  showClass: classes.visible,\n  transitionClass: classes.transition,\n});\n\nconst showDialog = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, true));\n\nconst hideDialog = (state, attrs) =>\n  transitionComponent(transitionOptions(state, attrs, false));\n\nexport const getInitialState = (vnode, createStream) => {\n  const transitioning = createStream(false);\n  const visible = createStream(false);\n  return {\n    backdropEl: undefined,\n    touchEl:    undefined,\n    cleanUp:    undefined,\n    el:         undefined,\n    contentEl:  undefined,\n    transitioning,\n    visible,\n    redrawOnUpdate: createStream.merge([transitioning])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  if (attrs.z !== undefined) {\n    deprecation(\"Dialog\", { option: \"z\", newOption: \"shadowDepth\" });\n  }\n\n  const dom = vnode.dom;\n  state.el = dom;\n  state.backdropEl = dom.querySelector(`.${classes.backdrop}`);\n  state.touchEl = dom.querySelector(`.${classes.touch}`);\n  state.contentEl = dom.querySelector(`.${classes.content}`);\n\n  if (!attrs.inactive) {\n\n    const handleEscape = e => {\n      if (isFullScreen(vnode) || isModal(vnode)) return;\n      if (e.key === \"Escape\" || e.key === \"Esc\") { // \"Esc\" for IE11\n        const openDialogs = document.querySelectorAll(`.${classes.component}`);\n        if (openDialogs[openDialogs.length - 1] === state.el) {\n          hideDialog(state, Object.assign({}, attrs, {\n            hideDelay: 0\n          }));\n        }\n      }\n    };\n\n    state.cleanUp = () => (\n      unsubscribe(\"keydown\", handleEscape)\n    );\n\n    subscribe(\"keydown\", handleEscape);\n\n    if (attrs.show) {\n      showDialog(state, attrs);\n    }\n  }\n};\n\nexport const onUnMount = vnode => (\n  vnode.state.cleanUp && vnode.state.cleanUp()\n);\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs, { remove: [\"style\"] }), // style set in content, and set by show/hide transition\n    {\n      className: [\n        attrs.parentClassName || classes.component,\n        attrs.fromMultipleClassName,\n        attrs.fullScreen ? classes.fullScreen : null,\n        attrs.modal ? classes.modal : null,\n        attrs.backdrop ? classes.showBackdrop : null,\n        // classes.visible is set in showDialog though transition\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      \"data-spawn-id\": attrs.spawnId,\n      \"data-instance-id\": attrs.instanceId,\n      // click backdrop: close dialog\n      [k.onclick]: e => {\n        if (e.target !== state.el && e.target !== state.backdropEl && e.target !== state.touchEl) {\n          return;\n        }\n        if (isModal(vnode)) {\n          // not allowed\n          return;\n        }\n        hideDialog(state, attrs);\n      }\n    }\n  );\n};\n\nexport const createPane = (vnode, { renderer: h, Pane }) => {\n  const attrs = vnode.attrs;\n  return h(Pane, {\n    body: attrs.content || attrs.body || attrs.menu || vnode.children,\n    borders: attrs.borders,\n    className: attrs.className,\n    footer: attrs.footer,\n    footerButtons: attrs.footerButtons,\n    formOptions: attrs.formOptions,\n    fullBleed: attrs.fullBleed,\n    header: attrs.header,\n    style: attrs.style,\n    title: attrs.title,\n  });\n};\n\nexport const createContent = (vnode, { renderer, Shadow, createPane, Pane }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const h = renderer;\n\n  if (state.el) {\n    const visible = state.visible();\n    const transitioning = state.transitioning();\n    if (!transitioning) {\n      if (attrs.hide && visible) {\n        // Use setTimeout to play nice with React's lifecycle functions\n        setTimeout(() => hideDialog(state, attrs), 0);\n      } else if (attrs.show && !visible) {\n        setTimeout(() => showDialog(state, attrs), 0);\n      }\n    }\n  }\n  const pane = attrs.panesOptions && attrs.panesOptions.length\n    ? h(Pane, attrs.panesOptions[0])\n    : attrs.panes && attrs.panes.length\n      ? attrs.panes[0]\n      : createPane(vnode, { renderer, Pane } );\n  const shadowDepth = attrs.shadowDepth !== undefined\n    ? attrs.shadowDepth\n    : attrs.z; // deprecated\n  return [\n    h(\"div\",\n      {\n        key: \"backdrop\",\n        className: classes.backdrop\n      }\n    ),\n    h(\"div\",\n      {\n        key: \"touch\",\n        className: classes.touch\n      }\n    ),\n    h(\"div\",\n      {\n        className: [\n          classes.content,\n          attrs.menu ? classes.menuContent : null\n        ].join(\" \"),\n        key: \"content\"\n      },\n      [\n        attrs.fullScreen\n          ? null\n          : h(Shadow, {\n            shadowDepth: shadowDepth !== undefined\n              ? shadowDepth\n              : DEFAULT_SHADOW_DEPTH,\n            animated: true,\n            key: \"shadow\"\n          }),\n        pane\n      ]\n    )\n  ];\n};\n"],"names":["component","content","highSubtitle","primary","secondary","subtitle","title","contentFront","compact","compactFront","disabled","hasFront","hasHighSubtitle","hasSubtitle","header","hoverable","selectable","selected","highlight","sticky","navigation","panel","placeholder","backdrop","floating","origin","permanent","showBackdrop","visible","width_auto","width_n","isTopMenu","listTile","listTileClasses","selectedListTile","holder","touch","fullScreen","modal","open","transition","menuContent","menuClasses","DEFAULT_SHADOW_DEPTH","getElement","vnode","attrs","element","isFullScreen","state","stylePropCompare","el","pseudoSelector","prop","contains","isModal","transitionOptions","isShow","domElements","contentEl","backdropEl","showClass","classes","transitionClass","showDialog","transitionComponent","hideDialog","getInitialState","createStream","transitioning","undefined","touchEl","cleanUp","redrawOnUpdate","merge","onMount","dom","z","deprecation","option","newOption","querySelector","inactive","handleEscape","e","key","openDialogs","document","querySelectorAll","length","Object","assign","hideDelay","unsubscribe","subscribe","show","onUnMount","createProps","keys","k","filterSupportedAttributes","remove","className","parentClassName","fromMultipleClassName","tone","class","join","spawnId","instanceId","onclick","target","createPane","renderer","h","Pane","body","menu","children","borders","footer","footerButtons","formOptions","fullBleed","style","createContent","Shadow","hide","setTimeout","pane","panesOptions","panes","shadowDepth","animated"],"mappings":"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"}