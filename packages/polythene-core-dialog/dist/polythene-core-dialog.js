!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e=e||self).polythene={},e["polythene-core"])}(this,function(e,t){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var o={component:"pe-dialog",placeholder:"pe-dialog__placeholder",holder:"pe-dialog__holder",content:"pe-dialog__content",backdrop:"pe-dialog__backdrop",touch:"pe-dialog__touch",fullScreen:"pe-dialog--full-screen",modal:"pe-dialog--modal",open:"pe-dialog--open",visible:"pe-dialog--visible",showBackdrop:"pe-dialog--backdrop",transition:"pe-dialog--transition",menuContent:"pe-menu__content"},r=function(e){var n=e.state;return e.attrs.modal||t.stylePropCompare({element:n.el,pseudoSelector:":before",prop:"content",contains:'"'.concat("modal",'"')})},a=function(e,t,n){return{state:e,attrs:t,isShow:n,domElements:{el:e.el,contentEl:e.contentEl,backdropEl:e.backdropEl},showClass:o.visible,transitionClass:o.transition}},l=function(e,n){return t.transitionComponent(a(e,n,!0))},i=function(e,n){return t.transitionComponent(a(e,n,!1))},c=Object.freeze({getElement:function(e){return e.attrs.element||"div"},getInitialState:function(e,t){var n=t(!1);return{backdropEl:void 0,touchEl:void 0,cleanUp:void 0,el:void 0,contentEl:void 0,transitioning:n,visible:t(!1),redrawOnUpdate:t.merge([n])}},onMount:function(e){if(e.dom){var a=e.state,c=e.attrs;void 0!==c.z&&t.deprecation("Dialog",{option:"z",newOption:"shadowDepth"});var s=e.dom;if(a.el=s,a.backdropEl=s.querySelector(".".concat(o.backdrop)),a.touchEl=s.querySelector(".".concat(o.touch)),a.contentEl=s.querySelector(".".concat(o.content)),!c.inactive){var d=function(l){if(!(function(e){var n=e.state;return e.attrs.fullScreen||t.stylePropCompare({element:n.el,pseudoSelector:":before",prop:"content",contains:'"'.concat("full_screen",'"')})}(e)||r(e)||"Escape"!==l.key&&"Esc"!==l.key)){var s=document.querySelectorAll(".".concat(o.component));s[s.length-1]===a.el&&i(a,n({},c,{hideDelay:0}))}};a.cleanUp=function(){return t.unsubscribe("keydown",d)},t.subscribe("keydown",d),c.show&&l(a,c)}}},onUnMount:function(e){return e.state.cleanUp&&e.state.cleanUp()},createProps:function(e,a){var l,c,s,d=a.keys,p=e.state,u=e.attrs;return n({},t.filterSupportedAttributes(u,{remove:["style"]}),u.testId&&{"data-test-id":u.testId},(l={className:[u.parentClassName||o.component,u.fromMultipleClassName,u.fullScreen?o.fullScreen:null,u.modal?o.modal:null,u.backdrop?o.showBackdrop:null,"dark"===u.tone?"pe-dark-tone":null,"light"===u.tone?"pe-light-tone":null,u.className||u[d.class]].join(" "),"data-spawn-id":u.spawnId,"data-instance-id":u.instanceId},c=d.onclick,s=function(t){t.target!==p.el&&t.target!==p.backdropEl&&t.target!==p.touchEl||r(e)||i(p,u)},c in l?Object.defineProperty(l,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):l[c]=s,l))},createPane:function(e,t){var n=t.renderer,o=t.Pane,r=e.attrs;return n(o,{body:r.content||r.body||r.menu||e.children,borders:r.borders,className:r.className,footer:r.footer,footerButtons:r.footerButtons,formOptions:r.formOptions,fullBleed:r.fullBleed,header:r.header,style:r.style,title:r.title})},createContent:function(e,t){var n=t.renderer,r=t.Shadow,a=t.createPane,c=t.Pane,s=e.state,d=e.attrs,p=n;if(s.el){var u=s.visible();s.transitioning()||(d.hide&&u?setTimeout(function(){return i(s,d)},0):d.show&&!u&&setTimeout(function(){return l(s,d)},0))}var f=d.panesOptions&&d.panesOptions.length?p(c,d.panesOptions[0]):d.panes&&d.panes.length?d.panes[0]:a(e,{renderer:n,Pane:c}),m=void 0!==d.shadowDepth?d.shadowDepth:d.z;return[p("div",{key:"backdrop",className:o.backdrop}),p("div",{key:"touch",className:o.touch}),p("div",{className:[o.content,d.menu?o.menuContent:null].join(" "),key:"content"},[d.fullScreen?null:p(r,{shadowDepth:void 0!==m?m:3,animated:!0,key:"shadow"}),f])]}});e.coreDialog=c,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-dialog.js.map
