!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-core")):"function"==typeof define&&define.amd?define(["exports","polythene-core"],t):t((e=e||self).polythene={},e["polythene-core"])}(this,function(e,t){"use strict";var o={component:"pe-dialog",placeholder:"pe-dialog__placeholder",holder:"pe-dialog__holder",content:"pe-dialog__content",backdrop:"pe-dialog__backdrop",touch:"pe-dialog__touch",fullScreen:"pe-dialog--full-screen",modal:"pe-dialog--modal",open:"pe-dialog--open",visible:"pe-dialog--visible",showBackdrop:"pe-dialog--backdrop",transition:"pe-dialog--transition",menuContent:"pe-menu__content"};const n=({state:e,attrs:o})=>o.modal||t.stylePropCompare({element:e.el,pseudoSelector:":before",prop:"content",contains:'"modal"'}),a=(e,t,n)=>({state:e,attrs:t,isShow:n,domElements:{el:e.el,contentEl:e.contentEl,backdropEl:e.backdropEl},showClass:o.visible,transitionClass:o.transition}),l=(e,o)=>t.transitionComponent(a(e,o,!0)),s=(e,o)=>t.transitionComponent(a(e,o,!1));var r=Object.freeze({getElement:e=>e.attrs.element||"div",getInitialState:(e,t)=>{const o=t(!1);return{backdropEl:void 0,touchEl:void 0,cleanUp:void 0,el:void 0,contentEl:void 0,transitioning:o,visible:t(!1),redrawOnUpdate:t.merge([o])}},onMount:e=>{if(!e.dom)return;const a=e.state,r=e.attrs;void 0!==r.z&&t.deprecation("Dialog",{option:"z",newOption:"shadowDepth"});const i=e.dom;if(a.el=i,a.backdropEl=i.querySelector(`.${o.backdrop}`),a.touchEl=i.querySelector(`.${o.touch}`),a.contentEl=i.querySelector(`.${o.content}`),!r.inactive){const i=l=>{if(!((({state:e,attrs:o})=>o.fullScreen||t.stylePropCompare({element:e.el,pseudoSelector:":before",prop:"content",contains:'"full_screen"'}))(e)||n(e)||"Escape"!==l.key&&"Esc"!==l.key)){const e=document.querySelectorAll(`.${o.component}`);e[e.length-1]===a.el&&s(a,Object.assign({},r,{hideDelay:0}))}};a.cleanUp=(()=>t.unsubscribe("keydown",i)),t.subscribe("keydown",i),r.show&&l(a,r)}},onUnMount:e=>e.state.cleanUp&&e.state.cleanUp(),createProps:(e,{keys:a})=>{const l=e.state,r=e.attrs;return Object.assign({},t.filterSupportedAttributes(r,{remove:["style"]}),{className:[r.parentClassName||o.component,r.fromMultipleClassName,r.fullScreen?o.fullScreen:null,r.modal?o.modal:null,r.backdrop?o.showBackdrop:null,"dark"===r.tone?"pe-dark-tone":null,"light"===r.tone?"pe-light-tone":null,r.className||r[a.class]].join(" "),"data-spawn-id":r.spawnId,"data-instance-id":r.instanceId,[a.onclick]:t=>{t.target!==l.el&&t.target!==l.backdropEl&&t.target!==l.touchEl||n(e)||s(l,r)}})},createPane:(e,{renderer:t,Pane:o})=>{const n=e.attrs;return t(o,{body:n.content||n.body||n.menu||e.children,borders:n.borders,className:n.className,footer:n.footer,footerButtons:n.footerButtons,formOptions:n.formOptions,fullBleed:n.fullBleed,header:n.header,style:n.style,title:n.title})},createContent:(e,{renderer:t,Shadow:n,createPane:a,Pane:r})=>{const i=e.state,c=e.attrs,d=t;if(i.el){const e=i.visible();i.transitioning()||(c.hide&&e?setTimeout(()=>s(i,c),0):c.show&&!e&&setTimeout(()=>l(i,c),0))}const p=c.panesOptions&&c.panesOptions.length?d(r,c.panesOptions[0]):c.panes&&c.panes.length?c.panes[0]:a(e,{renderer:t,Pane:r}),u=void 0!==c.shadowDepth?c.shadowDepth:c.z;return[d("div",{key:"backdrop",className:o.backdrop}),d("div",{key:"touch",className:o.touch}),d("div",{className:[o.content,c.menu?o.menuContent:null].join(" "),key:"content"},[c.fullScreen?null:d(n,{shadowDepth:void 0!==u?u:3,animated:!0,key:"shadow"}),p])]}});e.coreDialog=r,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-dialog.js.map
