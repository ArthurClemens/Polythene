!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("polythene-core"),require("polythene-utilities")):"function"==typeof define&&define.amd?define(["exports","polythene-core","polythene-utilities"],e):e((t=t||self).polythene={},t["polythene-core"],t["polythene-utilities"])}(this,function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(){return(a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}var r={component:"pe-tabs",indicator:"pe-tabs__indicator",scrollButton:"pe-tabs__scroll-button",scrollButtonAtEnd:"pe-tabs__scroll-button-end",scrollButtonAtStart:"pe-tabs__scroll-button-start",tab:"pe-tab",tabContent:"pe-tabs__tab-content",tabRow:"pe-tabs__row",activeSelectable:"pe-tabs__active--selectable",isAtEnd:"pe-tabs--end",isAtStart:"pe-tabs--start",isAutofit:"pe-tabs--autofit",isMenu:"pe-tabs--menu",scrollable:"pe-tabs--scrollable",compactTabs:"pe-tabs--compact",tabHasIcon:"pe-tabs__tab--icon",tabRowCentered:"pe-tabs__row--centered",tabRowIndent:"pe-tabs__row--indent",label:"pe-button__label"},l=function(t,e){var n=void 0!==e.selectedTabIndex?e.selectedTabIndex:void 0!==e.selectedTab?e.selectedTab:void 0;return void 0!==n?n:Array.isArray(e.tabs)?e.tabs.reduce(function(t,e,n){return void 0!==t||e.disabled?t:n},void 0):void 0},i=function(t,e,n,o){n.stopPropagation(),n.preventDefault();var a,r,l,i=t.selectedTabIndex(),c=(a=i,r=t.tabs,l=r.length-1,{backward:Math.max(a-1,0),forward:Math.min(a+1,l)})[o];c!==i?u(t,e,c,!0):s(t,c)},s=function(t,e){var o=t.tabs,a=t.tabRowEl,r=o.slice(0,e).reduce(function(t,e){return t+e.dom.getBoundingClientRect().width},0),l=a.getBoundingClientRect().width,i=a.scrollWidth-l,s=t.isRTL?-1*Math.min(r,i):Math.min(r,i),u=a.scrollLeft;if(u!==s){var d=Math.abs(u-s)/600;setTimeout(function(){n.scrollTo({element:a,to:s,duration:Math.max(.5,d),direction:"horizontal"}).then(function(){return c(t)})},150)}},c=function(t){var e=t.tabRowEl,n=e.scrollLeft,o=t.selectedTabIndex(),a=t.tabsEl,r=t.tabs.length-1,l=0===e.scrollLeft&&0===o,i=n>=e.scrollWidth-a.getBoundingClientRect().width-1&&o===r;t.scrollButtonAtStart(l),t.scrollButtonAtEnd(i)},u=function(t,e,n,o){if(t.selectedTabIndex(n),t.tabs.length){var a=t.tabs[n].dom;a&&t.tabIndicatorEl&&t.tabsEl&&function(t,e,n){var o=n.tabsEl.getBoundingClientRect(),a=t.getBoundingClientRect(),r=n.managesScroll?a.height:0,l=n.isRTL?a.right-o.right+n.tabRowEl.scrollLeft+r:a.left-o.left+n.tabRowEl.scrollLeft-r,i=1/(o.width-2*r)*a.width,s="translate(".concat(l,"px, 0) scaleX(").concat(i,")"),c=e?.25:0,u=n.tabIndicatorEl.style;u["transition-duration"]=c+"s",u.transform=s}(a,o,t),t.managesScroll&&c(t),s(t,n),e.onChange&&e.onChange({index:n,options:t.tabs[n].attrs,el:a})}},d=function(t,e){return t<e?1:t>e?-1:0},b=Object.freeze({getInitialState:function(t,n){t.state;var o=t.attrs;void 0!==o.selectedTab&&e.deprecation("Tabs",{option:"selectedTab",newOption:"selectedTabIndex"});var a=n(l(0,o)||0),r=n(!0),i=n(!0);return{tabsEl:void 0,tabRowEl:void 0,tabs:[],tabRow:void 0,tabIndicatorEl:void 0,selectedTabIndex:a,previousSelectedTabIndex:void 0,managesScroll:o.scrollable&&!e.isTouch,scrollButtonAtStart:r,scrollButtonAtEnd:i,scrollButtons:{start:void 0,end:void 0},registerTabButton:function(t){return function(e,n){return t.tabs[e]=n}},registerScrollButton:function(t){return function(e,n){return t.scrollButtons[e]=n}},isRTL:!1,cleanUp:void 0,redrawOnUpdate:n.merge([a,r,i])}},onMount:function(t){if(t.dom){var n=t.dom,o=t.state,a=t.attrs;o.tabsEl=n,o.isRTL=e.isRTL({element:n}),a.hideIndicator||(o.tabIndicatorEl=n.querySelector(".".concat(r.indicator))),o.tabRowEl=n.querySelector(".".concat(r.tabRow));var l=function(){return function(){if(o.tabs&&a.largestWidth){var t=o.tabs.map(function(t){return t.dom.getBoundingClientRect().width}).sort(d)[0];o.tabs.forEach(function(e){return e.dom.style.width=t+"px"})}}(),u(o,a,o.selectedTabIndex(),!1)},i=function(t){var e=t.name;return"active"===e||"inactive"===e?l():null};e.subscribe("resize",l),e.subscribe("webfontloader",i),o.cleanUp=function(){return e.unsubscribe("resize",l),e.unsubscribe("webfontloader",i)},Promise.resolve().then(l)}},onUnMount:function(t){return t.state.cleanUp()},createProps:function(t,n){var o=n.keys,i=t.state,s=t.attrs,c=!s.scrollable&&!s.centered&&!!s.autofit,d=l(0,s);return void 0!==d&&i.previousSelectedTabIndex!==d&&u(i,s,d,!0),i.previousSelectedTabIndex=d,a({},e.filterSupportedAttributes(s),{className:[r.component,s.scrollable?r.scrollable:null,i.scrollButtonAtStart()?r.isAtStart:null,i.scrollButtonAtEnd()?r.isAtEnd:null,s.activeSelected?r.activeSelectable:null,c?r.isAutofit:null,s.compact?r.compactTabs:null,s.menu?r.isMenu:null,"dark"===s.tone?"pe-dark-tone":null,"light"===s.tone?"pe-light-tone":null,s.className||s[o.class]].join(" ")})},createContent:function(t,e){var n=e.renderer,l=e.keys,s=e.Tab,c=e.ScrollButton,d=t.state,b=t.attrs,f=b.content?b.content:b.tabs?b.tabs:b.children||t.children||[];0===f.length&&console.error("No tabs specified");var p,v,h=f.map(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,o=a({},t,{selected:e===d.selectedTabIndex(),animateOnTap:!1!==b.animateOnTap},b.all,{index:e,key:t.key||"tab-".concat(e),register:d.registerTabButton(d),onSelect:function(){return u(d,b,e,!b.noIndicatorSlide)}});return n(s,o)});b.scrollable&&(p=n(c,a({},{key:"backward",icon:b.scrollIconBackward,className:r.scrollButtonAtStart,position:"start",register:d.registerScrollButton(d),events:o({},l.onclick,function(t){return i(d,b,t,"backward")}),isRTL:d.isRTL})),v=n(c,a({},{key:"forward",icon:b.scrollIconForward,className:r.scrollButtonAtEnd,position:"end",register:d.registerScrollButton(d),events:o({},l.onclick,function(t){return i(d,b,t,"forward")}),isRTL:d.isRTL})));var g=b.hideIndicator?null:n("div",{key:"indicator",className:r.indicator});return[b.scrollable?p:null,n("div",{key:"tabrow",className:[r.tabRow,b.centered?r.tabRowCentered:null,b.scrollable?r.tabRowIndent:null].join(" ")},[h,g]),b.scrollable?v:null]}}),f=Object.freeze({onMount:function(t){if(t.dom){var e=t.dom,n=t.attrs;n.register(n.index,{attrs:n,dom:e})}},createProps:function(t,e){var n=e.renderer,l=e.keys,i=e.Icon,s=t.attrs;return s.events=s.events||{},s.events[l.onclick]=s.events[l.onclick]||function(){},a({},s,{content:n("div",{className:r.tabContent},[s.icon?n(i,s.icon):null,s.label?n("div",{className:r.label},n("span",s.label)):null]),className:[r.tab,s.icon&&s.label?r.tabHasIcon:null,s.className||s[l.class]].join(" "),selected:s.selected,wash:!1,ripple:!0,events:a({},s.events,o({},l.onclick,function(t){s.onSelect(),s.events[l.onclick](t)}))})},createContent:function(t){return t.children}}),p='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg>',v='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/></svg>',h=Object.freeze({onMount:function(t){if(t.dom){var e=t.dom,n=t.attrs;n.register(n.position,e)}},createProps:function(t,e){var n=e.renderer,o=e.keys,a=t.attrs,l="start"===a.position?a.icon||{svg:{content:n.trust(a.isRTL?v:p)}}:a.icon||{svg:{content:n.trust(a.isRTL?p:v)}};return{className:[r.scrollButton,a.className||a[o.class]].join(" "),icon:l,ripple:{center:!0},events:a.events}}});t.coreTabs=b,t.coreTab=f,t.coreScrollButton=h,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-core-tabs.js.map
