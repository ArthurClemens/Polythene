{"version":3,"file":"polythene-core-tabs.js","sources":["../../polythene-css-classes/button.js","../../polythene-css-classes/tabs.js","../src/tabs.js","../src/tab.js","../src/scroll-button.js"],"sourcesContent":["\nexport default {\n  component:        \"pe-text-button\",\n  super:            \"pe-button\",\n  row:              \"pe-button-row\",\n      \n  // elements      \n  content:          \"pe-button__content\",\n  label:            \"pe-button__label\",\n  textLabel:        \"pe-button__text-label\",\n  wash:             \"pe-button__wash\",\n  dropdown:         \"pe-button__dropdown\",\n      \n  // states      \n  border:           \"pe-button--border\",\n  contained:        \"pe-button--contained\",\n  disabled:         \"pe-button--disabled\",\n  dropdownClosed:   \"pe-button--dropdown-closed\",\n  dropdownOpen:     \"pe-button--dropdown-open\",\n  extraWide:        \"pe-button--extra-wide\",\n  hasDropdown:      \"pe-button--dropdown\",\n  highLabel:        \"pe-button--high-label\",\n  inactive:         \"pe-button--inactive\",\n  raised:           \"pe-button--raised\",\n  selected:         \"pe-button--selected\",\n  separatorAtStart: \"pe-button--separator-start\",\n};\n","import buttonClasses from \"./button\";\n\nexport default {\n  component:            \"pe-tabs\",\n\n  // elements\n  indicator:            \"pe-tabs__indicator\",\n  scrollButton:         \"pe-tabs__scroll-button\",\n  scrollButtonAtEnd:    \"pe-tabs__scroll-button-end\",\n  scrollButtonAtStart:  \"pe-tabs__scroll-button-start\",\n  tab:                  \"pe-tab\",\n  tabContent:           \"pe-tabs__tab-content\",\n  tabRow:               \"pe-tabs__row\",\n\n  // states\n  activeSelectable:     \"pe-tabs__active--selectable\",\n  isAtEnd:              \"pe-tabs--end\",\n  isAtStart:            \"pe-tabs--start\",\n  isAutofit:            \"pe-tabs--autofit\",\n  isMenu:               \"pe-tabs--menu\",\n  scrollable:           \"pe-tabs--scrollable\",\n  compactTabs:          \"pe-tabs--compact\",\n  tabHasIcon:           \"pe-tabs__tab--icon\",\n  tabRowCentered:       \"pe-tabs__row--centered\",\n  tabRowIndent:         \"pe-tabs__row--indent\",\n\n  // lookup\n  label:                buttonClasses.label\n};","import { filterSupportedAttributes, isTouch, subscribe, unsubscribe, isRTL, deprecation } from \"polythene-core\";\nimport { scrollTo } from \"polythene-utilities\";\nimport classes from \"polythene-css-classes/tabs\";\n\nconst SCROLL_SPEED                 = 600; // px per second\nconst SCROLL_DELAY                 = .15; // seconds\nconst SCROLL_MIN_DURATION          = .5; // seconds\nconst INDICATOR_SLIDE_MIN_DURATION = .25; // seconds\n\nconst whenCreateDone = () => Promise.resolve();\n\nconst getIndex = (state, attrs) => {\n  const attrsSelectedTabIndex = attrs.selectedTabIndex !== undefined\n    ? attrs.selectedTabIndex\n    : attrs.selectedTab !== undefined // deprecated\n      ? attrs.selectedTab\n      : undefined;\n  return attrsSelectedTabIndex !== undefined\n    ? attrsSelectedTabIndex\n    : Array.isArray(attrs.tabs)\n      ? attrs.tabs.reduce((acc, tab, index) => (\n        acc === undefined && !tab.disabled\n          ? index\n          : acc\n      ), undefined)\n      : undefined;\n};\n\nconst scrollButtonGetNewIndex = (index, tabs) => {\n  const minTabIndex = 0;\n  const maxTabIndex = tabs.length - 1;\n  return {\n    backward: Math.max(index - 1, minTabIndex),\n    forward: Math.min(index + 1, maxTabIndex)\n  };\n};\n\nconst handleScrollButtonClick = (state, attrs, e, direction) => {\n  e.stopPropagation();\n  e.preventDefault();\n  const currentTabIndex = state.selectedTabIndex();\n  const newIndex = scrollButtonGetNewIndex(currentTabIndex, state.tabs)[direction];\n  if (newIndex !== currentTabIndex) {\n    setSelectedTab(state, attrs, newIndex, true);\n  } else {\n    scrollToTab(state, newIndex);\n  }\n};\n\nconst scrollToTab = (state, tabIndex) => {\n  const tabs = state.tabs;\n  const scroller = state.tabRowEl;\n  // Scroll to position of selected tab\n  const tabLeft = tabs.slice(0, tabIndex).reduce((totalWidth, tabData) =>\n    totalWidth + tabData.dom.getBoundingClientRect().width, 0);\n  // Tabs at the far right will not fully move to the left\n  // because the scrollable row will stick to the right \n  // to get the max scroll left, we subtract the visible viewport from the scroll width\n  const scrollerWidth = scroller.getBoundingClientRect().width; // frame width\n  const scrollingWidth = scroller.scrollWidth;\n  const maxScroll = scrollingWidth - scrollerWidth;\n  const left = state.isRTL\n    ? -1 * Math.min(tabLeft, maxScroll)\n    : Math.min(tabLeft, maxScroll);\n  const currentLeft = scroller.scrollLeft;\n  if (currentLeft !== left) {\n    const duration = Math.abs(currentLeft - left) / SCROLL_SPEED;\n    const delaySeconds = SCROLL_DELAY;\n    setTimeout(() => {\n      scrollTo({\n        element: scroller,\n        to: left,\n        duration: Math.max(SCROLL_MIN_DURATION, duration),\n        direction: \"horizontal\"\n      }).then(() => updateScrollButtons(state));\n    }, delaySeconds * 1000);\n  }\n};\n\nconst updateScrollButtons = state => {\n  const tabRowEl = state.tabRowEl;\n  const scrollLeft = tabRowEl.scrollLeft;\n  const currentTabIndex = state.selectedTabIndex();\n  const tabsEl = state.tabsEl;\n  const minTabIndex = 0;\n  const maxTabIndex = state.tabs.length - 1;\n  const isAtStart = (tabRowEl.scrollLeft === 0) && (currentTabIndex === minTabIndex);\n  const isAtEnd = (scrollLeft >= (tabRowEl.scrollWidth - tabsEl.getBoundingClientRect().width - 1)) && (currentTabIndex === maxTabIndex);\n  state.scrollButtonAtStart(isAtStart);\n  state.scrollButtonAtEnd(isAtEnd);\n};\n\nconst animateIndicator = (selectedTabEl, animate, state) => {\n  const parentRect = state.tabsEl.getBoundingClientRect();\n  const rect = selectedTabEl.getBoundingClientRect();\n  const buttonSize = state.managesScroll ? rect.height : 0;\n  const translateX = state.isRTL\n    ? rect.right - parentRect.right + state.tabRowEl.scrollLeft + buttonSize\n    : rect.left - parentRect.left + state.tabRowEl.scrollLeft - buttonSize;\n  const scaleX = 1 / (parentRect.width - 2 * buttonSize) * rect.width;\n  const transformCmd = `translate(${translateX}px, 0) scaleX(${scaleX})`;\n  const duration = animate\n    ? INDICATOR_SLIDE_MIN_DURATION\n    : 0;\n  const style = state.tabIndicatorEl.style;\n  style[\"transition-duration\"] = duration + \"s\";\n  style.transform = transformCmd;\n};\n\nconst setSelectedTab = (state, attrs, index, animate) => {\n  state.selectedTabIndex(index);\n  if (!state.tabs.length) return;\n  const selectedTabEl = state.tabs[index].dom;\n  if (selectedTabEl && state.tabIndicatorEl && state.tabsEl) {\n    animateIndicator(selectedTabEl, animate, state);\n  }\n  if (state.managesScroll) {\n    updateScrollButtons(state);\n  }\n  scrollToTab(state, index);\n  if (attrs.onChange) {\n    attrs.onChange({\n      index,\n      options: state.tabs[index].attrs,\n      el: selectedTabEl\n    });\n  }\n};\n\nconst sortByLargestWidth = (a, b) =>\n  a < b\n    ? 1\n    : a > b\n      ? -1\n      : 0;\n\nexport const getInitialState = (vnode, createStream) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  if (attrs.selectedTab !== undefined) {\n    deprecation(\"Tabs\", { option: \"selectedTab\", newOption: \"selectedTabIndex\" });\n  }\n  const tabIndex = getIndex(state, attrs) || 0;\n  const selectedTabIndex = createStream(tabIndex);\n  const scrollButtonAtStart = createStream(true);\n  const scrollButtonAtEnd = createStream(true);\n  const registerTabButton = state =>\n    (index, data) => state.tabs[index] = data;\n  const registerScrollButton = state =>\n    (position, dom) => state.scrollButtons[position] = dom;\n  return {\n    tabsEl:                   undefined,\n    tabRowEl:                 undefined,\n    tabs:                     [], // {data, el}\n    tabRow:                   undefined,\n    tabIndicatorEl:           undefined,\n    selectedTabIndex,\n    previousSelectedTabIndex: undefined,\n    managesScroll:            attrs.scrollable && !isTouch,\n    scrollButtonAtStart,\n    scrollButtonAtEnd,\n    scrollButtons: {\n      start: undefined,\n      end: undefined\n    },\n    registerTabButton,\n    registerScrollButton,\n    isRTL:                    false,\n    cleanUp:                  undefined, // set in onMount\n    redrawOnUpdate:           createStream.merge([selectedTabIndex, scrollButtonAtStart, scrollButtonAtEnd])\n  };\n};\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  state.tabsEl = dom;\n  state.isRTL = isRTL({ element: dom });\n  if (!attrs.hideIndicator) {\n    state.tabIndicatorEl = dom.querySelector(`.${classes.indicator}`);\n  }\n  state.tabRowEl = dom.querySelector(`.${classes.tabRow}`);\n\n  const redrawLargestWidth = () => {\n    if (state.tabs && attrs.largestWidth) {\n      const widths = state.tabs.map(tabData => tabData.dom.getBoundingClientRect().width);\n      const largest = widths.sort(sortByLargestWidth)[0];\n      state.tabs.forEach(tabData => tabData.dom.style.width = largest + \"px\");\n    }\n  };\n\n  const redraw = () => (\n    redrawLargestWidth(),\n    setSelectedTab(state, attrs, state.selectedTabIndex(), false)\n  );\n\n  const handleFontEvent = ({ name }) =>\n    name === \"active\" || name === \"inactive\"\n      ? redraw()\n      : null;\n\n  subscribe(\"resize\", redraw);\n  subscribe(\"webfontloader\", handleFontEvent);\n\n  state.cleanUp = () => (\n    unsubscribe(\"resize\", redraw),\n    unsubscribe(\"webfontloader\", handleFontEvent)\n  );\n\n  // A promise can't resolve during the oncreate loop\n  // The Mithril draw loop is synchronous - there is no delay between one this oncreate and the tab button's oncreate\n  whenCreateDone().then(redraw);\n};\n\nexport const onUnMount = ({ state }) =>\n  state.cleanUp();\n\nexport const createProps = (vnode, { keys: k }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n  const autofit = attrs.scrollable || attrs.centered\n    ? false\n    : attrs.autofit\n      ? true\n      : false;\n\n  // Keep selected tab up to date\n  const index = getIndex(state, attrs);\n  if (index !== undefined && state.previousSelectedTabIndex !== index) {\n    setSelectedTab(state, attrs, index, true);\n  }\n  state.previousSelectedTabIndex = index;\n\n  return Object.assign(\n    {},\n    filterSupportedAttributes(attrs),\n    {\n      className: [\n        classes.component,\n        attrs.scrollable ? classes.scrollable : null,\n        state.scrollButtonAtStart() ? classes.isAtStart : null,\n        state.scrollButtonAtEnd() ? classes.isAtEnd : null,\n        attrs.activeSelected ? classes.activeSelectable : null,\n        autofit ? classes.isAutofit : null,\n        attrs.compact ? classes.compactTabs : null,\n        attrs.menu ? classes.isMenu : null,\n        attrs.tone === \"dark\" ? \"pe-dark-tone\" : null,\n        attrs.tone === \"light\" ? \"pe-light-tone\" : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \")\n    }\n  );\n};\n\nexport const createContent = (vnode, { renderer: h, keys: k, Tab, ScrollButton }) => {\n  const state = vnode.state;\n  const attrs = vnode.attrs;\n\n  const buttons = attrs.content\n    ? attrs.content\n    : attrs.tabs\n      ? attrs.tabs\n      : attrs.children || vnode.children || [];\n\n  if (buttons.length === 0) {\n    console.error(\"No tabs specified\"); // eslint-disable-line no-console\n  }\n\n  const tabRow = buttons.map((buttonOpts = {}, index) => {\n    const buttonOptsCombined = Object.assign(\n      {},\n      buttonOpts,\n      {\n        // These options can be overridden by `all`\n        selected: index === state.selectedTabIndex(),\n        animateOnTap: (attrs.animateOnTap !== false) ? true : false\n      },\n      attrs.all,\n      {\n        // Internal options, should not get overridden\n        index,\n        key: buttonOpts.key || `tab-${index}`,\n        register: state.registerTabButton(state),\n        onSelect: () =>\n          setSelectedTab(state, attrs, index, attrs.noIndicatorSlide ? false : true)\n      }\n    );\n    return h(Tab, buttonOptsCombined);\n  });\n\n  let scrollButtonAtStart, scrollButtonAtEnd;\n  if (attrs.scrollable) {\n    scrollButtonAtStart = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"backward\",\n        icon: attrs.scrollIconBackward,\n        className: classes.scrollButtonAtStart,\n        position: \"start\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"backward\") },\n        isRTL: state.isRTL\n      }\n    ));\n    scrollButtonAtEnd = h(ScrollButton, Object.assign(\n      {},\n      {\n        key: \"forward\",\n        icon: attrs.scrollIconForward,\n        className: classes.scrollButtonAtEnd,\n        position: \"end\",\n        register: state.registerScrollButton(state),\n        events: { [k.onclick]: e => handleScrollButtonClick(state, attrs, e, \"forward\") },\n        isRTL: state.isRTL\n      }\n    ));\n  }\n\n  const tabIndicator = attrs.hideIndicator\n    ? null\n    : h(\"div\",\n      {\n        key: \"indicator\",\n        className: classes.indicator\n      }\n    );\n\n  return [\n    attrs.scrollable ? scrollButtonAtStart : null,\n    h(\"div\",\n      {\n        key: \"tabrow\",\n        className: [\n          classes.tabRow,\n          attrs.centered ? classes.tabRowCentered : null,\n          attrs.scrollable ? classes.tabRowIndent : null\n        ].join(\" \")\n      },\n      [\n        tabRow,\n        tabIndicator\n      ]\n    ),\n    attrs.scrollable ? scrollButtonAtEnd : null\n  ];\n};","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped Button component (set in polythene-xxx-tabs/tab)\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const attrs = vnode.attrs;\n  attrs.register(attrs.index, {\n    attrs,\n    dom\n  });\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k, Icon }) => {\n  const attrs = vnode.attrs;\n  // Let internal onclick function co-exist with passed button option\n  attrs.events = attrs.events || {};\n  attrs.events[k.onclick] = attrs.events[k.onclick] || (() => {});\n  return Object.assign(\n    {},\n    attrs,\n    {\n      content: h(\"div\",\n        { className: classes.tabContent },\n        [\n          attrs.icon ? h(Icon, attrs.icon) : null,\n          attrs.label\n            ? h(\"div\",\n              { className: classes.label },\n              h(\"span\", attrs.label)\n            )\n            : null,\n        ]),\n      className: [\n        classes.tab,\n        attrs.icon && attrs.label ? classes.tabHasIcon : null,\n        attrs.className || attrs[k.class],\n      ].join(\" \"),\n      selected: attrs.selected,\n      wash: false,\n      ripple: true,\n      events: Object.assign(\n        {},\n        attrs.events,\n        {\n          [k.onclick]: e => {\n            attrs.onSelect();\n            attrs.events[k.onclick](e);\n          }\n        }\n      )\n    }\n  );\n};\n\nexport const createContent = vnode =>\n  vnode.children;\n","import classes from \"polythene-css-classes/tabs\";\n\n// Don't export 'element': it will be the wrapped IconButton component (set in polythene-xxx-tabs/scroll-button)\n\nconst arrowBackward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z\\\"/></svg>\";\nconst arrowForward = \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z\\\"/></svg>\";\n\nexport const onMount = vnode => {\n  if (!vnode.dom) {\n    return;\n  }\n  const dom = vnode.dom;\n  const attrs = vnode.attrs;\n  attrs.register(attrs.position, dom);\n};\n\nexport const createProps = (vnode, { renderer: h, keys: k }) => {\n  const attrs = vnode.attrs;\n  const icon = attrs.position === \"start\"\n    ? attrs.icon || { svg: { content: h.trust(attrs.isRTL ? arrowForward : arrowBackward) } }\n    : attrs.icon || { svg: { content: h.trust(attrs.isRTL ? arrowBackward : arrowForward) } };\n  return {\n    className: [\n      classes.scrollButton,\n      attrs.className || attrs[k.class]\n    ].join(\" \"),\n    icon,\n    ripple: { center: true },\n    events: attrs.events,\n  };\n};\n"],"names":["component","super","row","content","label","textLabel","wash","dropdown","border","contained","disabled","dropdownClosed","dropdownOpen","extraWide","hasDropdown","highLabel","inactive","raised","selected","separatorAtStart","indicator","scrollButton","scrollButtonAtEnd","scrollButtonAtStart","tab","tabContent","tabRow","activeSelectable","isAtEnd","isAtStart","isAutofit","isMenu","scrollable","compactTabs","tabHasIcon","tabRowCentered","tabRowIndent","buttonClasses","SCROLL_SPEED","SCROLL_DELAY","SCROLL_MIN_DURATION","INDICATOR_SLIDE_MIN_DURATION","whenCreateDone","Promise","resolve","getIndex","state","attrs","attrsSelectedTabIndex","selectedTabIndex","undefined","selectedTab","Array","isArray","tabs","reduce","acc","index","scrollButtonGetNewIndex","minTabIndex","maxTabIndex","length","backward","Math","max","forward","min","handleScrollButtonClick","e","direction","stopPropagation","preventDefault","currentTabIndex","newIndex","setSelectedTab","scrollToTab","tabIndex","scroller","tabRowEl","tabLeft","slice","totalWidth","tabData","dom","getBoundingClientRect","width","scrollerWidth","scrollingWidth","scrollWidth","maxScroll","left","isRTL","currentLeft","scrollLeft","duration","abs","delaySeconds","setTimeout","scrollTo","element","to","then","updateScrollButtons","tabsEl","animateIndicator","selectedTabEl","animate","parentRect","rect","buttonSize","managesScroll","height","translateX","right","scaleX","transformCmd","style","tabIndicatorEl","transform","onChange","options","el","sortByLargestWidth","a","b","getInitialState","vnode","createStream","deprecation","option","newOption","registerTabButton","data","registerScrollButton","position","scrollButtons","previousSelectedTabIndex","isTouch","start","end","cleanUp","redrawOnUpdate","merge","onMount","hideIndicator","querySelector","classes","redrawLargestWidth","largestWidth","widths","map","largest","sort","forEach","redraw","handleFontEvent","name","subscribe","unsubscribe","onUnMount","createProps","keys","k","autofit","centered","Object","assign","filterSupportedAttributes","className","activeSelected","compact","menu","tone","class","join","createContent","renderer","h","Tab","ScrollButton","buttons","children","console","error","buttonOpts","buttonOptsCombined","animateOnTap","all","key","register","onSelect","noIndicatorSlide","icon","scrollIconBackward","events","onclick","scrollIconForward","tabIndicator","Icon","ripple","arrowBackward","arrowForward","svg","trust","center"],"mappings":"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"}