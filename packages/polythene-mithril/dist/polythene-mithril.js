!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("polythene-mithril-button"),require("polythene-mithril-button-group"),require("polythene-mithril-card"),require("polythene-mithril-checkbox"),require("polythene-mithril-dialog"),require("polythene-mithril-dialog-pane"),require("polythene-mithril-drawer"),require("polythene-mithril-fab"),require("polythene-mithril-icon"),require("polythene-mithril-icon-button"),require("polythene-mithril-ios-spinner"),require("polythene-mithril-list"),require("polythene-mithril-list-tile"),require("polythene-mithril-material-design-progress-spinner"),require("polythene-mithril-material-design-spinner"),require("polythene-mithril-menu"),require("polythene-mithril-notification"),require("polythene-mithril-radio-button"),require("polythene-mithril-radio-group"),require("polythene-mithril-raised-button"),require("polythene-mithril-ripple"),require("polythene-mithril-search"),require("polythene-mithril-shadow"),require("polythene-mithril-slider"),require("polythene-mithril-snackbar"),require("polythene-mithril-svg"),require("polythene-mithril-switch"),require("polythene-mithril-tabs"),require("polythene-mithril-textfield"),require("polythene-mithril-toolbar")):"function"==typeof define&&define.amd?define(["exports","polythene-mithril-button","polythene-mithril-button-group","polythene-mithril-card","polythene-mithril-checkbox","polythene-mithril-dialog","polythene-mithril-dialog-pane","polythene-mithril-drawer","polythene-mithril-fab","polythene-mithril-icon","polythene-mithril-icon-button","polythene-mithril-ios-spinner","polythene-mithril-list","polythene-mithril-list-tile","polythene-mithril-material-design-progress-spinner","polythene-mithril-material-design-spinner","polythene-mithril-menu","polythene-mithril-notification","polythene-mithril-radio-button","polythene-mithril-radio-group","polythene-mithril-raised-button","polythene-mithril-ripple","polythene-mithril-search","polythene-mithril-shadow","polythene-mithril-slider","polythene-mithril-snackbar","polythene-mithril-svg","polythene-mithril-switch","polythene-mithril-tabs","polythene-mithril-textfield","polythene-mithril-toolbar"],t):t((e=e||self).polythene={},e["polythene-mithril-button"],e["polythene-mithril-button-group"],e["polythene-mithril-card"],e["polythene-mithril-checkbox"],e["polythene-mithril-dialog"],e["polythene-mithril-dialog-pane"],e["polythene-mithril-drawer"],e["polythene-mithril-fab"],e["polythene-mithril-icon"],e["polythene-mithril-icon-button"],e["polythene-mithril-ios-spinner"],e["polythene-mithril-list"],e["polythene-mithril-list-tile"],e["polythene-mithril-material-design-progress-spinner"],e["polythene-mithril-material-design-spinner"],e["polythene-mithril-menu"],e["polythene-mithril-notification"],e["polythene-mithril-radio-button"],e["polythene-mithril-radio-group"],e["polythene-mithril-raised-button"],e["polythene-mithril-ripple"],e["polythene-mithril-search"],e["polythene-mithril-shadow"],e["polythene-mithril-slider"],e["polythene-mithril-snackbar"],e["polythene-mithril-svg"],e["polythene-mithril-switch"],e["polythene-mithril-tabs"],e["polythene-mithril-textfield"],e["polythene-mithril-toolbar"])}(this,function(e,t,n,r,i,o,l,a,u,c,f,s,h,d,p,m,y,v,b,g,w,j,k,O,x,E,P,S,C,q,z){"use strict";function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}N.normalize=function(e){return Array.isArray(e)?N("[",void 0,void 0,N.normalizeChildren(e),void 0,void 0):null!=e&&"object"!==A(e)?N("#",void 0,void 0,!1===e?"":e,void 0,void 0):e},N.normalizeChildren=function(e){for(var t=[],n=0;n<e.length;n++)t[n]=N.normalize(e[n]);return t};var $=function(){var e,t=arguments[this],n=this+1;if(null==t?t={}:("object"!==A(t)||null!=t.tag||Array.isArray(t))&&(t={},n=this),arguments.length===n+1)e=arguments[n],Array.isArray(e)||(e=[e]);else for(e=[];n<arguments.length;)e.push(arguments[n++]);return N("",t.key,t,e)},T=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,I={},R={}.hasOwnProperty;function L(e){for(var t in e)if(R.call(e,t))return!1;return!0}function M(e){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var t=$.apply(1,arguments);return"string"==typeof e&&(t.children=N.normalizeChildren(t.children),"["!==e)?function(e,t){var n=t.attrs,r=N.normalizeChildren(t.children),i=R.call(n,"class"),o=i?n.class:n.className;if(t.tag=e.tag,t.attrs=null,t.children=void 0,!L(e.attrs)&&!L(n)){var l={};for(var a in n)R.call(n,a)&&(l[a]=n[a]);n=l}for(var a in e.attrs)R.call(e.attrs,a)&&"className"!==a&&!R.call(n,a)&&(n[a]=e.attrs[a]);for(var a in null==o&&null==e.attrs.className||(n.className=null!=o?null!=e.attrs.className?String(e.attrs.className)+" "+String(o):o:null!=e.attrs.className?e.attrs.className:null),i&&(n.class=null),n)if(R.call(n,a)&&"key"!==a){t.attrs=n;break}return Array.isArray(r)&&1===r.length&&null!=r[0]&&"#"===r[0].tag?t.text=r[0].children:t.children=r,t}(I[e]||function(e){for(var t,n="div",r=[],i={};t=T.exec(e);){var o=t[1],l=t[2];if(""===o&&""!==l)n=l;else if("#"===o)i.id=l;else if("."===o)r.push(l);else if("["===t[3][0]){var a=t[6];a&&(a=a.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4]?r.push(a):i[t[4]]=""===a?a:a||!0}}return r.length>0&&(i.className=r.join(" ")),I[e]={tag:n,attrs:i}}(e),t):(t.tag=e,t)}M.trust=function(e){return null==e&&(e=""),N("<",void 0,void 0,e,void 0,void 0)},M.fragment=function(){var e=$.apply(0,arguments);return e.tag="[",e.children=N.normalizeChildren(e.children),e};var U=function(){return M.apply(this,arguments)};if(U.m=M,U.trust=M.trust,U.fragment=M.fragment,(D=function(e){if(!(this instanceof D))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var t=this,n=[],r=[],i=u(n,!0),o=u(r,!1),l=t._instance={resolvers:n,rejectors:r},a="function"==typeof setImmediate?setImmediate:setTimeout;function u(e,i){return function u(f){var s;try{if(!i||null==f||"object"!==A(f)&&"function"!=typeof f||"function"!=typeof(s=f.then))a(function(){i||0!==e.length||console.error("Possible unhandled promise rejection:",f);for(var t=0;t<e.length;t++)e[t](f);n.length=0,r.length=0,l.state=i,l.retry=function(){u(f)}});else{if(f===t)throw new TypeError("Promise can't be resolved w/ itself");c(s.bind(f))}}catch(e){o(e)}}}function c(e){var t=0;function n(e){return function(n){t++>0||e(n)}}var r=n(o);try{e(n(i),r)}catch(e){r(e)}}c(e)}).prototype.then=function(e,t){var n,r,i=this._instance;function o(e,t,o,l){t.push(function(t){if("function"!=typeof e)o(t);else try{n(e(t))}catch(e){r&&r(e)}}),"function"==typeof i.retry&&l===i.state&&i.retry()}var l=new D(function(e,t){n=e,r=t});return o(e,i.resolvers,n,!0),o(t,i.rejectors,r,!1),l},D.prototype.catch=function(e){return this.then(null,e)},D.prototype.finally=function(e){return this.then(function(t){return D.resolve(e()).then(function(){return t})},function(t){return D.resolve(e()).then(function(){return D.reject(t)})})},D.resolve=function(e){return e instanceof D?e:new D(function(t){t(e)})},D.reject=function(e){return new D(function(t,n){n(e)})},D.all=function(e){return new D(function(t,n){var r=e.length,i=0,o=[];if(0===e.length)t([]);else for(var l=0;l<e.length;l++)!function(l){function a(e){i++,o[l]=e,i===r&&t(o)}null==e[l]||"object"!==A(e[l])&&"function"!=typeof e[l]||"function"!=typeof e[l].then?a(e[l]):e[l].then(a,n)}(l)})},D.race=function(e){return new D(function(t,n){for(var r=0;r<e.length;r++)e[r].then(t,n)})},"undefined"!=typeof window){void 0===window.Promise?window.Promise=D:window.Promise.prototype.finally||(window.Promise.prototype.finally=D.prototype.finally);var D=window.Promise}else if("undefined"!=typeof global){void 0===global.Promise?global.Promise=D:global.Promise.prototype.finally||(global.Promise.prototype.finally=D.prototype.finally);D=global.Promise}var H=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)r(n,e[n]);return t.join("&");function r(e,n){if(Array.isArray(n))for(var i=0;i<n.length;i++)r(e+"["+i+"]",n[i]);else if("[object Object]"===Object.prototype.toString.call(n))for(var i in n)r(e+"["+i+"]",n[i]);else t.push(encodeURIComponent(e)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}},F=function(e,t){var n,r=0;function i(e){return function(r,i){"string"!=typeof r?(i=r,r=r.url):null==i&&(i={});var o=new t(function(t,n){e(r,i,function(e){if("function"==typeof i.type)if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=new i.type(e[n]);else e=new i.type(e);t(e)},n)});if(!0===i.background)return o;var l=0;function a(){0==--l&&"function"==typeof n&&n()}return function e(t){var n=t.then;return t.then=function(){l++;var r=n.apply(t,arguments);return r.then(a,function(e){if(a(),0===l)throw e}),e(r)},t}(o)}}function o(e,t){for(var n in e.headers)if({}.hasOwnProperty.call(e.headers,n)&&t.test(n))return!0;return!1}function l(e,t,n){if(null==t)return e;if(e=e.replace(/:([^\/]+)/gi,function(e,n){return null!=t[n]?t[n]:e}),n&&null!=t){var r=H(t);r&&(e+=(e.indexOf("?")<0?"?":"&")+r)}return e}return{request:i(function(t,n,r,i){var a=null!=n.method?n.method.toUpperCase():"GET",u="GET"!==a&&"TRACE"!==a&&("boolean"!=typeof n.useBody||n.useBody),c=n.data,f=!(null!=n.serialize&&n.serialize!==JSON.serialize||c instanceof e.FormData);u&&("function"==typeof n.serialize?c=n.serialize(c):c instanceof e.FormData||(c=JSON.stringify(c)));var s=new e.XMLHttpRequest,h=!1,d=s.abort;for(var p in s.abort=function(){h=!0,d.call(s)},s.open(a,l(t,n.data,!u),"boolean"!=typeof n.async||n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),f&&u&&!o(n,/^content-type0$/i)&&s.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||o(n,/^accept$/i)||s.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(s.withCredentials=n.withCredentials),n.timeout&&(s.timeout=n.timeout),n.responseType&&(s.responseType=n.responseType),n.headers)({}).hasOwnProperty.call(n.headers,p)&&s.setRequestHeader(p,n.headers[p]);"function"==typeof n.config&&(s=n.config(s,n)||s),s.onreadystatechange=function(){if(!h&&4===s.readyState)try{var e=s.status>=200&&s.status<300||304===s.status||/^file:\/\//i.test(t),o=s.responseText;if("function"==typeof n.extract)o=n.extract(s,n),e=!0;else if("function"==typeof n.deserialize)o=n.deserialize(o);else try{o=o?JSON.parse(o):null}catch(e){throw new Error("Invalid JSON: "+o)}if(e)r(o);else{var l=new Error(s.responseText);l.code=s.status,l.response=o,i(l)}}catch(e){i(e)}},u&&null!=c?s.send(c):s.send()}),jsonp:i(function(t,n,i,o){var a=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+r++,u=e.document.createElement("script");e[a]=function(t){u.parentNode.removeChild(u),i(t),delete e[a]},u.onerror=function(){u.parentNode.removeChild(u),o(new Error("JSONP request failed")),delete e[a]},t=l(t,n.data,!0),u.src=t+(t.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(a),e.document.documentElement.appendChild(u)}),setCompletionCallback:function(e){n=e}}}(window,D),_=function(e){var t,n=e.document,r={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function i(e){return e.attrs&&e.attrs.xmlns||r[e.tag]}function o(e,t){if(e.state!==t)throw new Error("`vnode.state` must not be modified")}function l(e){var t=e.state;try{return this.apply(t,arguments)}finally{o(e,t)}}function a(){try{return n.activeElement}catch(e){return null}}function u(e,t,n,r,i,o,l){for(var a=n;a<r;a++){var u=t[a];null!=u&&c(e,u,i,l,o)}}function c(e,t,r,o,a){var f=t.tag;if("string"==typeof f)switch(t.state={},null!=t.attrs&&$(t.attrs,t,r),f){case"#":!function(e,t,r){t.dom=n.createTextNode(t.children),v(e,t.dom,r)}(e,t,a);break;case"<":s(e,t,o,a);break;case"[":!function(e,t,r,i,o){var l=n.createDocumentFragment();if(null!=t.children){var a=t.children;u(l,a,0,a.length,r,null,i)}t.dom=l.firstChild,t.domSize=l.childNodes.length,v(e,l,o)}(e,t,r,o,a);break;default:!function(e,t,r,o,l){var a=t.tag,c=t.attrs,f=c&&c.is,s=(o=i(t)||o)?f?n.createElementNS(o,a,{is:f}):n.createElementNS(o,a):f?n.createElement(a,{is:f}):n.createElement(a);t.dom=s,null!=c&&function(e,t,n){for(var r in t)j(e,r,null,t[r],n)}(t,c,o);if(v(e,s,l),null!=c&&null!=c.contenteditable)b(t);else if(null!=t.text&&(""!==t.text?s.textContent=t.text:t.children=[N("#",void 0,void 0,t.text,void 0,void 0)]),null!=t.children){var h=t.children;u(s,h,0,h.length,r,null,o),"select"===t.tag&&null!=c&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;e.dom.value===n&&-1!==e.dom.selectedIndex||(e.dom.value=n)}"selectedIndex"in t&&j(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,c)}}(e,t,r,o,a)}else!function(e,t,n,r,i){(function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if($(e.state,e,t),null!=e.attrs&&$(e.attrs,e,t),e.instance=N.normalize(l.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(t,n),null!=t.instance?(c(e,t.instance,n,r,i),t.dom=t.instance.dom,t.domSize=null!=t.dom?t.instance.domSize:0):t.domSize=0}(e,t,r,o,a)}var f={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function s(e,t,r,i){var o=t.children.match(/^\s*?<(\w+)/im)||[],l=n.createElement(f[o[1]]||"div");"http://www.w3.org/2000/svg"===r?(l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",l=l.firstChild):l.innerHTML=t.children,t.dom=l.firstChild,t.domSize=l.childNodes.length;for(var a,u=n.createDocumentFragment();a=l.firstChild;)u.appendChild(a);v(e,u,i)}function h(e,t,n,r,i,o){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)u(e,n,0,n.length,r,i,o);else if(null==n||0===n.length)g(t,0,t.length);else{for(var l=0,a=0,f=null,s=null;a<t.length;a++)if(null!=t[a]){f=null!=t[a].key;break}for(;l<n.length;l++)if(null!=n[l]){s=null!=n[l].key;break}if(null===s&&null==f)return;if(f!==s)g(t,a,t.length),u(e,n,l,n.length,r,i,o);else if(s){for(var h,b,j,k,O,x=t.length-1,E=n.length-1;x>=a&&E>=l;)if(j=t[x],k=n[E],null==j)x--;else if(null==k)E--;else{if(j.key!==k.key)break;j!==k&&d(e,j,k,r,i,o),null!=k.dom&&(i=k.dom),x--,E--}for(;x>=a&&E>=l;)if(h=t[a],b=n[l],null==h)a++;else if(null==b)l++;else{if(h.key!==b.key)break;a++,l++,h!==b&&d(e,h,b,r,y(t,a,i),o)}for(;x>=a&&E>=l;){if(null==h)a++;else if(null==b)l++;else if(null==j)x--;else if(null==k)E--;else{if(l===E)break;if(h.key!==k.key||j.key!==b.key)break;O=y(t,a,i),v(e,m(j),O),j!==b&&d(e,j,b,r,O,o),++l<=--E&&v(e,m(h),i),h!==k&&d(e,h,k,r,i,o),null!=k.dom&&(i=k.dom),a++,x--}j=t[x],k=n[E],h=t[a],b=n[l]}for(;x>=a&&E>=l;){if(null==j)x--;else if(null==k)E--;else{if(j.key!==k.key)break;j!==k&&d(e,j,k,r,i,o),null!=k.dom&&(i=k.dom),x--,E--}j=t[x],k=n[E]}if(l>E)g(t,a,x+1);else if(a>x)u(e,n,l,E+1,r,i,o);else{var P,S,C=i,q=E-l+1,z=new Array(q),A=0,N=0,$=2147483647,T=0;for(N=0;N<q;N++)z[N]=-1;for(N=E;N>=l;N--)if(null==P&&(P=p(t,a,x+1)),null!=(k=n[N])){var I=P[k.key];null!=I&&($=I<$?I:-1,z[N-l]=I,j=t[I],t[I]=null,j!==k&&d(e,j,k,r,i,o),null!=k.dom&&(i=k.dom),T++)}if(i=C,T!==x-a+1&&g(t,a,x+1),0===T)u(e,n,l,E+1,r,i,o);else if(-1===$)for(A=(S=function(e){var t,n,r=e.slice(),i=[];i.push(0);for(var o=0,l=e.length;o<l;++o)if(-1!==e[o]){var a=i[i.length-1];if(e[a]<e[o])r[o]=a,i.push(o);else{for(t=0,n=i.length-1;t<n;){var u=(t+n)/2|0;e[i[u]]<e[o]?t=u+1:n=u}e[o]<e[i[t]]&&(t>0&&(r[o]=i[t-1]),i[t]=o)}}t=i.length,n=i[t-1];for(;t-- >0;)i[t]=n,n=r[n];return i}(z)).length-1,N=E;N>=l;N--)b=n[N],-1===z[N-l]?c(e,b,r,o,i):S[A]===N-l?A--:v(e,m(b),i),null!=b.dom&&(i=n[N].dom);else for(N=E;N>=l;N--)b=n[N],-1===z[N-l]&&c(e,b,r,o,i),null!=b.dom&&(i=n[N].dom)}}else{var R=t.length<n.length?t.length:n.length;for(l=l<a?l:a;l<R;l++)(h=t[l])===(b=n[l])||null==h&&null==b||(null==h?c(e,b,r,o,y(t,l+1,i)):null==b?w(h):d(e,h,b,r,y(t,l+1,i),o));t.length>R&&g(t,l,t.length),n.length>R&&u(e,n,l,n.length,r,i,o)}}}function d(e,t,n,r,o,a){var u=t.tag;if(u===n.tag){if(n.state=t.state,n.events=t.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=l.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=l.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(0);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,!0}(n,t))return;if("string"==typeof u)switch(null!=n.attrs&&T(n.attrs,n,r),u){case"#":!function(e,t){e.children.toString()!==t.children.toString()&&(e.dom.nodeValue=t.children);t.dom=e.dom}(t,n);break;case"<":!function(e,t,n,r,i){t.children!==n.children?(m(t),s(e,n,r,i)):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,a,o);break;case"[":!function(e,t,n,r,i,o){h(e,t.children,n.children,r,i,o);var l=0,a=n.children;if(n.dom=null,null!=a){for(var u=0;u<a.length;u++){var c=a[u];null!=c&&null!=c.dom&&(null==n.dom&&(n.dom=c.dom),l+=c.domSize||1)}1!==l&&(n.domSize=l)}}(e,t,n,r,o,a);break;default:!function(e,t,n,r){var o=t.dom=e.dom;r=i(t)||r,"textarea"===t.tag&&(null==t.attrs&&(t.attrs={}),null!=t.text&&(t.attrs.value=t.text,t.text=void 0));(function(e,t,n,r){if(null!=n)for(var i in n)j(e,i,t&&t[i],n[i],r);var o;if(null!=t)for(var i in t)null==(o=t[i])||null!=n&&null!=n[i]||k(e,i,o,r)})(t,e.attrs,t.attrs,r),null!=t.attrs&&null!=t.attrs.contenteditable?b(t):null!=e.text&&null!=t.text&&""!==t.text?e.text.toString()!==t.text.toString()&&(e.dom.firstChild.nodeValue=t.text):(null!=e.text&&(e.children=[N("#",void 0,void 0,e.text,void 0,e.dom.firstChild)]),null!=t.text&&(t.children=[N("#",void 0,void 0,t.text,void 0,void 0)]),h(o,e.children,t.children,n,null,r))}(t,n,r,a)}else!function(e,t,n,r,i,o){if(n.instance=N.normalize(l.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");T(n.state,n,r),null!=n.attrs&&T(n.attrs,n,r);null!=n.instance?(null==t.instance?c(e,n.instance,r,o,i):d(e,t.instance,n.instance,r,i,o),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=t.instance?(w(t.instance),n.dom=void 0,n.domSize=0):(n.dom=t.dom,n.domSize=t.domSize)}(e,t,n,r,o,a)}else w(t),c(e,n,r,a,o)}function p(e,t,n){for(var r=Object.create(null);t<n;t++){var i=e[t];if(null!=i){var o=i.key;null!=o&&(r[o]=t)}}return r}function m(e){var t=e.domSize;if(null!=t||null==e.dom){var r=n.createDocumentFragment();if(t>0){for(var i=e.dom;--t;)r.appendChild(i.nextSibling);r.insertBefore(i,r.firstChild)}return r}return e.dom}function y(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function v(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function b(e){var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=e.text||null!=t&&0!==t.length)throw new Error("Child node of a contenteditable must be trusted")}function g(e,t,n){for(var r=t;r<n;r++){var i=e[r];null!=i&&w(i)}}function w(e){var t,n=1,r=0,i=e.state;"string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove&&(null!=(t=l.call(e.state.onbeforeremove,e))&&"function"==typeof t.then&&(n++,t.then(a,a)));e.attrs&&"function"==typeof e.attrs.onbeforeremove&&(null!=(t=l.call(e.attrs.onbeforeremove,e))&&"function"==typeof t.then&&(n++,t.then(a,a)));function a(){if(++r===n&&(o(e,i),function e(t){"string"!=typeof t.tag&&"function"==typeof t.state.onremove&&l.call(t.state.onremove,t);t.attrs&&"function"==typeof t.attrs.onremove&&l.call(t.attrs.onremove,t);if("string"!=typeof t.tag)null!=t.instance&&e(t.instance);else{var n=t.children;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];null!=i&&e(i)}}}(e),e.dom)){for(var t=e.dom.parentNode,a=e.domSize||1;--a;)t.removeChild(e.dom.nextSibling);t.removeChild(e.dom)}}a()}function j(e,t,r,i,o){if("key"!==t&&"is"!==t&&null!=i&&!O(t)&&(r!==i||function(e,t){return"value"===t||"checked"===t||"selectedIndex"===t||"selected"===t&&e.dom===a()||"option"===e.tag&&e.dom.parentNode===n.activeElement}(e,t)||"object"===A(i))){if("o"===t[0]&&"n"===t[1])return z(e,t,i);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),i);else if("style"===t)C(e.dom,r,i);else if(x(e,t,o)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+i&&e.dom===a())return;if("select"===e.tag&&null!==r&&e.dom.value===""+i)return;if("option"===e.tag&&null!==r&&e.dom.value===""+i)return}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,i):e.dom[t]=i}else"boolean"==typeof i?i?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,i)}}function k(e,t,n,r){if("key"!==t&&"is"!==t&&null!=n&&!O(t))if("o"!==t[0]||"n"!==t[1]||O(t))if("style"===t)C(e.dom,n,null);else if(!x(e,t,r)||"className"===t||"value"===t&&("option"===e.tag||"select"===e.tag&&-1===e.dom.selectedIndex&&e.dom===a())||"input"===e.tag&&"type"===t){var i=t.indexOf(":");-1!==i&&(t=t.slice(i+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}else e.dom[t]=null;else z(e,t,void 0)}function O(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function x(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||null!=e.attrs&&e.attrs.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}var E=/[A-Z]/g;function P(e){return"-"+e.toLowerCase()}function S(e){return"-"===e[0]&&"-"===e[1]?e:"cssFloat"===e?"float":e.replace(E,P)}function C(e,t,n){if(t===n);else if(null==n)e.style.cssText="";else if("object"!==A(n))e.style.cssText=n;else if(null==t||"object"!==A(t))for(var r in e.style.cssText="",n){null!=(i=n[r])&&e.style.setProperty(S(r),String(i))}else{for(var r in n){var i;null!=(i=n[r])&&(i=String(i))!==String(t[r])&&e.style.setProperty(S(r),i)}for(var r in t)null!=t[r]&&null==n[r]&&e.style.removeProperty(S(r))}}function q(){}function z(e,t,n){if(null!=e.events){if(e.events[t]===n)return;null==n||"function"!=typeof n&&"object"!==A(n)?(null!=e.events[t]&&e.dom.removeEventListener(t.slice(2),e.events,!1),e.events[t]=void 0):(null==e.events[t]&&e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}else null==n||"function"!=typeof n&&"object"!==A(n)||(e.events=new q,e.dom.addEventListener(t.slice(2),e.events,!1),e.events[t]=n)}function $(e,t,n){"function"==typeof e.oninit&&l.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(l.bind(e.oncreate,t))}function T(e,t,n){"function"==typeof e.onupdate&&n.push(l.bind(e.onupdate,t))}return q.prototype=Object.create(null),q.prototype.handleEvent=function(e){var n,r=this["on"+e.type];"function"==typeof r?n=r.call(e.currentTarget,e):"function"==typeof r.handleEvent&&r.handleEvent(e),!1===e.redraw?e.redraw=void 0:"function"==typeof t&&t(),!1===n&&(e.preventDefault(),e.stopPropagation())},{render:function(e,t){if(!e)throw new Error("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var n=[],r=a(),i=e.namespaceURI;null==e.vnodes&&(e.textContent=""),t=N.normalizeChildren(Array.isArray(t)?t:[t]),h(e,e.vnodes,t,n,null,"http://www.w3.org/1999/xhtml"===i?void 0:i),e.vnodes=t,null!=r&&a()!==r&&"function"==typeof r.focus&&r.focus();for(var o=0;o<n.length;o++)n[o]()},setRedraw:function(e){return t=e}}};var J=function(e,t){var n=_(e),r=[],i=!1;function o(e){var t=r.indexOf(e);t>-1&&r.splice(t,2)}function l(){if(i)throw new Error("Nested m.redraw.sync() call");i=!0;for(var e=1;e<r.length;e+=2)try{r[e]()}catch(e){"undefined"!=typeof console&&console.error(e)}i=!1}var a=(t||function(e){var t=null;return function(){null===t&&(t=requestAnimationFrame(function(){t=null,e()}))}})(l);return a.sync=l,n.setRedraw(a),{subscribe:function(e,t){o(e),r.push(e,t)},unsubscribe:o,redraw:a,render:n.render}}(window);F.setCompletionCallback(J.redraw);var B;U.mount=(B=J,function(e,t){if(null===t)return B.render(e,[]),void B.unsubscribe(e);if(null==t.view&&"function"!=typeof t)throw new Error("m.mount(element, component) expects a component, not a vnode");var n=function(){B.render(e,N(t))};B.subscribe(e,n),n()});var K=D,G=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var t=e.split("&"),n={},r={},i=0;i<t.length;i++){var o=t[i].split("="),l=decodeURIComponent(o[0]),a=2===o.length?decodeURIComponent(o[1]):"";"true"===a?a=!0:"false"===a&&(a=!1);var u=l.split(/\]\[?|\[/),c=n;l.indexOf("[")>-1&&u.pop();for(var f=0;f<u.length;f++){var s=u[f],h=u[f+1],d=""==h||!isNaN(parseInt(h,10)),p=f===u.length-1;if(""===s)null==r[l=u.slice(0,f).join()]&&(r[l]=0),s=r[l]++;null==c[s]&&(c[s]=p?a:d?[]:{}),c=c[s]}}return n},Q=function(e){var t,n="function"==typeof e.history.pushState,r="function"==typeof setImmediate?setImmediate:setTimeout;function i(t){var n=e.location[t].replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent);return"pathname"===t&&"/"!==n[0]&&(n="/"+n),n}function o(e,t,n){var r=e.indexOf("?"),i=e.indexOf("#"),o=r>-1?r:i>-1?i:e.length;if(r>-1){var l=i>-1?i:e.length,a=G(e.slice(r+1,l));for(var u in a)t[u]=a[u]}if(i>-1){var c=G(e.slice(i+1));for(var u in c)n[u]=c[u]}return e.slice(0,o)}var l={prefix:"#!",getPath:function(){switch(l.prefix.charAt(0)){case"#":return i("hash").slice(l.prefix.length);case"?":return i("search").slice(l.prefix.length)+i("hash");default:return i("pathname").slice(l.prefix.length)+i("search")+i("hash")}},setPath:function(t,r,i){var a={},u={};if(t=o(t,a,u),null!=r){for(var c in r)a[c]=r[c];t=t.replace(/:([^\/]+)/g,function(e,t){return delete a[t],r[t]})}var f=H(a);f&&(t+="?"+f);var s=H(u);if(s&&(t+="#"+s),n){var h=i?i.state:null,d=i?i.title:null;e.onpopstate(),i&&i.replace?e.history.replaceState(h,d,l.prefix+t):e.history.pushState(h,d,l.prefix+t)}else e.location.href=l.prefix+t}};return l.defineRoutes=function(i,a,u){function c(){var t=l.getPath(),n={},r=o(t,n,n),c=e.history.state;if(null!=c)for(var f in c)n[f]=c[f];for(var s in i){var h=new RegExp("^"+s.replace(/:[^\/]+?\.{3}/g,"(.*?)").replace(/:[^\/]+/g,"([^\\/]+)")+"/?$");if(h.test(r))return void r.replace(h,function(){for(var e=s.match(/:[^\/]+/g)||[],r=[].slice.call(arguments,1,-2),o=0;o<e.length;o++)n[e[o].replace(/:|\./g,"")]=decodeURIComponent(r[o]);a(i[s],n,t,s)})}u(t,n)}var f;n?e.onpopstate=(f=c,function(){null==t&&(t=r(function(){t=null,f()}))}):"#"===l.prefix.charAt(0)&&(e.onhashchange=c),c()},l};U.route=function(e,t){var n,r,i,o,l,a=Q(e),u=function(e,u,c){if(null==e)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");function f(){null!=n&&t.render(e,n(N(r,i.key,i)))}var s=function(){f(),s=t.redraw};t.subscribe(e,f);var h=function(e){if(e===u)throw new Error("Could not resolve default route "+u);a.setPath(u,null,{replace:!0})};a.defineRoutes(c,function(e,t,a){var u=l=function(e,c){u===l&&(r=null==c||"function"!=typeof c.view&&"function"!=typeof c?"div":c,i=t,o=a,l=null,n=(e.render||function(e){return e}).bind(e),s())};e.view||"function"==typeof e?u({},e):e.onmatch?K.resolve(e.onmatch(t,a)).then(function(t){u(e,t)},h):u(e,"div")},h)};u.set=function(e,t,n){null!=l&&((n=n||{}).replace=!0),l=null,a.setPath(e,t,n)},u.get=function(){return o},u.prefix=function(e){a.prefix=e};var c=function(e,t){t.dom.setAttribute("href",a.prefix+t.attrs.href),t.dom.onclick=function(t){if(!(t.ctrlKey||t.metaKey||t.shiftKey||2===t.which)){t.preventDefault(),t.redraw=!1;var n=this.getAttribute("href");0===n.indexOf(a.prefix)&&(n=n.slice(a.prefix.length)),u.set(n,void 0,e)}}};return u.link=function(e){return null==e.tag?c.bind(c,e):c({},e)},u.param=function(e){return void 0!==i&&void 0!==e?i[e]:i},u}(window,J);var V=_(window);U.render=V.render,U.redraw=J.redraw,U.request=F.request,U.jsonp=F.jsonp,U.parseQueryString=G,U.buildQueryString=H,U.version="2.0.0-rc.4",U.vnode=N,U.PromisePolyfill=D;var X=U;X.displayName="mithril",Object.keys(t).forEach(function(n){Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})}),Object.keys(n).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),Object.keys(r).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}),Object.keys(i).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}),Object.keys(o).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}),Object.keys(l).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return l[t]}})}),Object.keys(a).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}),Object.keys(u).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return u[t]}})}),Object.keys(c).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return c[t]}})}),Object.keys(f).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return f[t]}})}),Object.keys(s).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}),Object.keys(h).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return h[t]}})}),Object.keys(d).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return d[t]}})}),Object.keys(p).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return p[t]}})}),Object.keys(m).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return m[t]}})}),Object.keys(y).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return y[t]}})}),Object.keys(v).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return v[t]}})}),Object.keys(b).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return b[t]}})}),Object.keys(g).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return g[t]}})}),Object.keys(w).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return w[t]}})}),Object.keys(j).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return j[t]}})}),Object.keys(k).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return k[t]}})}),Object.keys(O).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return O[t]}})}),Object.keys(x).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return x[t]}})}),Object.keys(E).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return E[t]}})}),Object.keys(P).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return P[t]}})}),Object.keys(S).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return S[t]}})}),Object.keys(C).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return C[t]}})}),Object.keys(q).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return q[t]}})}),Object.keys(z).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return z[t]}})}),e.renderer=X,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=polythene-mithril.js.map
